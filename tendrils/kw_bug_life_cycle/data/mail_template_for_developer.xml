<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <record id="email_template_for_tester" model="mail.template">
            <field name="name">Bug Create E-mail Template</field>
            <field name="email_from">tendrils@csm.tech</field>
            <field name="subject">${ctx['subject']}</field>
            <field name="email_to">${ctx['email_to']}</field>
            <field name="developer_name">${ctx['developer_name']}</field>
            <field name="email_cc">${ctx['mail_cc']|safe}</field>
            <field name="model_id" ref="kw_bug_life_cycle.model_kw_raise_defect"/>
            <field name="auto_delete" eval="False"/>
            <field name="body_html" type='html'>
                <table>
                    <thead>
                        <tr>
                            <td>
                                <div style="margin-left: 1.2rem;">
                                    <h5 style="font-weight: 400;margin-bottom: 0;font-size: 18px;color:#676767;">
                                        <small style="color:rgb(22, 123, 158);font-size: 18px;margin-right: 2px;font-weight: 600;">Hello</small>
                                            <strong>${ctx['name']},</strong>
                                    </h5>
                                    % if ctx['mail_for'] == 'Test':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            <strong>${object.number}</strong> has been raised by  <strong>${ctx['tname']}</strong> . For more details, Login to Bug Repository.
                                        </p>
                                    % endif
                                    % if ctx['mail_for'] == 'PM':
                                        In Project <strong>${ctx['proj_name']}</strong> the total issues raised today is: <strong>${ctx['bug_count']}</strong> and till date Open <strong>${ctx['alive_data']}</strong>
                                            For more details, Login to Bug Repository.
% endif
                                    % if ctx['mail_for'] == 'Developer':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            You have been assigned to The Bug : <strong>${object.number}</strong> Please check and fix the bug ASAP.
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Test_lead':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            Please assigned  The Raised Bug:<strong>${object.number}</strong> To The Appropriate Developer.
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Module_Lead':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            Please assigned  The Raised Bug:<strong>${object.number}</strong> To The Appropriate Developer.
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Ticket':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            <strong>${ctx['developer_name']}</strong> accepted the ticket <strong>${object.number}</strong> that you have raised . Given the remark as <b>${ctx['remark']}</b>
                                            and set the time to solve the bug in <b>${ctx['time']}</b> Hour.
                                        </p>
                                  
                                    % elif ctx['mail_for'] == 'Hold':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            <strong>${ctx['developer_name']}</strong> hold the bug that you have raised . Given the remark as <b>${ctx['remark']}</b>
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Done':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            The ticket :<strong>${ctx['defect_id']}</strong> has been solved by:<strong>${ctx['developer_name']}</strong>. Given the remark as <b>${ctx['remark']}</b>
                                        </p>
                                  
                                    % elif ctx['mail_for'] == 'close':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            The ticket : <strong>${object.number}</strong> has been closed .  Given the remark as <b>${ctx['remark']}</b>
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Reopen_ml':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            The ticket : <strong>${object.number}</strong> has been reopened . Given the remark as <b>${ctx['remark']}</b>,Please assign this bug to a appropriate developer.
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Reopen_dev':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            You have been assigned the Reopen Bug : <strong>${object.number}</strong> . Given the remark as <b>${ctx['remark']}</b>,Please check and fix the bug ASAP..
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Reopen':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            The ticket : <strong>${object.number}</strong> has been reopened . Given the remark as <b>${ctx['remark']}</b>,Please assign this bug to a appropriate developer.
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Rejected_dev':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            The ticket : <strong>${object.number}</strong> has been Rejected by the developer : <strong>${ctx['developer_name']}</strong>. Given the remark as <b>${ctx['remark']}</b>
                                        </p>
                                   
                                    % elif ctx['mail_for'] == 'Forward':
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                            The ticket : <strong>${object.number}</strong> has been forwarded by the developer <b>${ctx['developer']}</b> . Given the remark as <b>${ctx['remark']}</b>
                                        </p>
                                    % endif
                                    
                                </div>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <br/><br/><p>
                                This is a system generated mail. Please do not reply to this email.
                            </p>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </field>
        </record>

        <record id="email_template_for_developer" model="mail.template">
            <field name="name">Bug Assigned E-mail Template</field>
            <field name="email_from">tendrils@csm.tech</field>
            <field name="subject">The Bug has been Assigned.</field>
            <field name="email_to">${ctx['email_to']}</field>
            <!-- <field name="email_cc">${(ctx.get('email_cc') or ''|safe)}</field> -->
            <field name="model_id" ref="kw_bug_life_cycle.model_kw_raise_defect"/>
            <field name="auto_delete" eval="False"/>
            <field name="body_html" type='html'>
                <table>
                    <thead>
                        <tr>
                            <td>
                                <p>
                                    Dear <strong>${ctx['name']},</strong>
                                </p>
                                <p>
                                    You Are Assigned  The Bug : <strong>${object.number}</strong>.
                                </p>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <br/><br/>
                                <p>
                                    You can reply to this email to more information for the Bug.
                                </p>
                                Regards
                                <br/>
                                ${object.env.user.name}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </field>
        </record>

        <record id="email_template_for_test_lead" model="mail.template">
            <field name="name">Bug E-mail Template</field>
            <field name="email_from">tendrils@csm.tech</field>
            <field name="subject">Assign The Bug To The Appropriate Developer</field>
            <field name="email_to">${ctx['email_to']}</field>
            <field name="model_id" ref="kw_bug_life_cycle.model_kw_raise_defect"/>
            <field name="auto_delete" eval="False"/>
            <field name="body_html" type='html'>
                <table>
                    <thead>
                        <tr>
                            <td>
                                <p>
                                    Dear<strong> ${ctx['name']}</strong>
                                </p>
                                <p>
                                    Please assigned  The Bug No:<strong>${object.number}</strong> To The Appropriate Developer.
                                </p>
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <p>
                                    You can reply to this email to more information about the Bug.
                                </p>
                                Regards
                                <br/>
                                ${object.env.user.name}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </field>
        </record>

        <record id="email_template_escalation_reminder_mail" model="mail.template">
            <field name="name">Bug Escalation Template</field>
            <field name="email_from">tendrils@csm.tech</field>
            <field name="subject">${ctx['subject']}</field>
            <field name="email_to">${ctx['email_to']}</field>
            <!-- <field name="developer_name">${ctx['developer_name']}</field> -->
            <field name="email_cc">${ctx['mail_cc']|safe}</field>
            <field name="model_id" ref="kw_bug_life_cycle.model_kw_raise_defect"/>
            <field name="auto_delete" eval="False"/>
            <field name="body_html" type='html'>
                <table>
                    <thead>
                        <tr>
                            <td>
                                <div style="margin-left: 1.2rem;">
                                    <h5 style="font-weight: 400;margin-bottom: 0;font-size: 18px;color:#676767;">
                                        <small style="color:rgb(22, 123, 158);font-size: 18px;margin-right: 2px;font-weight: 600;">Hello</small>
                                            <strong>${ctx['name']},</strong>
                                    </h5>
                                   
                                    <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                                        Please find <strong>${ctx['ticket_id']}</strong> is pending at you &amp; need your attention. Please avoid follow-up on you.
                                    </p>
                                    <br></br>
                                    <table border="1" style="width:100%;margin-left:1.2rem;border-collapse: collapse;font-size: 16px; margin-top:2rem;">
                                        <tr>
                                            <td style="height: 30px; padding-left:20px; padding-right: 20px; font-weight:700;color:#676767;text-align:left;">Project </td>
                                            <td style="height: 30px; padding-left:20px;font-weight:700;color:#676767;text-align:left;"> Ticket ID</td>
                                            <td style="height: 30px; padding-left:20px;font-weight:700;color:#676767;text-align:left;"> Current Stage</td>
                                            <td style="height: 30px; padding-left:20px;font-weight:700;color:#676767;text-align:left;"> Next Possible Stage</td>
                                            <td style="height: 30px; padding-left:20px;font-weight:700;color:#676767;text-align:left;"> Time since last stage(HH:MM)</td>
                                            <td style="height: 30px; padding-left:20px;font-weight:700;color:#676767;text-align:left;"> Mail Iteration</td>
                                        </tr>
                                        %for rec in ctx['bug_stage']:
                                            <tr>
                                                <td style="padding-left:5px;color:#676767;padding-left: 20px;height: 34px;width:10%;" >
                                                    ${rec['project']}
                                                </td>
                                                 <td style="padding-left:5px;color:#676767;padding-left: 20px;height: 34px;width:10%;" >
                                                    ${rec['ticket_id']}
                                                </td>
                                                 <td style="padding-left:5px;color:#676767;padding-left: 20px;height: 34px;width:10%;" >
                                                    ${rec['stage_bug']}
                                                </td>
                                                 <td style="padding-left:5px;color:#676767;padding-left: 20px;height: 34px;width:10%;" >
                                                    ${rec['next_stage']}
                                                </td>
                                                <td style="padding-left:5px;color:#676767;padding-left: 20px;height: 34px;width:10%;" >
                                                    ${rec['time_from_last']}
                                                </td>
                                                <td style="padding-left:5px;color:#676767;padding-left: 20px;height: 34px;width:10%;" >
                                                    ${rec['reminder_count']}
                                                </td>
                                            </tr>
                                        % endfor
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </thead>
                </table>
            </field>
        </record>




    </data>
</odoo>