<odoo>
    <data>
        <!-- kw_claim form view -->
        <record id="kw_claim_view_form" model="ir.ui.view">
            <field name="name">kw_claim.view.form</field>
            <field name="model">kw_claim</field>
            <field name="arch" type="xml">
                <form string="">
                    <header>
                        <button name="action_level1_approve_btn" type="object" string="Approve" class="btn-success" attrs="{'invisible':[('direct_parent','=',False)]}"/>
                        <!-- <button name="action_level2_approve_btn" type="object" string="Approve" class="btn-success" attrs="{'invisible':[('second_parent','=',False)]}"/> -->
                        <button name="action_revert" type="object" string="Revert" class="btn-danger" attrs="{'invisible':[('check_revert_boolean','=',False)]}"/>
                        <button name="action_reject_btn_first" type="object" string="Reject" class="btn-danger" attrs="{'invisible':[('direct_parent','=',False)]}"/>
                        <!-- <button name="action_reject_btn_second" type="object" string="Reject" class="btn-danger" attrs="{'invisible':[('show_reject_second','=',False)]}"/> -->
                        <button name="action_button_verified" type="object" string="Verified" class="btn-warning" groups="kw_advance_claim.group_kw_advance_claim_account" attrs = "{'invisible':[('state','in',['verified','disbursed','reject'])]}"/>
                        <button name="action_button_disbursed" type="object" string="Disburse" class="btn-success" groups="kw_advance_claim.group_kw_advance_claim_account" attrs= "{'invisible':[('state','in',['disbursed','reject'])]}"/>
                        <button name="action_button_set_to_draft" type="object" string="Set to Draft" class="oe_highlight" groups="kw_advance_claim.group_kw_advance_claim_account" attrs= "{'invisible':[('state','!=','reject')]}"/>
                        <button name="action_apply_btn"  type="object" string="Apply" class="oe_highlight"  attrs="{'invisible':[('apply_boolean','=',False)]}" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,applied,approved,disbursed"/>
                    </header>
                    <sheet>
                        <div class="oe-tittle">
                            <h1 style="color:#108fbb">
							Applicant Information
                            </h1>
                        </div>
                        <!-- <div class="oe-tittle">
							<h3>
								<field name="code" readonly='1' class="oe_inline" />
							</h3>
						</div> -->
                        <group>
                            <group>
                                <!-- <field name="check_reviewer"/> -->
                                <field name="apply_boolean" invisible='1'/>
                                <field name="check_revert_boolean" string='Show' invisible='1'/>
                                <field name="direct_parent" invisible='1'/>
                                <field name="second_parent" invisible='1'/>
                                <field name="show_reject_first" invisible='1'/>
                                <field name="show_reject_second" invisible='1'/>
                                <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1' force_save="1"/>
                                <field name="job_id" string="Designation" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1' force_save="1"/>
                                <field name="department_id" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1' force_save="1"/>
                                <field name="division" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1' force_save="1"/>
                                <field name="section" options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'invisible':[('section','=',False)]}" readonly='1' force_save="1"/>
                                <field name="practise" options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'invisible':[('practise','=',False)]}" readonly='1' force_save="1"/>
                                <field name="grade_id" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1' force_save="1"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="budget" invisible='1'/>
                                <field name="check_user_boolean" invisible='1'/>
                                <field name="category_id" options="{'no_open': True,'no_create':True,'no_edit':True}" required='1' force_save="1" attrs="{'readonly':[('state','!=','draft')]}"/>
                                <field name="project_id"  attrs="{'required':[('budget','=','project_budget'),],'invisible':[('budget','!=','project_budget')],'readonly':[('state','!=','draft')]}" options="{'no_open': True,'no_create':True,'no_edit':True}" />
                                <field name="sub_category_ids" context="{'category_id':category_id}" required='1' attrs="{'readonly':[('check_user_boolean','=',False)]}">
                                    <tree editable='top'>
                                        <field name="claim_category_id" domain="[('claim_category_id','=',context.get('category_id'))]" options="{'no_open': True,'no_create':True,'no_edit':True}" required='1' force_save="1"/>
                                        <field name="item_model" required='1'/>
                                        <field name="item_unit" required='1'/>
                                        <field name="item_quantity" required='1'/>
                                        <field name="currency_id" invisible='1'/>
                                        <field name="item_rate" required='1' widget="monetary"/>
                                        <field name="amount" required='1' force_save="1" sum="Total" string="Cost" widget="monetary"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="claim_category_id" domain="[('claim_category_id','=',context.get('category_id'))]" options="{'no_open': True,'no_create':True,'no_edit':True}" required='1' force_save="1"/>
                                            <field name="item_model" required='1'/>
                                            <field name="item_unit" required='1'/>
                                            <field name="item_quantity" required='1'/>
                                            <field name="currency_id" invisible='1'/>
                                            <field name="item_rate" required='1' widget="monetary"/>
                                            <field name="amount" required='1' force_save="1" sum="Total" string="Cost" widget="monetary"/>
                                        </group>
                                    </form>
                                </field>
                                <field name="amount" invisible="1"/>
                                <field name="remark" required='1' attrs="{'readonly':[('state','!=','draft')]}"/>
                                <field name="upload_doc" filename="file_name" attrs="{'required':[('state','=','draft')],'readonly':[('state','!=','draft')]}"/>
                                <field name="file_name" invisible="1"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="log_ids" readonly='1' force_save='1' attrs="{'invisible':[('id','=',False)]}">
                                    <tree>
                                        <field name="date"/>
                                        <field name="action_taken_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                        <field name="state"/>
                                        <field name="remark"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="date"/>
                                            <field name="action_taken_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                        </group>
                                        <group>
                                            <field name="state"/>
                                            <field name="remark"/>
                                        </group>
                                    </form>
                                </field>
                            </group>
                        </group>
                    </sheet>
                    <group>
                        <div class="oe_chatter">
                            <field name="message_follower_ids" widget="mail_followers" />
                            <field name="activity_ids" widget="mail_activity" />
                            <field name="message_ids" widget="mail_thread" />
                        </div>
                    </group>
                </form>
            </field>
        </record>
        <!-- kw_claim tree view -->
        <record id="kw_claim_view_tree" model="ir.ui.view">
            <field name="name">kw_claim.view.tree</field>
            <field name="model">kw_claim</field>
            <field name="arch" type="xml">
                <tree delete="false">
                    <!-- Add your fields here -->
                    <field name="code"/>
                    <field name="employee_id"/>
                    <field name="department_id"/>
                    <field name="division"/>
                    <field name="category_id"/>
                    <!-- <field name="sub_category_id" widget="many2many_tags" invisible='1'/> -->
                    <field name="amount"/>
                    <field name="state"/>
                    <field name="pending_at"/>
                    <!-- <field name="first_approver_id"/>
                    <field name="reviewer_id"/>
                    <field name="second_approver_id"/> -->
                    <field name="direct_parent" invisible='1'/>
                    <!-- <field name="who_approved" invisible='1' force_save = '1'/> -->
                </tree>
            </field>
        </record>
        <!-- kw_claim search view -->
        <record id="kw_claim_view_search" model="ir.ui.view">
            <field name="name">kw_claim.view.search</field>
            <field name="model">kw_claim</field>
            <field name="arch" type="xml">
                <search string="Search Description">
                    <filter string="This Year" domain="[('year', '=',context_today().strftime('%Y'))]" name="current_year_claim"/>
                    <filter string="Last Year" domain="[('year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_claim"/>
                    <separator/>
                    <filter string="January" domain="[('month','=',1)]" name="january_claim"/>
                    <filter string="February" domain="[('month','=',2)]" name="february_claim"/>
                    <filter string="March" domain="[('month','=',3)]" name="march_claim"/>
                    <filter string="April" domain="[('month','=',4)]" name="april_claim"/>
                    <filter string="May" domain="[('month','=',5)]" name="may_claim"/>
                    <filter string="June" domain="[('month','=',6)]" name="june_claim"/>
                    <filter string="July" domain="[('month','=',7)]" name="july_claim"/>
                    <filter string="August" domain="[('month','=',8)]" name="august_claim"/>
                    <filter string="September" domain="[('month','=',9)]" name="september_claim"/>
                    <filter string="October" domain="[('month','=',10)]" name="october_claim"/>
                    <filter string="November" domain="[('month','=',11)]" name="november_claim"/>
                    <filter string="December" domain="[('month','=',12)]" name="december_claim"/>
                </search>
            </field>
        </record>
        <!-- kw_claim action window -->
        <record id="kw_claim_action" model="ir.actions.act_window">
            <field name="name">Apply Claim</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">kw_claim</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="domain">[('create_uid','=',uid)]</field>
            <field name="context">{'delete':False}</field>
        </record>
        <record id="kw_claim_take_action" model="ir.actions.act_window">
            <field name="name">Take Action</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">kw_claim</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="domain">[('user_id','=',uid),('state','=','applied')]</field>
            <field name="context">{'create': False,'edit':False,'delete':False}</field>
            <field name="view_ids" eval="[(5, 0, 0), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_claim_view_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('kw_claim_view_form')})]"/>
        </record>
        <record id="kw_claim_finance_view_tree" model="ir.ui.view">
            <field name="name">kw_claim.view.tree</field>
            <field name="model">kw_claim</field>
            <field name="priority">100</field>
            <field name="arch" type="xml">
                <tree delete="false">
                    <!-- Add your fields here -->
                    <field name="code" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="employee_id" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="department_id" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="division" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="category_id" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <!-- <field name="sub_category_id" widget="many2many_tags"/> -->
                    <field name="amount" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="state" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="pending_at" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <field name="direct_parent" invisible='1'/>
                    <button name="action_button_view_form" type="object" string="View Form" class="oe_highlight" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <button name="action_button_verified" type="object" string="Verified" class="btn-warning" groups="kw_advance_claim.group_kw_advance_claim_account" attrs = "{'invisible':[('state','=','verified')]}"/>
                    <button name="action_button_disbursed" type="object" string="Disburse" class="btn-success" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                    <button name="action_reject_btn_first" type="object" string="Reject" class="btn-danger" groups="kw_advance_claim.group_kw_advance_claim_account"/>
                </tree>
            </field>
        </record>
        <record id="kw_claim_finance_take_action" model="ir.actions.act_window">
            <field name="name">Finance Take Action</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">kw_claim</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','in',['approved','verified'])]</field>
            <field name="context">{'create': False,'edit':False,'delete':False}</field>
            <field name="groups_id" eval="[(6,0,[ref('kw_advance_claim.group_kw_advance_claim_account')])]"/>
            <field name="view_id" ref="kw_claim_finance_view_tree"/>
        </record>
        <!-- This Menu Item must have a parent and an action -->
        <menuitem id="kw_claim_sub_menu" name="CLAIM"  
                parent="claim_root_menu"
                sequence="1"  
               />
        <menuitem id="kw_claim_menu_apply" name="Apply" 
                    parent="kw_claim_sub_menu" sequence="1" 
                    action='kw_claim_action'/>
        <menuitem id="kw_apply_root_claim_take_action_menu" 
                    name="Take Action" 
                    parent="kw_claim_sub_menu"
                    sequence="2"/>
        <menuitem id="kw_claim_menu_take_action" 
                    name="Approval Authority" parent="kw_apply_root_claim_take_action_menu" 
                    sequence="3" action='kw_claim_take_action'/>
        <menuitem id="kw_claim_menu_finance_take_action" 
            name="Accounts " parent="kw_apply_root_claim_take_action_menu" sequence="4" 
            action='kw_claim_finance_take_action' 
            groups="kw_advance_claim.group_kw_advance_claim_account"/>
    </data>
</odoo>