<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="payroll_form_12_b_view_tree" model="ir.ui.view">
            <field name="name">payroll_form_12_b.tree</field>
            <field name="model">payroll_form_12_b</field>
            <field name="arch" type="xml">
                <tree string="" create="false" import="false">
                    <field name="year"/>
                    <field name="month_name"/>
                    <field name="department"/>
                    <field name="job" sum="Total"/>
                    <field name="emp_code"/>
                    <field name="employee_id"  invisible="1"/>
                    <field name="name"/>
                    <field name="final_gross" sum="Total"/>
                </tree>
            </field>
        </record>

        <record id="payroll_form_12_b_search" model="ir.ui.view">
            <field name="name">payroll_form_12_b.view.search</field>
            <field name="model">payroll_form_12_b</field>
            <field name="arch" type="xml">
                <search string="Search Description">
                    <field name="employee_id"/>
                    <field name="year"/>
                    <field name="month"/>
                    <field name="employee_id"/>

                    <filter string="This Year" domain="[('year', '=',context_today().strftime('%Y'))]" name="current_year_form12b"/>
                    <filter string="Last Year" domain="[('year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_payroll_tds"/> 
                    <separator/>

					<filter string="This Month" name="current_month_form12b" domain="[('current_month','=',True)]"/>
                    <filter string="Last Month" domain="[('date_to','&gt;',(context_today()-relativedelta(months=1)).strftime('%Y-%m-01')),('date_to','&lt;',(context_today()).strftime('%Y-%m-01'))]" name="last_month_salary_other_advance"/>
                    <separator/>

                    <filter string="January" domain="[('month','=','1')]" name="january__payroll_tds"/>
                    <filter string="February" domain="[('month','=','2')]" name="february__payroll_tds"/>
                    <filter string="March" domain="[('month','=','3')]" name="march__payroll_tds"/>
                    <filter string="April" domain="[('month','=','4')]" name="april__payroll_tds"/>
                    <filter string="May" domain="[('month','=','5')]" name="may__payroll_tds"/>
                    <filter string="June" domain="[('month','=','6')]" name="june__payroll_tds"/>
                    <filter string="July" domain="[('month','=','7')]" name="july__payroll_tds"/>
                    <filter string="August" domain="[('month','=','8')]" name="august__payroll_tds"/>
                    <filter string="September" domain="[('month','=','9')]" name="september__payroll_tds"/>
                    <filter string="October" domain="[('month','=','10')]" name="october__payroll_tds"/>
                    <filter string="November" domain="[('month','=','11')]" name="november__payroll_tds"/>
                    <filter string="December" domain="[('month','=','12')]" name="december__payroll_tds"/>
                    <separator/>
                </search>
            </field>
        </record>

        <record id="payroll_form_12_b_action" model="ir.actions.act_window">
            <field name="name">Form 12 B Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">payroll_form_12_b</field>
            <field name="context">{'search_default_current_year_form12b':1,'search_default_current_month_form12b':1}</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="domain">[('final_gross','&gt;', 0)]</field>
            <field name="view_ids" eval="[(5, 0, 0), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('payroll_form_12_b_view_tree')})]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Records to show...
                </p>
            </field>
        </record>

         <record id="form12b_download_report_wizard" model="ir.ui.view">
            <field name="name">Download Form 12B</field>
            <field name="model">form12b_report_download</field>
            <field name="arch" type="xml">
                <form string="Download Form 12-B">
                     <script>
                        $(document).ready(function(){
                            $(".modal-title").show();
                        });
                    </script>
                    <header>
                    </header>
                    <sheet>     
                        <group>
                            <field name="formb_details_ids" />
                        </group>
                        
                    </sheet>
                    <footer>
                        <button name="download_form12b_report" string="Download"
                                    type="object" class="oe_highlight"
                                    icon="fa-refresh"/>
                    </footer>
                </form>
            </field>
        </record>
        <act_window id="action_download_form12b_report_wizard"
		            name="Download Form 12-B Report"
		            src_model="payroll_form_12_b"
		            res_model="form12b_report_download"
		            view_type="form" view_mode="form" view_id="form12b_download_report_wizard"
		            key2="client_action_multi" target="new" context="{'selected_active_ids':active_ids}"
		/>

     <record id="payroll_form_12_b_verify_tree" model="ir.ui.view">
            <field name="name">payroll_form_12_b_verify.tree</field>
            <field name="model">payroll_form_12_b_verify</field>
            <field name="arch" type="xml">
                <tree string="" create="false" import="false">
                    <field name="year"/>
                    <field name="month_name"/>
                    <field name="department"/>
                    <field name="job" sum="Total"/>
                    <field name="emp_code"/>
                    <field name="employee_id"  invisible="1"/>
                    <field name="name"/>
                    <field name="final_gross" sum="Total"/>
                </tree>
            </field>
        </record>

        <record id="payroll_form_12_b_verify" model="ir.ui.view">
            <field name="name">payroll_form_12_b_verify.view.search</field>
            <field name="model">payroll_form_12_b_verify</field>
            <field name="arch" type="xml">
                <search string="Search Description">
                    <field name="employee_id"/>
                    <field name="year"/>
                    <field name="month"/>
                    <field name="employee_id"/>

                    <filter string="This Year" domain="[('year', '=',context_today().strftime('%Y'))]" name="current_year_form12b"/>
                    <filter string="Last Year" domain="[('year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_payroll_tds"/> 
                    <separator/>

					<filter string="This Month" name="current_month_form12b" domain="[('current_month','=',True)]"/>
                    <filter string="Last Month" domain="[('date_to','&gt;',(context_today()-relativedelta(months=1)).strftime('%Y-%m-01')),('date_to','&lt;',(context_today()).strftime('%Y-%m-01'))]" name="last_month_salary_other_advance"/>
                    <separator/>

                    <filter string="January" domain="[('month','=','1')]" name="january__payroll_tds"/>
                    <filter string="February" domain="[('month','=','2')]" name="february__payroll_tds"/>
                    <filter string="March" domain="[('month','=','3')]" name="march__payroll_tds"/>
                    <filter string="April" domain="[('month','=','4')]" name="april__payroll_tds"/>
                    <filter string="May" domain="[('month','=','5')]" name="may__payroll_tds"/>
                    <filter string="June" domain="[('month','=','6')]" name="june__payroll_tds"/>
                    <filter string="July" domain="[('month','=','7')]" name="july__payroll_tds"/>
                    <filter string="August" domain="[('month','=','8')]" name="august__payroll_tds"/>
                    <filter string="September" domain="[('month','=','9')]" name="september__payroll_tds"/>
                    <filter string="October" domain="[('month','=','10')]" name="october__payroll_tds"/>
                    <filter string="November" domain="[('month','=','11')]" name="november__payroll_tds"/>
                    <filter string="December" domain="[('month','=','12')]" name="december__payroll_tds"/>
                    <separator/>
                </search>
            </field>
        </record>

        <record id="payroll_form_12_b_verify_action" model="ir.actions.act_window">
            <field name="name">Form 12 B Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">payroll_form_12_b_verify</field>
            <field name="context">{'search_default_current_year_form12b':1,'search_default_current_month_form12b':1,'verify':1}</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="domain">[('final_gross','&gt;', 0)]</field>
            <field name="view_ids" eval="[(5, 0, 0), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('payroll_form_12_b_view_tree')})]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Records to show...
                </p>
            </field>
        </record>


        <menuitem name="Form 12 B"
            id="payroll_form_12_b_menu"
            parent="finance_payroll_menu"
            action="payroll_form_12_b_action"
            sequence="-5"
        />

        <menuitem name="Form 12 B"
            id="payroll_form_12_b_menu_verify"
            parent="verify_payroll_menu"
            action="payroll_form_12_b_verify_action"
            groups="payroll_inherit.payroll_verify_group"
            sequence="1"
        />
      
    </data>
</odoo>
