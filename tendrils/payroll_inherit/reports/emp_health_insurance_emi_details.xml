<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<!-- Tree view -->
		<record id="emp_health_insurance_emi_details_report_view_tree" model="ir.ui.view">
			<field name="name">Employee Health Insurance Emi Details Report Tree</field>
			<field name="model">emp_health_insurance_emi_details_report</field>
			<field name="arch" type="xml">
				<tree string="Health Insurance EMI Details Report" create="false" import="false" delete="false" >
                    <field name="date_range" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
					<field name="year" invisible='1'/>
					<field name="month"/>
                    <field name="emp_code"/>
					<field name="emp_name"/>
                    <field name="installment" sum="Total"/>
                    <field name="emi_status"/>
                    <field name="insurance_status"/>
				</tree>
			</field>
		</record>
      
		<record id="emp_health_insurance_emi_details_report_view_search" model="ir.ui.view">
			<field name="name">Employee Health Insurance Emi Details Report Search</field>
			<field name="model">emp_health_insurance_emi_details_report</field>
			<field name="arch" type="xml">
				<search string="">
                    <field name="emp_name"/>
                    <field name="emp_code"/>
                    <field name="date_range"/>
					<field name="year"/>
					<field name="month"/>
                    <field name="emi_status"/>
                    <field name="insurance_status"/>
                    <filter string="Current Finanacial Year" name="date_range_filter" domain="[('date_range.date_start', '&gt;=', context_today().strftime('%Y') + '/03/31'),
                    ('date_range.date_stop', '&lt;=', (context_today()+relativedelta(years=1)).strftime('%Y')+ '/04/01')]"/>
                    <separator/>
                    <filter string="This Year" domain="[('year', '=',context_today().strftime('%Y'))]"
                            name="current_year_salary"/>
                    <filter string="Last Year"
                            domain="[('year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]"
                            name="last_year_salary"/>
                    <separator/>
                    <filter string="Insurance Status : Draft" domain="[('insurance_status', '=','draft')]"
					        name="draft"/>
					<filter string="Insurance Status : Applied"
					        domain="[('insurance_status', '=','applied')]"
					        name="applied"/>
                    <filter string="Insurance Status : Approved"
					        domain="[('insurance_status', '=','approved')]"
					        name="approved"/>
                    <filter string="Insurance Status : Closed"
					        domain="[('insurance_status', '=','closed')]"
					        name="closed"/>
                    <separator/>
                    <filter string="EMI Status : Paid" domain="[('emi_status', '=','paid')]"
					        name="paid"/>
					<filter string="EMI Status : Unpaid"
					        domain="[('emi_status', '=','unpaid')]"
					        name="unpaid"/>
                    <separator/>
                    <filter string="January" domain="[('month','=','January')]" name="january_salary"/>
                    <filter string="February" domain="[('month','=','February')]" name="february_salary"/>
                    <filter string="March" domain="[('month','=','March')]" name="march_salary"/>
                    <filter string="April" domain="[('month','=','April')]" name="april_salary"/>
                    <filter string="May" domain="[('month','=','May')]" name="may_salary"/>
                    <filter string="June" domain="[('month','=','June')]" name="june_salary"/>
                    <filter string="July" domain="[('month','=','July')]" name="july_salary"/>
                    <filter string="August" domain="[('month','=','August')]" name="august_salary"/>
                    <filter string="September" domain="[('month','=','September')]" name="september_salary"/>
                    <filter string="October" domain="[('month','=','October')]" name="october_salary"/>
                    <filter string="November" domain="[('month','=','November')]" name="november_salary"/>
                    <filter string="December" domain="[('month','=','December')]" name="december_salary"/>
                    <separator/>
				</search>
			</field>
		</record>


		<!-- action window -->
		<record id="emp_health_insurance_emi_details_report_action" model="ir.actions.act_window">
			<field name="name">EMI Report</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">emp_health_insurance_emi_details_report</field>
			<field name="view_mode">tree</field>
			<field name="view_type">form</field>
			<field name="target">current</field>
			<field name="context">{'search_default_date_range_filter':1}</field>
			<field name="search_view_id" ref="emp_health_insurance_emi_details_report_view_search" />
		</record>

		<menuitem name="EMI Report" id="emp_health_insurance_emi_menu" parent="payroll_inherit.health_insurance_employee" action="emp_health_insurance_emi_details_report_action" sequence="105"   groups='kw_employee.group_payroll_manager,hr.group_hr_manager,payroll_inherit.payroll_insurance_group'/>
	</data>
</odoo>
