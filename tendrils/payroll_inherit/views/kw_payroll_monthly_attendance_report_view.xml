<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="view_kw_payroll_monthly_attendance_report_tree" model="ir.ui.view">
			<field name="name">view.kw_payroll_monthly_attendance_report.tree</field>
			<field name="model">kw_payroll_monthly_attendance_report</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="kw_payroll_monthly_attendance_report_tree" create='false' import='false' editable="top" default_order="employee_id" decoration-danger="emp_status == 3" decoration-success="emp_status == 2" decoration-warning="num_absent_days > 15" >
					<field name="attendance_year" invisible='0' readonly='1'/>
					<field name="attendance_month_name" string="Month"/>
					<field name="employee_id" string="Employee" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1'/>
					<field name="company_id" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1'/>
					<field name="employee_designation" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
					<field name="attendance_month" invisible='1'/>
					<field name="department_id" readonly='1' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
					<field name="emp_status" invisible='0' readonly='0'/>
					<field name="emp_status_value" readonly='1'/>
					<field name="num_shift_working_days" invisible='0' readonly='0'/>
					<field name="month_days" readonly='0' force_save='1'  string="Calendar Days"/>
					<field name="num_present_days" invisible='0' readonly='0'/>
					<field name="num_leave_days" readonly='1'/>
					<field name="num_tour_days" readonly='1'/>
					<field name="num_absent_days"/>
					<field name="absent_days" invisible='1'/>
					<field name="num_present_days_count_log" readonly='1' invisible='1'/>
					<field name="num_late_wopc" readonly='1' invisible='1'/>
					<field name="num_late_wpc" readonly='1' invisible='1'/>
					<field name="num_fixed_late_days_pc" readonly='1' invisible='1'/>
					<field name="num_late_days_pc_after_fixed" readonly='1' invisible='1'/>
					<field name="num_total_late_days_pc"/>
					<field name="num_wh_leave_days" invisible='1' readonly='1'/>
					<field name="num_fh_leave_days" invisible='1' readonly='1'/>
					<field name="num_wh_tour_days" invisible='1' readonly='1'/>
					<field name="num_fh_tour_days" invisible='1' readonly='1'/>
					<field name="num_leave_lwop"/>
					<field name="num_mt_leave_days" invisible='1' readonly='1'/>
					<field name="sync_status" invisible='1' readonly='1'/>
					<field name="total_pay_cut" readonly='1' force_save='1'/>
					<field name="actual_working" readonly='0'/>
					<field name="calculation_days" readonly='0' string="Actual Working Month"/>
					<field name="total_days_payable" readonly='1' force_save='1'/>
					<field name="kw_payable_days" readonly='1' force_save='1' invisible='1'/>
					<field name="boolean_readonly" readonly='1' invisible='1'/>
					<field name="ckeck_calendar_days" invisible='1'/>
					<field name="zero_payslip_boolean" readonly='1'/>
				</tree>
			</field>
		</record>


		<!-- model.name search view -->
		<record id="view_kw_payroll_monthly_attendance_report_search" model="ir.ui.view">
			<field name="name">view.kw_payroll_monthly_attendance_report.search</field>
			<field name="model">kw_payroll_monthly_attendance_report</field>
			<field name="arch" type="xml">
				<search string="Search Description">
					<field name="employee_id" string="Employee"/>
					<field name="department_id"/>
					<filter string="New-Employee" domain="[('emp_status','=',2)]" name="new_emp"/>
					<filter string="Ex-Employee" domain="[('emp_status','=',3)]" name="ex_emp"/>
					<separator/>
					<filter string="Zero Payslips" domain="[('zero_payslip_boolean','=',True)]" name="zero_payslip"/>
					<filter string="Possible 0 Payslips " domain="[('num_absent_days','&gt;',15)]" name="zero_payslip_possible"/>
					<separator/>

					<filter string="Paycut-Employee" domain="[('total_pay_cut','&gt;',0)]" name="paycut_employees"/>
					<filter string="LWOP-Employee" domain="[('num_leave_lwop','&gt;',0)]" name="lwop_employees"/>
					<filter string="Absent-Employee" domain="[('num_absent_days','&gt;',0)]" name="absent_employees"/>

					<separator/>
					<filter string="This Year" domain="[('attendance_year', '=',context_today().strftime('%Y'))]" name="current_year_attendance"/>
					<filter string="Last Year" domain="[('attendance_year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_attendance"/>
					<separator/>

					<filter string="This Month" name="current_month_attendance" domain="[('attendance_year', '=',context_today().strftime('%Y')),('attendance_month','=',context_today().strftime('%m'))]"/>
					<filter string="Last Month" domain="[('attendance_month','=',(context_today()-relativedelta(months=1)).strftime('%%m')),('attendance_year', '=',context_today().strftime('%Y'))]" name="last_month_attendance"/>
					<separator/>
					<filter string="January" domain="[('attendance_month','=',1)]" name="january_attendance"/>
					<filter string="February" domain="[('attendance_month','=',2)]" name="february_attendance"/>
					<filter string="March" domain="[('attendance_month','=',3)]" name="march_attendance"/>
					<filter string="April" domain="[('attendance_month','=',4)]" name="april_attendance"/>
					<filter string="May" domain="[('attendance_month','=',5)]" name="may_attendance"/>
					<filter string="June" domain="[('attendance_month','=',6)]" name="june_attendance"/>
					<filter string="July" domain="[('attendance_month','=',7)]" name="july_attendance"/>
					<filter string="August" domain="[('attendance_month','=',8)]" name="august_attendance"/>
					<filter string="September" domain="[('attendance_month','=',9)]" name="september_attendance"/>
					<filter string="October" domain="[('attendance_month','=',10)]" name="october_attendance"/>
					<filter string="November" domain="[('attendance_month','=',11)]" name="november_attendance"/>
					<filter string="December" domain="[('attendance_month','=',12)]" name="december_attendance"/>
					<group expand="0" string="Group By">
						<filter string="Employee" name="employee_id" context="{'group_by':'employee_id'}"/>
						<filter string="Department" name="department_id" context="{'group_by':'department_id'}"/>
						<filter string="Company" name="company_id" context="{'group_by':'company_id'}"/>
					</group>
				</search>
			</field>
		</record>


		<record id="action_kw_payroll_monthly_attendance_act_window" model="ir.actions.act_window">
			<field name="type">ir.actions.act_window</field>
			<field name="name">Payroll Attendance </field>
			<field name="res_model">kw_payroll_monthly_attendance_report</field>
			<field name="view_mode">tree,form</field>
			<field name="view_type">form</field>
			<field name="context">{'search_default_current_year_attendance':1,'search_default_current_month_attendance':1}</field>
			<field name="domain">[]</field>
		</record>


		<record id="action_kw_payroll_monthly_attendance_report_act_window" model="ir.actions.act_window">
			<field name="type">ir.actions.act_window</field>
			<field name="name">Payroll Attendance Report </field>
			<field name="res_model">kw_payroll_monthly_attendance_report</field>
			<field name="view_mode">tree,form</field>
			<field name="view_type">form</field>
			<field name="context">{'search_default_current_year_attendance':1,'search_default_current_month_attendance':1,'edit':False,'create':False,'delete':False}</field>
			<field name="domain">[('boolean_readonly','=',True)]</field>
		</record>

		<!-- <record id="kw_payroll_monthly_attendance_report_server_action" model="ir.actions.server">
            <field name="name">Payroll Attendance Report</field>
            <field name="condition">True</field>
            <field name="model_id" ref="payroll_inherit.model_kw_payroll_monthly_attendance_report"/>
			<field name="context">{'search_default_current_month_attendance':1}</field>
            <field name="state">code</field>
            <field name="code">
form_view_id = env.ref('payroll_inherit.view_kw_payroll_report_form').id
action = {
		'type': 'ir.actions.act_window',
		'name' : 'Payroll Attendance Report',
		'view_mode': 'form',
		'view_mode': 'form',
		'res_model': 'kw_payroll_reports',
		'views': [(form_view_id,'form')],
		'target': 'new',
		'context':{'payroll_attendance_report':True},
}
            </field>
    </record> -->

		<menuitem name="Payroll Attendance" id="payroll_monthly_attendance" parent="process_payroll_menu" action="action_kw_payroll_monthly_attendance_act_window" sequence="-5"/>
		<menuitem name="Payroll Attendance Report" id="payroll_monthly_attendance_report" parent="payroll_inherit.payroll_report_root_menu_act" 
		action="action_kw_payroll_monthly_attendance_report_act_window" sequence="13"/>

	</data>
</odoo>
