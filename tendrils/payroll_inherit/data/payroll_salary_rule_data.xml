<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
       
        <record id="FIXBONUS" model="hr.salary.rule.category">
            <field name="name">Fixed Bonus</field>
            <field name="code">FBONUS</field>
        </record>

        <record id="VARALW" model="hr.salary.rule.category">
            <field name="name">Variable Allowance</field>
            <field name="code">VARALW</field>
        </record>

        <record id="CONTRIBUTION" model="hr.salary.rule.category">
            <field name="name">Contribution</field>
            <field name="code">CONTRIBUTION</field>
        </record>
        <record id="TOTALCONTRIBUTION" model="hr.salary.rule.category">
            <field name="name">Total Contribution</field>
            <field name="code">TOTALCONTRIBUTION</field>
        </record>

        <!-- <record id="hr_salary_rule_epf" model="hr.salary.rule">
            <field name="code">EPS</field>
            <field name="name">Employer EPS</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
             <field name="amount_python_compute">result = categories.BASIC*8.33/100</field>
            <field name="sequence" eval="15"/>
        </record> -->

        

        <record id="hr_salary_rule_cbonus" model="hr.salary.rule">
            <field name="code">CBONUS</field>
            <field name="name">Committment Bonus</field>
            <field name="category_id" ref="payroll_inherit.FIXBONUS" />
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.commitment</field>
            <field name="sequence" eval="5"/>
        </record>

        <record id="hr_salary_rule_var" model="hr.salary.rule">
            <field name="code">VAR</field>
            <field name="name">Variable</field>
            <field name="category_id" ref="payroll_inherit.VARALW" />
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_allowance('VAR',payslip.employee_id,payslip.date_to.year,payslip.date_to.month)</field>
            <field name="sequence" eval="10"/>
        </record>
        <record id="hr_salary_rule_bonus" model="hr.salary.rule">
            <field name="code">BONUS</field>
            <field name="name">Bonus</field>
            <field name="category_id" ref="payroll_inherit.FIXBONUS"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.bonus</field>
            <field name="sequence" eval="5"/>
        </record>
        <!-- <record id="hr_salary_rule_bonus" model="hr.salary.rule">
            <field name="code">BONUS</field>
            <field name="name">Bonus</field>
            <field name="category_id" ref="payroll_inherit.VARALW"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_allowance(payslip.id,'EALW')</field>
            <field name="sequence" eval="11"/>
        </record> -->

        <record id="hr_salary_rule_ealw" model="hr.salary.rule">
            <field name="code">EALW</field>
            <field name="name">Equitable Allowance</field>
            <field name="category_id" ref="payroll_inherit.VARALW"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_allowance('EALW',payslip.employee_id,payslip.date_to.year,payslip.date_to.month)</field>
            <field name="sequence" eval="11"/>
        </record>

        <record id="hr_salary_rule_tinc" model="hr.salary.rule">
            <field name="code">TINC</field>
            <field name="name">Training Incentive</field>
            <field name="category_id" ref="payroll_inherit.VARALW"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_allowance('TINC',payslip.employee_id,payslip.date_to.year,payslip.date_to.month)</field>
            <field name="sequence" eval="12"/>
        </record>

        <record id="hr_salary_rule_erbonus" model="hr.salary.rule">
            <field name="code">ERBONUS</field>
            <field name="name">Employee Referral Bonus</field>
            <field name="category_id" ref="payroll_inherit.VARALW"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_allowance('ERBONUS',payslip.employee_id,payslip.date_to.year,payslip.date_to.month)</field>
            <field name="sequence" eval="9"/>
        </record>

        <!-- <record id="hr_salary_rule_lwop" model="hr.salary.rule">
            <field name="code">LWOP</field>
            <field name="name">LWOP</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">fix</field>
            <field eval="00.0" name="amount_fix"/>
            <field name="sequence" eval="210"/>
        </record> -->

        <!-- <record id="hr_salary_rule_saladv" model="hr.salary.rule">
            <field name="code">SALADV</field>
            <field name="name">Salary Advance</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">fix</field>
            <field eval="00.0" name="amount_fix"/>
            <field name="sequence" eval="220"/>
        </record> -->

        <record id="hr_salary_rule_esi" model="hr.salary.rule">
            <field name="code">ESI</field>
            <field name="name">ESI Employee Deduction</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">code</field>
            <!-- <field name="amount_python_compute">result = (categories.GROSS - categories.VARALW)*0.75/100</field> -->
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_esi(payslip.id,categories.GROSS,categories.VARALW,'ESI',contract.esi_applicable,contract.is_consolidated)</field>
            <!-- <field name="amount_select">fix</field>
            <field eval="00.0" name="amount_fix"/> -->
            <field name="sequence" eval="20"/>
        </record>

        <record id="hr_salary_rule_esi_employer" model="hr.salary.rule">
            <field name="code">ESIE</field>
            <field name="name">ESI Employer Contribution</field>
            <field name="category_id" ref="payroll_inherit.CONTRIBUTION"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_esi(payslip.id,categories.GROSS,categories.VARALW,'ESIE')</field>
            <!-- <field name="amount_select">fix</field>
            <field eval="00.0" name="amount_fix"/> -->
            <field name="sequence" eval="225"/>
        </record>

        <record id="hr_payroll.hr_rule_taxable" model="hr.salary.rule">
            <field name="name">Final Gross</field>
            <field name="sequence" eval="14"/>
            <field name="code">GROSS</field>
            <field name="category_id" ref="hr_payroll.GROSS"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_round_amount(categories.BASIC + categories.ALW + categories.VARALW + categories.FBONUS)</field>
        </record>

        <!-- <record id="hr_salary_rule_csmwf" model="hr.salary.rule">
            <field name="code">CSMWF</field>
            <field name="name">CSM Welfare Fund</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="amount_select">fix</field>
            <field eval="00.0" name="amount_fix"/>
            <field name="sequence" eval="24"/>
        </record> -->

        <record id="hr_salary_rule_spalw" model="hr.salary.rule">
            <field name="code">SALW</field>
            <field name="name">Special Allowance</field>
            <field name="category_id" ref="payroll_inherit.VARALW"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_allowance('SALW',payslip.employee_id,payslip.date_to.year,payslip.date_to.month)</field>
            <field name="sequence" eval="13"/>
        </record>

        <record id="hr_salary_rule_gratuity" model="hr.salary.rule">
            <field name="code">GRATUITY</field>
            <field name="name">Gratuity</field>
            <field name="category_id" ref="payroll_inherit.CONTRIBUTION"/>
            <!-- <field name="amount_select">fix</field>
            <field eval="00.0" name="amount_fix"/> -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_gratuity(payslip.id,categories.BASIC)</field>
            <field name="sequence" eval="226"/>
        </record>

        <record id="hr_payslip_rule_nssf" model="hr.salary.rule">
            <field name="code">NSSF</field>
            <field name="name">N.S.S.F. (National Social Security Fund)</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result =  payslip.env['hr.payslip'].calculate_nssf(categories.GROSS,payslip.employee_id,payslip.date_to.year,payslip.date_to.month,payslip.id,contract.enable_nssf,payslip.date_to)</field>
            <field name="sequence" eval="3"/>
        </record>

        <record id="hr_payslip_rule_paye" model="hr.salary.rule">
            <field name="code">PAYE</field>
            <field name="name">P.A.Y.E (Pay As You Earn)</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_paye(categories.GROSS,payslip.env['hr.payslip'].calculate_nssf(categories.GROSS,payslip.employee_id,payslip.date_to.year,payslip.date_to.month,payslip.id,contract.enable_nssf,payslip.date_to),payslip.env['hr.payslip'].calculate_nhif(categories.GROSS,contract.enable_nhif),payslip.employee_id,payslip.date_to.year,payslip.date_to.month,payslip.id)</field>
            <field name="sequence" eval="6"/>
        </record>

        <record id="hr_payslip_rule_nssf_employer" model="hr.salary.rule">
            <field name="code">NSSFE</field>
            <field name="name">NSSF (Employer's contribution)</field>
            <field name="category_id" ref="payroll_inherit.CONTRIBUTION"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result =  payslip.env['hr.payslip'].calculate_nssf(categories.GROSS,payslip.employee_id,payslip.date_to.year,payslip.date_to.month,payslip.id,contract.enable_nssf,payslip.date_to)</field>
            <field name="sequence" eval="10"/>
        </record>
        <record id="hr_payslip_rule_nhif" model="hr.salary.rule">
            <field name="code">NHIF</field>
            <field name="name">N.H.I.F. (National Hospital Insurance Fund)</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_nhif(categories.GROSS,contract.enable_nhif)</field>
            <field name="sequence" eval="4"/>
        </record>
        <record id="hr_payslip_rule_paye" model="hr.salary.rule">
            <field name="code">PAYE</field>
            <field name="name">P.A.Y.E (Pay As You Earn)</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = payslip.env['hr.payslip'].calculate_paye(categories.GROSS,payslip.env['hr.payslip'].calculate_nssf(categories.GROSS,payslip.employee_id,payslip.date_to.year,payslip.date_to.month,payslip.id,contract.enable_nssf,payslip.date_to),payslip.env['hr.payslip'].calculate_nhif(categories.GROSS,contract.enable_nhif),payslip.employee_id,payslip.date_to.year,payslip.date_to.month,payslip.id)</field>
            <field name="sequence" eval="6"/>
        </record>
        <record id="hr_payslip_rule_total_contribution" model="hr.salary.rule">
            <field name="code">CONTRIBUTION</field>
            <field name="name">Total Contribution (Employer) (C)</field>
            <field name="category_id" ref="payroll_inherit.TOTALCONTRIBUTION"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = categories.CONTRIBUTION</field>
            <field name="sequence" eval="15"/>
        </record>

        <record id="hr_payroll.hr_rule_net" model="hr.salary.rule">
            <field name="name">Net Salary (A)-(B)</field>
            <field name="sequence" eval="8"/>
            <field name="code">NET</field>
            <field name="category_id" ref="hr_payroll.NET"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result =  payslip.env['hr.payslip'].calculate_net(categories.GROSS,categories.DED)</field>
            <!-- <field name="amount_python_compute">result = categories.GROSS - categories.TOTALDEDUCTION</field> -->
            <field name="register_id" ref="hr_payroll.contrib_register_employees"/>
        </record>
        
        <record id="hr_salary_rule_ctc_kenya" model="hr.salary.rule">
            <field name="name">Total CTC (Cost-to-Company) (A) + (C) </field>
            <field name="sequence" eval="550"/>
            <field name="code">CTC</field>
            <field name="category_id" ref="payroll_inherit.CTC"/>
            <field name="condition_select">none</field>
            <field name="amount_select">code</field>
            <field name="parent_id" ref="hr_payroll.structure_base"/>
            <field name="amount_python_compute">result = categories.GROSS + categories.TOTALCONTRIBUTION</field>
        </record>
    </data>
</odoo>