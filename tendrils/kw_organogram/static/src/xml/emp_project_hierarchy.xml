<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve" id="project_hierarchy_template">
    <t t-name="hr_project_hierarchy_select">
        <div class="container card">
			<div class="d-flex justify-content-center py-4">
				<p class="h4 font-weight-bold">Project Hierarchy</p>
			</div>
            <div class="row">
                <div class="col-sm-4">
                    <table class="table table-striped table-sm table-hover" id="project_hierachy_data1">
                        <thead style="display:block;">
                            <tr>
                                <th scope="col" class="col-sm-1 text-center align-middle bg-primary" rowspan="2">#</th>
                                <th scope="col" class="col-sm-5 bg-primary">Manager</th>
                                <th scope="col" class="col-sm-6 bg-primary">Project (<span id="organogram_project_count"></span>)</th>
                            </tr>
                            <tr>
                                <th scope="col" class="col-sm-5 bg-primary">
                                    <input class="form-control mr-sm-2 border-0" type="search" placeholder="Search" aria-label="Search"
                                    id="project_hierachy_manager_search"/>
                                </th>
                                <th scope="col" class="col-sm-6 bg-primary">
                                    <input class="form-control mr-sm-2 border-0" type="search" placeholder="Search" aria-label="Search"
                                           id="project_hierachy_project_search"/>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="project_hierachy_data" style="display:block;max-height:400px;overflow-y:auto;">
                            <t t-foreach="project_data" t-as="project">
                                <tr class="organogram_project_search" t-att-val="project.id" style="display: table;width: 100%;">
                                    <th class="col-sm-1 text-center"><t t-esc="project_index+1"/></th>
                                    <td class="col-sm-5 manager_name"><t t-esc="project.manager"/></td>
                                    <td class="col-sm-6 project_name"><t t-esc="project.name"/></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
                <div class="col-sm-8">
                    <span id="project_hierachy_organogram"></span>
                </div>
            </div>

		</div>
    </t>
	<t t-name="hr_project_hierarchy_report">
		<div id="project_hierachy_block">
            <div id="chart-container"></div>
            <script type="text/javascript">
                $(function() {
                    dict = resource_data
                    for (let  k in dict){
                        margin = 0
                        for (let  i in dict[k]){
                            datascource = dict[k][i];
                            $('#chart-container').orgchart({
                                'data' : datascource,
                                'depth': 0,
                                'nodeContent': 'title',
                                'pan': true,
                                'zoom': true,
                                'parentNodeSymbol': '',
                                'nodeTemplate': nodeTemplate,
                            });
                        }
                    }
                });
            </script>
        </div>
	</t>
</templates>

