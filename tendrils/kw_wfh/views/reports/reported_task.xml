<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>

        <record model="ir.ui.view" id="kw_wfh_deliverables_report">
            <field name="name">kw_wfh_deliverables.tree</field>
            <field name="model">kw_wfh_deliverables</field>
            <field name="arch" type="xml">
                <tree import='false' default_order='create_date desc' delete='false' create="false">
                    <field name="employee_id"/>
                    <field name="task_title"/>
                    <field name="task_desc" invisible="1"/>
                    <field name="status"/>
                    <field name="submission_date"/>
                    <field name="start_time"/>
                    <field name="end_time"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- search view -->
        <record id="ra_search_view_kw_wfh_deliverables" model="ir.ui.view">
            <field name="name">kw wfh Deliverables Report Search View</field>
            <field name="model">kw_wfh_deliverables</field>
            <field name="arch" type="xml">
                <search string="Search WFH Deliverables Record">
                    <field name="state"/>
                    <field name="employee_id"/>
                    <field name="status"/>
                    <filter string="Employee" name="employee" />
                    <filter string="Task Status" name="filter_task_state" />
                    <filter string="Inprogress" name="filter_inprogress_state" domain="[('state','=','draft')]"/>
                    <filter string="Submitted" name="filter_completed_state" domain="[('state','=','submitted')]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter name="group_state" string="State" context="{'group_by':'state'}" />
                        <separator/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="kw_wfh_deliverables_report_action">
            <field name="name">Team Task</field>
            <field name="res_model">kw_wfh_deliverables</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">['|',('employee_id.department_id.manager_id.user_id','=',uid),('employee_id.parent_id.user_id','=',uid),('state','in',['submitted'])]</field>
            <field name='search_view_id' ref='ra_search_view_kw_wfh_deliverables'/>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_wfh_deliverables_report')})
                ]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
						No records to show...
                </p>
            </field>
        </record>
        
        <record model="ir.ui.view" id="kw_wfh_deliverables_all_report">
            <field name="name">kw_wfh_all_deliverables.tree</field>
            <field name="model">kw_wfh_deliverables</field>
            <field name="arch" type="xml">
                <tree import='false' default_order='create_date desc' delete='false' create="false">
                    <field name="employee_id"/>
                    <field name="task_title"/>
                    <field name="task_desc" invisible="1"/>
                    <field name="status"/>
                    <field name="submission_date"/>
                    <field name="start_time"/>
                    <field name="end_time"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- search view -->
        <record id="manager_search_view_kw_wfh_deliverables" model="ir.ui.view">
            <field name="name">kw wfh Manager Deliverables Report Search View</field>
            <field name="model">kw_wfh_deliverables</field>
            <field name="arch" type="xml">
                <search string="Search WFH Deliverables Record">
                    <field name="state"/>
                    <field name="employee_id"/>
                    <field name="status"/>
                    <filter string="Employee" name="employee" />
                    <filter string="Task Status" name="filter_task_state" />
                    <filter string="Inprogress" name="filter_inprogress_state" domain="[('state','=','draft')]"/>
                    <filter string="Submitted" name="filter_completed_state" domain="[('state','=','submitted')]"/>
                     <separator/>
                    <group expand="0" string="Group By">
                        <filter name="group_state" string="State" context="{'group_by':'state'}" />
                        <separator/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="kw_wfh_all_deliverables_report_action">
            <field name="name">All Task</field>
            <field name="res_model">kw_wfh_deliverables</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('state','in',['submitted'])]</field>
            <field name='search_view_id' ref='manager_search_view_kw_wfh_deliverables'/>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_wfh_deliverables_all_report')})
                ]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
						No records to show...
                </p>
            </field>
        </record>
    </data>
</odoo>