<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="task_productivity_report_tree" model="ir.ui.view">
            <field name="name">task_productivity_report.tree</field>
            <field name="model">task_productivity_report</field>
            <field name="arch" type="xml">
                <tree create='0' edit='0' delete='0' import='0'>
                    
                    <field name="assigned_to"/>
                    <!-- <field name="task_raised_by" string = 'Task Assigned By'/> -->
                    <field name="no_of_ticket_assigned"/>
                    <field name="no_of_ticket_closed" />
                    <button  name="btn_gracefully_closed" type="object"  title="Mo Button" class=" btn-success fa fa-paper-plane" context="{'button':'Gracefully Closed'}"/>
                    <field name="total_tiket_closed"/>
                    <field name="not_gracefull_ticket_closed"/>
                    <button  name="btn_gracefully_closed" type="object" class=" btn-success fa fa-paper-plane" context="{'button':'Not Gracefully Closed'}"/>
        
                </tree>
            </field>
        </record>

        <record id="task_productivity_report_search_view" model="ir.ui.view">
            <field name="name">task_productivity_report_search_view</field>
            <field name="model">task_productivity_report</field>
            <field name="arch" type="xml">

                <search>
                    <field name="assigned_to"/>
                    <field name="no_of_ticket_assigned"/>
                    <field name="no_of_ticket_closed"/>
                    <field name="total_tiket_closed"/>
                    <field name="assign_task_date" invisible="1"/>
                    <!-- <filter string="Date" name="filter_assign_date" date="assign_task_date"/> -->

                    <filter string="This Year" domain="[('task_assign_year', '=',context_today().strftime('%Y'))]" name="current_year_task"/>
                    <filter string="Last Year" domain="[('task_assign_year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_task"/>  

                    <separator/>

                    <filter string="This Month" domain="[('month_number','&gt;',(context_today()-relativedelta(months=1)).strftime('%Y-%m-01')),('month_number','&lt;',(context_today()+relativedelta(months=1)).strftime('%Y-%m-01'))]" name="current_month_task"/>
              
                    <filter string="Last Month" domain="[('month_number','&gt;',(context_today()-relativedelta(months=2)).strftime('%Y-%m-01')),('month_number','&lt;',(context_today()).strftime('%Y-%m-01'))]" name="last_month_task"/>
                    <separator/>
                    
                    <filter string="January" domain="[('month_index','=',1)]" name="january_task"/>
                    <filter string="February" domain="[('month_index','=',2)]" name="february_task"/>
                    <filter string="March" domain="[('month_index','=',3)]" name="march_task"/>
                    <filter string="April" domain="[('month_index','=',4)]" name="april_task"/>
                    <filter string="May" domain="[('month_index','=',5)]" name="may_task"/>
                    <filter string="June" domain="[('month_index','=',6)]" name="june_task"/>
                    <filter string="July" domain="[('month_index','=',7)]" name="july_task"/>
                    <filter string="August" domain="[('month_index','=',8)]" name="august_task"/>
                    <filter string="September" domain="[('month_index','=',9)]" name="september_task"/>
                    <filter string="October" domain="[('month_index','=',10)]" name="october_task"/>
                    <filter string="November" domain="[('month_index','=',11)]" name="november_task"/>
                    <filter string="December" domain="[('month_index','=',12)]" name="december_task"/>
                    <separator/>
                </search>
            
            
            </field>
        </record>

        <!-- <record id="task_productivity_report_action" model="ir.actions.act_window">
            <field name="name">Productivity Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">task_productivity_report</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="context">{'search_default_current_month_task':1,}</field>

        </record> -->

        <record id="task_productivity_report_action" model="ir.actions.server">
            <field name="name">Productivity Report</field>
            <field name="model_id" ref="model_task_productivity_report"/>
            <field name="state">code</field>
            <field name="context">{}</field>
            <field name="code">action = model.report_task_productivity()</field>
        </record>
       
        <menuitem id="Productivity Report_menu"
            name="Productivity Report"
            parent="task_management_reports_root_menu"
            action="task_productivity_report_action"
            sequence="2"/>

    </data>
</odoo>