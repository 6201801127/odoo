<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="filter_local_visit_claim_report_wizard_form">
            <field name="name">Get Filtered Local Visit Claim Report FY Wise</field>
            <field name="model">filter_local_visit_claim_report</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <b>
                            <center>
                                <span class="text-primary"><b>Select financial year and quater to get local visit claim report .</b></span>
                            </center>
                        </b>
                        <group>
                            <field name="financial_year_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                            <field name="quater"/>
                        </group>
                        <footer>
                            <center>
                                <button name="get_filtered_lv_claim_report" type="object" string="Get Report"
                                    class="btn-primary" />
                            </center>
                        </footer>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="filter_local_visit_claim_report_wizard_action" model="ir.actions.act_window">
            <field name="name">Get Filtered Local Visit Claim Report FY Wise</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">filter_local_visit_claim_report</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                </p>
            </field>
        </record>





        <record id="kw_lv_claim_physical_view_tree" model="ir.ui.view">
            <field name="name">Local Visit Claim Report Tree</field>
            <field name="model">kw_lv_claim_physical</field>
            <field name="arch" type="xml">
                <tree create='0' edit='0' delete='1' import='false'>
                    <field name="visit_id" invisible='1'/>
                    <field name="emp_name"/>
                    <field name="emp_no" />
                    <field name="department"/>
                    <field name="division"/>
                    <field name="section"/>
                    <field name="sbu_id"/>
                    <field name="wo_code"/>
                    <field name="wo_name"/>
                    <field name="visit_category"/>
                    <field name="vehicle_type"/>
                    <field name="visit_location"/>
                    <field name="visit_purpose"/>
                    <field name="km_travel" sum='Total' />
                    <field name="amt_claim" string="Amount Claimed" sum='Total' />
                    <field name="ra_approval"/>
                    <field name="date_of_travel"/>
                    <field name="date_of_settle"/>
                    <field name="date_of_payment"/>
                    <field name="branch_location" invisible='1'/>
                    <field name="branch_country" invisible='1'/>
                </tree>
            </field>
        </record>
        <record id="kw_lv_claim_physical_view_search" model="ir.ui.view">
            <field name="name">Local Visit Claim Report Search</field>
            <field name="model">kw_lv_claim_physical</field>
            <field name="arch" type="xml">

                <search>
                    <field name="emp_name"/>
                    <field name="wo_name"/>
                    <field name="wo_code"/>
                    <field name="department"/>
                    <field name="division"/>
                    <field name="section"/>
                    <!-- <filter string="Current Financial Year" name="current_financial_year"
                    domain="[('date_of_travel', '&gt;=', (context_today() - relativedelta(months=3)).strftime('%%Y-04-01')), ('date_of_travel', '&lt;=', (context_today() + relativedelta(months=9)).strftime('%%Y-03-31'))]" /> -->
                    <separator/>
                    <!-- <filter string="Current Financial Year" name="current_financial_year" domain="[('current_financial_year','=','current')]"/> -->
                    <!-- <filter string="Current Month" name="current_month_claims" domain="[('date_of_travel', 'like',context_today().strftime('%Y-%m'))]"/>-->
                    <!-- <filter string="Quarter 1" domain="[('date_of_travel', '&gt;=', context_today().strftime('%Y-04-01')), ('date_of_travel', '&lt;', context_today().strftime('%Y-07-01'))]" name="quarter1_claim_report"/>
                    <filter string="Quarter 2" domain="[('date_of_travel', '&gt;=', context_today().strftime('%Y-07-01')), ('date_of_travel', '&lt;', (context_today() + relativedelta(months=3)).strftime('%Y-10-01'))]" name="quarter2_claim_report"/>
                    <filter string="Quarter 3" domain="[('date_of_travel', '>=', context_today().strftime('%Y-10-01')), ('date_of_travel', '&lt;', (context_today() + relativedelta(months=6)).strftime('%Y-01-01'))]" name="quarter3_claim_report"/>
                    <filter string="Quarter 4" domain="[('date_of_travel', '&gt;=', (context_today() + relativedelta(months=6)).strftime('%Y-01-01')), ('date_of_travel', '&lt;',(context_today() + relativedelta(years=1)).strftime('%Y-04-01'))]" name="quarter4_claim_report"/>  -->

                    <separator/>
                    <filter string="Auto Approved" domain="[('ra_approval', '=','Auto Approved')]" name="autoapprove_claim_report"/>
                    <!-- <filter string="Claimed" name="lv_claimed_report" domain="[('check_claim_lv', '=', True)]"/> -->
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Branch" name="branch_name" context="{'group_by':'branch_location'}"/>
                        <filter string="Country" name="country_name" context="{'group_by':'branch_country'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="kw_lv_claim_report_act_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Local Visit Claim Report</field>
            <field name="res_model">kw_lv_claim_report</field>
            <field name="view_mode">tree</field>
            <field name="search_view_id" ref="kw_lv_claim_physical_view_search"/>
            <!-- <field name="context">{"search_default_current_financial_year":1,"search_default_current_month_claims":1}</field> -->
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    No report(s) found...
                </p>
            </field>
        </record>
    </data>
</odoo>
