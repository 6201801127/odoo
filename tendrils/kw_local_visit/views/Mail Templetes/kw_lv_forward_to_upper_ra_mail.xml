<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <record id="kw_lv_forward_to_upper_ra_template" model="mail.template">
            <field name="name">Foward Approval Mail Template | Local Visit</field>
            <field name="email_from">${object.emp_name.user_id.company_id and object.emp_name.user_id.company_id.email or ''}</field>
            <field name="subject">Local Visit | ${object.emp_name.name} (${object.emp_name.emp_code}) | Auto-forwarded</field>
            <field name="email_to">${object.emp_name.parent_id.parent_id.work_email}</field>
            <!-- <field name="email_cc">${object.emp_name.work_email},${ctx['email_cc']}</field> -->
            <field name="model_id" ref="kw_local_visit.model_kw_lv_apply"/>
            <field name="auto_delete" eval="False"/>
            <field name="body_html">
                <![CDATA[
                    <table border="0">
                        <tr>
                            <td>
                                <div style="margin-left: 1.2rem;margin-bottom:1em;">
                                    <h5 style="font-weight: 400;margin-bottom: 0;font-size: 16px;color:#676767;">
                                        <span style="color:rgb(22, 123, 158);font-size: 16px;margin-right: 2px;font-weight: 600;">Dear</span>
                                        ${object.emp_name.parent_id.parent_id.name},
                                    </h5>
                                    <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 16px;">
                                        Local Visit Application of ${object.emp_name.name} has been automatically forwarded to the upper authority as approval time exceeded ${ctx['auto_days']} days.
                                    </p>
                                </div>
                               
                                <table border="0" style="border-collapse: collapse;font-size: 16px;">
                                    <tr>
                                        <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                            <u>Visit Details :</u>
                                        </td>
                                        <td style="color:#167b9e;height: 34px;">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                            Category
                                        </td>
                                        <td style="color:#167b9e;height: 34px;">
                                            ${object.visit_category.category_name}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                            Date
                                        </td>
                                        <td style="color:#167b9e;height: 34px;">
                                            ${format_tz(object.visit_date, format='%d-%b-%Y')}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                            Office Out Time
                                        </td>
                                        <td style="color:#167b9e;height: 34px;">
                                            ${dict(object.fields_get(allfields=['out_time'])['out_time']['selection'])[object.out_time]}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                            Office In Time
                                        </td>
                                        <td style="color:#167b9e;height: 34px;">
                                            ${dict(object.fields_get(allfields=['actual_in_time'])['actual_in_time']['selection'])[object.actual_in_time]}
                                        </td>
                                    </tr>
                                    % if object.settlement_required == True:
                                        <tr>
                                            <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                                Vehicle Type
                                            </td>
                                            <td style="color:#167b9e;height: 34px;">
                                                ${object.vehicle_type.vehicle_category_name}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                                Total KM
                                            </td>
                                            <td style="color:#167b9e;height: 34px;">
                                                ${object.total_km}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="color:#676767;padding-left: 20px;height: 34px;" width="200px">
                                                Total Price
                                            </td>
                                            <td style="color:#167b9e;height: 34px;">
                                                ${object.price}
                                            </td>
                                        </tr>
                                    % endif
                                </table>
                                
                                <div style="margin-left: 1.2rem;margin-bottom:1em;">
                                    <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 16px;">
                                        Please login to Tendrils to see details.<br/>
                                        ------------------------------------------------------------------
                                        <br/>
                                        This is a system generated mail. Please do not reply to this email. 
                                    </p>
                                </div>
                            </td>
                        </tr>
                    </table>
                ]]>
            </field>
        </record>
    </data>
</odoo>