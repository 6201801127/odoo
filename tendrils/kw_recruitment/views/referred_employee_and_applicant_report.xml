<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--        Employee Referral Report-->
        <record id="referred_employee_tree_view" model="ir.ui.view">
            <field name="name">Referral Employee status</field>
            <field name="model">kw_referred_employee_and_applicant_report</field>
            <field name="arch" type="xml">
                <tree string="Applicants" create='false' edit='false' import='false'>
                    <field name="applied_date" string="Applied Date" widget="date"/>
                    <field name="name" string="Name"/>
                    <field name="contact" string="Contact"/>
                    <field name="job_position" string="Job Position"/>
                    <field name="source" string="Source"/>
                    <field name="referred_by" string='Referred By'/>
                    <field name="status" string="Status"/>
                    <field name="create_uid" string="user" invisible='1'/>
                    <field name="referred_amount" string="Referred Amount"
                           groups="hr_recruitment.group_hr_recruitment_manager"
                           invisible="context.get('manager', False)==False"/>
                </tree>
            </field>
        </record>

        <record id="referred_employee_applicants_action_window" model="ir.actions.act_window">
            <field name="name">Employee Referral Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_id" ref="referred_employee_tree_view"/>
            <field name="context">{'manager':True}</field>
            <field name="res_model">kw_referred_employee_and_applicant_report</field>
            <field name="view_mode">tree</field>
        </record>

        <menuitem parent="kw_recruitment.menu_internal_jobs_posting"
                  id="referred_report"
                  name="Employee Referral Report"
                  action="referred_employee_applicants_action_window"
                  groups="hr_recruitment.group_hr_recruitment_manager"
                  sequence="5"/>

        <!--        Referred Applicant's Status-->
        <record id="referred_applicant_tree_view" model="ir.ui.view">
            <field name="name">Referral Applicant status</field>
            <field name="model">kw_referred_employee_and_applicant_report</field>
            <field name="arch" type="xml">
                <tree string="Applicants" create='false' edit='false' import='false'>
                    <field name="applied_date" string="Applied Date" widget="date"/>
                    <field name="name" string="Name"/>
                    <field name="contact" string="Contact"/>
                    <field name="job_position" string="Job Position"/>
                    <field name="source" string="Source"/>
                    <field name="referred_by" string='Referred By'/>
                    <field name="status" string="Status"/>
                    <!-- <field name="referred_amount" string="Amount"/> -->
                </tree>
            </field>
        </record>

        <record id="referred_applicants_action_window" model="ir.actions.act_window">
            <field name="name">Referred Applicant's Status</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_id" ref="referred_applicant_tree_view"/>
            <field name="domain">[('create_uid','=',uid), ('referred_user','=',uid)]</field>
            <field name="res_model">kw_referred_employee_and_applicant_report</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="target">current</field>
        </record>

        <menuitem parent="kw_recruitment.menu_internal_jobs_posting"
                  id="referred_report_applicant"
                  name="Referred Applicant's Status"
                  action="referred_applicants_action_window"
                  groups="kw_recruitment.group_hr_recruitment_internal_job_posting"
                  sequence="4"/>
    </data>
</odoo>