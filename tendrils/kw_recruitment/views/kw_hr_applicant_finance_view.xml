<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="applicant_budget_validation_tree_view" model="ir.ui.view">
            <field name="model">hr.applicant</field>
            <field name="name">Budget validation For Hr applicant</field> 
            <field name="priority">100</field>
            <field name="arch" type="xml">
                <tree name="Budget validation"  create="false">
                    <field name="create_date" string="Applied Date" widget="date"/>
                    <field name="partner_name" string="Name"/>
                    <field name="partner_mobile" string="Contact"/>
                    <field name="email_from" string="Mail Id"/>
                    <field name="qualification_ids" string="Qualification" widget="many2many_tags"/>
                    <field name="exp_year" string="Exp(Yrs)"/>
                    <field name="current_location" string="Current Location"/>
                    <field name="job_position" string="Job Position"/>
                    <field name="job_id" string="Post Applied For" invisible="1"/>
                    <field name="source_id" string="Source"/>
                </tree>
            </field>
        </record>
        <record id="applicant_budget_validation_form_view" model="ir.ui.view">
            <field name="name">Budget validation For Hr applicant Form</field>
            <field name="model">hr.applicant</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <form create="false" delete="false">
                    <header>
                        <button string="Submit to HR" name="btn_submit_to_hr" type="object" class="btn-primary"
                                attrs="{'invisible': ['|', ('mrf_id', '=', False), ('is_finance_approved', '=', False)]}"
                                groups="kw_recruitment.group_hr_recruitment_accounts"/>
                        <field name="stage_id" widget="statusbar"
                               options="{'fold_field': 'fold'}"
                               attrs="{'invisible': [('active', '=', False),('emp_id', '=', False)]}"/>
                    </header>
                    <group>
                        <group>
                            <field name="active" invisible="1"/>
                            <field name="emp_id" invisible="1"/>
                            <field name="is_finance_approved" invisible="1"/>

                            <field name="job_position" string="Job Position"
                                   options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>
                            <field name="partner_name" readonly="1" />
                            <field name="email_from" string="Mail Id" readonly="1" />
                            <field name="partner_mobile" class="o_force_ltr" string="Mobile 1" readonly="1" />
                            <field name="partner_phone" class="o_force_ltr" string="Mobile 2" readonly="1" />
                            <field name="current_location" string="Current Location" readonly="1" />
                            <field name="gender" readonly="1" />
                            <field name="job_location_id" readonly="1" 
                                 options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                            <field name="qualification_ids" string="Qualification"
                                options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1" 
                                widget="many2many_tags"/>
                            <field name="certification" readonly="1" />
                            <field name="skill_ids" widget="many2many_tags" readonly="1" />
                            <field name="budget_type" invisible="1"/>
                            <label for="exp_year" string="Experience" class="oe_inline"/>
                            <div>
                                <group>
                                    <field name="exp_year" string="Year" attrs="{'invisible':[('exp_year','&gt;',1)]}"
                                        readonly="1"/>
                                    <field name="exp_year" string="Years"
                                        attrs="{'invisible':['|',('exp_year','=',False),('exp_year','&lt;',2)]}"
                                        readonly="1"/>
                                    <field name="exp_month" string="Month" attrs="{'invisible':[('exp_month','&gt;',1)]}"
                                        readonly="1" />
                                    <field name="exp_month" string="Months"
                                        attrs="{'invisible':['|',('exp_month','=',False),('exp_month','&lt;',2)]}"
                                        readonly="1"/>
                                </group>
                            </div>
                            <field name="job_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                            <field name="department_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                            <field name="division" options="{'no_open': True,'no_create':True,'no_edit':True}"
                              attrs="{'invisible': [('department_id', '=', False)]}" readonly="1" />
                        </group>
                        <group string="Budget Setting">
                            <field name="budget_amount" required="1"
                                   attrs="{'invisible':[('mrf_id', '=', False)]}"/>
                            <!--'required': [('requisition_type','=','project')], -->
                            <field name="mrf_id" string="MRF"
                                   options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>

                            <field name="budget_type" string="Budget" invisible="1"/>
                            <field name="requisition_type"/>

                            <field name="project_type"
                                   attrs="{'invisible':['|', ('requisition_type','=','treasury'), ('mrf_id', '=', False)]}"/>
                            <field name="mrf_project" options="{'no_open': True,'no_create':True,'no_edit':True}"
                                   attrs="{'invisible':['|', ('requisition_type','=','treasury'), ('mrf_id', '=', False)]}"/>
                            <field name="mrf_duration"
                                  attrs="{'invisible':['|', ('requisition_type','=','treasury'), ('mrf_id', '=', False)]}"/>
                            <field name="mrf_role_id" options="{'no_open': True,'no_create':True,'no_edit':True}"
                                attrs="{'invisible':['|', ('requisition_type','=','treasury'), ('mrf_id', '=', False)]}"/>
                            <field name="mrf_categ_id" options="{'no_open': True,'no_create':True,'no_edit':True}"
                                attrs="{'invisible':['|', ('requisition_type','=','treasury'), ('mrf_id', '=', False)]}"/>
                            <field name="mrf_type_employment" invisible="1"
                                   options="{'no_open': True,'no_create':True,'no_edit':True}"
                                attrs="{'invisible':['|', ('requisition_type','=','treasury'), ('mrf_id', '=', False)]}"/>
                            <label for="budget_from_date" string="Duration" class="oe_inline"
                               attrs="{'invisible':['|',('budget_type','=',False),('budget_type','=','treasury')]}"/>
                            <div>
                                <group>
                                    <field name="budget_from_date"
                                        attrs="{'invisible':['|',('budget_type','=',False),('budget_type','=','treasury')]}"/>
                                    <field name="budget_to_date"
                                        attrs="{'invisible':['|',('budget_type','=',False),('budget_type','=','treasury')]}"/>
                                </group>
                            </div>
                        </group>
                        <group string="Others">

                            <field name="source_id" string="Source" readonly='1' options="{'no_open': True,'no_create':True,'no_edit':True}"/>

                            <field name="offer_date"  readonly="1"/>
                            <field name="joining_date" readonly="1"/>
                            <field name="profile_submit_date"  readonly="1"/>
                            <field name="bond_required" widget="radio" options="{'horizontal': true}" readonly="1"/>
                            <field name="bond_years"
                                attrs="{'required': [('bond_required','=', '1')],'invisible': [('bond_required','=', '0')]}" readonly="1"/>
                            <field name="bond_months"
                                attrs="{'required': [('bond_required','=', '1')],'invisible': [('bond_required','=', '0')]}" readonly="1"/>
                            <field name="monthly_ctc_amount" class="oe_inline" readonly='1'/>
                            <field name="current_ctc" class="oe_inline" readonly="1"/>
                            <field name="salary_expected" string="Expected CTC(Annum)" class="oe_inline" readonly="1"/>
                            <field name="salary_expected_extra" class="oe_inline" placeholder="Extra advantages..."
                                invisible="1"/>
                            <field name="salary_proposed" class="oe_inline" invisible="1"/>
                            <field name="salary_proposed_extra" class="oe_inline" placeholder="Extra advantages..."
                                invisible="1"/>
                            <field name="notice_period" string="Notice Period(Days)" class="oe_inline" readonly="1"/>
                        </group>
                    </group>
                    <separator string="Application Summary"/>
                    <field name="description" placeholder="Feedback of interviews..."/>

                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="applicant_budget_validation_take_action">
            <field name="name">Budget Validation</field>
            <field name="res_model">hr.applicant</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <!-- <field name="view_id" eval="False"/>
            <field name="context">{}</field> -->
            <field name="domain">[('is_finance_approved','=',True)]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('applicant_budget_validation_tree_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('applicant_budget_validation_form_view')})]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_empty_folder">
                    No applications yet
                </p>
            </field>
        </record>

        <menuitem name="Budget Validation"
                  parent="hr_recruitment.menu_hr_recruitment_root"
                  id="menu_applicant_accounts_budget_validation"
                  sequence="2"
                  action="applicant_budget_validation_take_action"
                  groups="kw_recruitment.group_hr_recruitment_accounts"/>
        <menuitem name="Take Action"
                  parent="kw_recruitment.menu_applicant_accounts_budget_validation"
                  id="menu_applicant_accounts_take_action"
                  sequence="2"
                  action="applicant_budget_validation_take_action"
                  groups="kw_recruitment.group_hr_recruitment_accounts"/>
    </data>
</odoo>



                        
