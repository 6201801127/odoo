<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Tree view -->
        <record id="mif_mrf_view_tree_view" model="ir.ui.view">
            <field name="name">MIF Report Tree</field>
            <field name="model">manpower_indent_form_report</field>
            <field name="arch" type="xml">
                <tree create="false" import="false">
                    <field name="mif_code" string="MIF Number"/>
                    <field name="fiscal_year"/>
                    <field name="mrf_code"/>
                    <field name="dept_id"/>
                    <field name="desig_id"/>
                    <field name="resource"/>
                    <!-- <field name="skill"/> -->
                    <field name="technology"/>
                    <field name="project_type"/>
                    <field name="project"/>
                    <field name="sbu_id"/>
                    <field name="raised_by_id"/>
                    <field name="approval_authority_date"/>
                    <field name="effective_date"/>
                    <field name="branch_id"/>
                    <field name="doj"/>
                    <field name="status"/>
                    <field name="onboard_location"/>

                </tree>
            </field>
        </record>
        <record id="mif_view_search" model="ir.ui.view">
            <field name="name">mif.view.search</field>
            <field name="model">manpower_indent_form_report</field>
            <field name="arch" type="xml">
                <search>
                    <field name="mif_code" string="MIF Number"/>
                    <field name="fiscal_year"/>
                    <field name="mrf_code"/>
                    <field name="dept_id"/>
                    <field name="desig_id"/>
                    <field name="resource"/>
                    <field name="technology"/>
                    <field name="project_type"/>
                    <field name="project"/>
                    <field name="sbu_id"/>
                    <field name="raised_by_id"/>
                    <field name="approval_authority_date"/>
                    <field name="effective_date"/>
                    <field name="branch_id"/>
                    <field name="doj"/>
                    <field name="status"/>
                    <field name="onboard_location"/>

			<filter string="This Year" domain="[('fiscal_year.date_start', '&lt;=',context_today().strftime('%Y-%m-%d')),('fiscal_year.date_stop', '&gt;=',context_today().strftime('%Y-%m-%d'))]" name="current_year_mif"/>
			<!-- <filter string="Last Year" domain="[('fiscal_year.date_start.year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_mif"/> -->
			<filter string="Last Year" domain="[('fiscal_year.date_start', '&lt;=', (context_today() - relativedelta(years=1)).strftime('%Y-%m-%d')), ('fiscal_year.date_stop', '&gt;=', (context_today() - relativedelta(years=1)).strftime('%Y-%m-%d'))]" name="last_year_mif"/>

                </search>
            </field>
        </record>
        <record id="mif_mrf_view_action" model="ir.actions.act_window">
            <field name="name">MIF Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">manpower_indent_form_report</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="search_view_id" ref="mif_view_search"/>
            <field name="context">{'search_default_current_year_mif': 1}</field>

        </record>
    </data>
</odoo>
    
