<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="kw_attendance_absent_report_view_form" model="ir.ui.view">
            <field name="name">Attendance Absent Report Form View</field>
            <field name="model">kw_attendance_absent_report</field>
            <field name="arch" type="xml">
                <form string="Absent Report" create="false" import="false" delete="false" duplicate="false">
                    <sheet>
                        <group>
                            <group>
                                <field name="emp_name" />
                                <field name="designation" />
                                <field name="department" />
                                <field name="branch" />
                                <field name="employement_type" string="Employement Type" />
                                <field name="ra_name" />
                                <field name="absent_from" />
                                <field name="total_absent_days" />
                            </group>
                            <group>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="kw_attendance_absent_report_view_tree" model="ir.ui.view">
            <field name="name">Attendance Absent Report Tree View</field>
            <field name="model">kw_attendance_absent_report</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Absent Report" default_order="total_absent_days desc" create="false" import="false" delete="false">
                    <field name="department" />
                    <field name="branch" string="Branch" />
                    <field name="emp_name" />
                    <field name="designation" />
                    <!-- <field name="employement_type_name" /> -->
                    <field name="ra_name" />
                    <field name="total_absent_days" />
                    <field name="absent_from" string="Absent After"/>
                    
                </tree>
            </field>
        </record>

        <record id="kw_attendance_absent_report_view_search" model="ir.ui.view">
            <field name="name">Employee Absent Report Search View</field>
            <field name="model">kw_attendance_absent_report</field>
            <field name="arch" type="xml">
                <search string="Search Absent">
                    <field name="emp_name" />
                    <field name="branch" />
                    <field name="department" />
                    <field name="designation" />
                    <field name="employement_type" />

                    <filter string="FTE" name="filter_regular_employement_type" domain="[('employement_type.code', '=','P')]"  />

                    <group expand="0" string="Group By">
						
                        <filter name="group_by_employement_type" string="Employement Type" context="{'group_by':'employement_type'}" />
					</group>
                </search>
            </field>
        </record>

        <record id="action_attendance_absent_report_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Attendance Absent Report</field>
            <field name="res_model">kw_attendance_absent_report</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="target">current</field>
            <field name="domain">[('employee_id.attendance_mode_ids.alias','in',['portal','bio_metric'])]</field>
            <field name="context">{"search_default_filter_regular_employement_type":1,"edit": False,"import": False}</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_attendance_absent_report_view_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('kw_attendance_absent_report_view_form')})]"/>
            <field name="search_view_id" ref="kw_attendance_absent_report_view_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No record found
                </p>
            </field>
        </record>

    </data>
</odoo>