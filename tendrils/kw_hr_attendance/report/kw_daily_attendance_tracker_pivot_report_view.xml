<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="kw_daily_attendance_tracker_pivot_report_view_tree" model="ir.ui.view">
            <field name="name">view.kw_daily_attendance_tracker_pivot_report.tree</field>
            <field name="model">kw_daily_attendance_tracker_pivot_report</field>
            <field name="priority">16</field>
            <field name="arch" type="xml">
                <tree import="false">
                    <field name="attendance_recorded_date"/>
                    <field name="employee_id" invisible="1"/>
                    <field name="emp_code" />
                    <field name="emp_name" />
                    <field name="branch_id"/>
                    <field name="department_id"/>
                    <!-- <field name="employement_type" /> -->
                    <field name="date_of_joining"/>
                    <!-- <field name="shift_id"/> -->

                    <!-- <field name="present"/>
                   <field name="absent"/>
                    <field name="leave"/>
                    <field name="tour"/>
                    <field name="wfo"/>
                    <field name="wfh"/> -->
                    <field name="attendance_id" invisible="1" />
                    <field name="work_location_type" />
                    <field name="check_in_time" />
                    <field name="check_out_time" />
                    <field name="gender" />
                    <!-- <field name="check_in" /> -->
                    <!-- <field name="check_out" /> -->
                    <field name="check_in_mode" />
                    <field name="status"/>
                    <field name="mode"/>
                    <field name="sbu" string="SBU" />
                    <field name="project" />
                    <field name="project_manager_id" />
                    <field name="infra_location" string="WS Location"/>
                    <field name="floor" string="WS Floor"/>
                    <field name="workstation" string="WS Name"/>
                </tree>
            </field>
        </record>

        <record id="kw_daily_attendance_tracker_pivot_report_view_form" model="ir.ui.view">
            <field name="name">view.kw_daily_attendance_tracker_pivot_report.form</field>
            <field name="model">kw_daily_attendance_tracker_pivot_report</field>
            <field name="type">form</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="attendance_recorded_date"/>
                                <field name="branch_id"/>
                                <field name="department_id"/>
                                <field name="date_of_joining"/>
                                <!-- <field name="shift_id"/> -->
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="kw_daily_attendance_tracker_pivot_report_view_pivot" model="ir.ui.view">
            <field name="name">view.kw_daily_attendance_tracker_pivot_report.pivot</field>
            <field name="model">kw_daily_attendance_tracker_pivot_report</field>
            <field name="arch" type="xml">
                <pivot string="Daily Attendance Tracker">
                    <field name="branch_id" type="row"/>
                    <field name="location" type="row"/>
                    <field name="date_of_joining"/>
                    <!-- <field name="shift_id" invisible="1"/> -->
                    <field name="employee_id"   type="measure"/>
                    <field name="no_of_present" type="measure"/>
                    <field name="no_of_absent"  type="measure"/>
                    <field name="no_of_leave"   type="measure"/>
                    <field name="no_of_tour"    type="measure"/>
                    <field name="no_of_wfo"     type="measure"/>
                    <field name="no_of_wfh"     type="measure"/>
                    <!-- <field name="no_of_wfa"     type="measure"/> -->
                </pivot>
            </field>
        </record>


        <record id="kw_daily_attendance_tracker_pivot_report_view_search" model="ir.ui.view">
            <field name="name">view.kw_daily_attendance_tracker_pivot_report.search</field>
            <field name="model">kw_daily_attendance_tracker_pivot_report</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="kw_daily_attendance_tracker_pivot_report_search">
                    <field name="employee_id" string="Employee"/>
                    <field name="branch_id" string="Branch"/>
                    <field name="department_id" string="Department" />
                    <field name="date_of_joining"/>
                    <field name="infra_location" string="Location"/>
                    <field name="check_in" />
                    <!-- <field name="shift_id" string="Shift"/> -->
                    <filter string="Attendance Date" name="filter_attendance_date" date="attendance_recorded_date"/>
                    <filter string="Date of Joining" name="filter_joining_date" date="date_of_joining"/>
                    <separator/>

                    <filter string="Today" domain="[('attendance_recorded_date', '=',context_today().strftime('%Y-%m-%d'))]" name="today_attendance"/>
                    <filter string="This Month" domain="[('attendance_recorded_date', 'like',context_today().strftime('%Y-%m'))]" name="this_month_attendance"/>
                    
                    <filter name="before_9am" string="Before 9AM" context="{'before_9am':1}"/>
                    <filter name="9am_to_9_30_am" string="9AM to 9:30AM" context="{'9am_to_9_30_am':1}" />
                    <filter name="9_31am_to_10_00_am" string="9:31AM to 10:00AM" context="{'9_31am_to_10_00_am':1}" />
                    <filter name="after_10am" string="After 10AM" context="{'after_10am':1}" />

                    <separator/>
                    <filter string="Present" domain="[('no_of_present', '=',1)]" name="present"/>
                    <filter string="Absent" domain="[('no_of_absent', '=',1)]" name="absent"/>

                    <filter string="Leave" domain="[('no_of_leave', '=',1)]" name="leave"/>
                    <filter string="Tour"  domain="[('no_of_tour', '=',1)]"  name="tour"/>
                    <separator/>
                    <filter string="Bhubaneshwar" invisible="1" domain="[('branch_id.alias', 'ilike','Bhubaneswar')]" name="bhubaneshwar_branch"/>
                    <separator/>
                    <filter string="CSM HQ" domain="[('location', '=','CSM HQ')]" name="offsite"/>
                    <filter string="Onsite"   domain="[('location', '=','Onsite')]"   name="Onsite"/>
                    <filter string="Work From Anywhere"   domain="[('location', '=','Work from Anywhere')]" name="Work_from_anywhere"/>
                    <separator/>
                    <filter string="WFH"   domain="[('no_of_wfh', '=',1)]"   name="wfh"/>
                    <filter string="WFO"   domain="[('no_of_wfo', '=',1)]"   name="wfo"/>
                    <filter string="WFA"   domain="[('no_of_wfa', '=',1)]"   name="wfa"/>
                    <!-- <separator/>
                    <filter string="CSM HQ" invisible="1" domain="[('location', '=','CSM HQ')]" name="offsite_location"/> -->
                    <group expand="0" string="Group By">
                        <filter name="group_by_location" string="Location" context="{'group_by':'infra_location'}"/>
                        <filter name="group_by_branch" string="Branch" context="{'group_by':'branch_id'}"/>
                        <filter name="group_by_sbu" string="SBU" context="{'group_by':'sbu'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="kw_daily_attendance_tracker_pivot_report_act_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Daily Attendance Tracker</field>
            <field name="res_model">kw_daily_attendance_tracker_pivot_report</field>
            <field name="view_mode">pivot,form</field>
            <field name="view_type">form</field>
            <field name="target">current</field>
            <field name="domain">[]</field>
            <field name="context">{'search_default_today_attendance':1,'search_default_bhubaneshwar_branch':1}</field>
            <field name="search_view_id" ref="kw_daily_attendance_tracker_pivot_report_view_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No record found
                </p>
            </field>
        </record>

    </data>
</odoo>