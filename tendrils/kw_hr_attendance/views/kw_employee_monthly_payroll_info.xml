<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_kw_employee_monthly_payroll_info_tree" model="ir.ui.view">
            <field name="name">view.kw_employee_monthly_payroll_info.tree</field>
            <field name="model">kw_employee_monthly_payroll_info</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="kw_employee_monthly_payroll_info_tree" create="false" edit="false" delete="false" import="false" default_order="employee_id">
                    <field name="attendance_month_name" string="Month"/>
                    <field name="employee_id" string="Employee" />
                    <field name="company_id"/>
                    <field name="num_shift_working_days" />
                    <field name="actual_working_days" />
                    <!-- <field name="num_actual_working_days" /> -->
                    <field name="num_leave_days"  />
                    <field name="num_tour_days" />
                    <field name="num_absent_days"  />
                    <field name="num_present_days_count_log" />
                    <field name="num_present_days" />
                    <field name="num_late_wopc"/>
                    <field name="num_late_wpc"  />
                    <field name="num_fixed_late_days_pc" />
                    <field name="num_late_days_pc_after_fixed" />
                    <!-- <field name="num_ex_late_wopc" />
                    <field name="num_ex_late_wpc" /> -->
                    <field name="num_total_late_days_pc" />
                    <field name="num_wh_leave_days"  />
                    <field name="num_fh_leave_days" />
                    <field name="num_wh_tour_days" />
                    <field name="num_fh_tour_days" />
                    <field name="emp_status" />
                    <field name="num_leave_lwop" />
                    <field name="num_mt_leave_days" />
                    <field name="sync_status" />
                </tree>
            </field>
        </record>

        <!-- <record id="view_kw_employee_monthly_payroll_info_form" model="ir.ui.view">
            <field name="name">view.kw_employee_monthly_payroll_info.form</field>
            <field name="model">kw_employee_monthly_payroll_info</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="kw_employee_monthly_payroll_info_form" create="true" edit="true">
                   
                    <sheet>
                        <group>
                            <field name="enable_edit" invisible="1"/>
                            <field name="employee_id" string="Employee" options="{'no_create_edit': True, 'no_create': True, 'no_open': True}" attrs="{'readonly': [('enable_edit','=',False)]}" />
                            <field name="date" autocomplete="off" attrs="{'readonly': [('enable_edit','=',False)]}" />
                            <field name="shift_id" string="Shift Name" options="{'no_create_edit': True, 'no_create': True, 'no_open': True}"  domain="[('employee_id','=',False)]" attrs="{'readonly': [('enable_edit','=',False)]}" />
                            <field name="week_off_status" attrs="{'readonly': [('enable_edit','=',False)]}" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record> -->
        <!-- model.name search view -->
        <record id="view_kw_employee_monthly_payroll_info_search" model="ir.ui.view">
            <field name="name">view.kw_employee_monthly_payroll_info.search</field>
            <field name="model">kw_employee_monthly_payroll_info</field>
            <field name="arch" type="xml">
                <search string="Search Description">
                    <field name="employee_id" string="Employee"/>

                    <filter string="This Year" domain="[('attendance_year', '=',context_today().strftime('%Y'))]" name="current_year_attendance"/>
                    <filter string="Last Year" domain="[('attendance_year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year_attendance"/>  
                    <separator/>

                    <filter string="This Month" name="current_month_attendance" domain="[('attendance_year', '=',context_today().strftime('%Y')),('attendance_month','=',context_today().strftime('%m'))]"  /> 
                    <filter string="Last Month" domain="[('attendance_month','=',(context_today()-relativedelta(months=1)).strftime('%%m')),('attendance_year', '=',context_today().strftime('%Y'))]" name="last_month_attendance"/>

                    <separator/>
                    <filter string="January" domain="[('attendance_month','=',1)]" name="january_attendance"/>
                    <filter string="February" domain="[('attendance_month','=',2)]" name="february_attendance"/>
                    <filter string="March" domain="[('attendance_month','=',3)]" name="march_attendance"/>
                    <filter string="April" domain="[('attendance_month','=',4)]" name="april_attendance"/>
                    <filter string="May" domain="[('attendance_month','=',5)]" name="may_attendance"/>
                    <filter string="June" domain="[('attendance_month','=',6)]" name="june_attendance"/>
                    <filter string="July" domain="[('attendance_month','=',7)]" name="july_attendance"/>
                    <filter string="August" domain="[('attendance_month','=',8)]" name="august_attendance"/>
                    <filter string="September" domain="[('attendance_month','=',9)]" name="september_attendance"/>
                    <filter string="October" domain="[('attendance_month','=',10)]" name="october_attendance"/>
                    <filter string="November" domain="[('attendance_month','=',11)]" name="november_attendance"/>
                    <filter string="December" domain="[('attendance_month','=',12)]" name="december_attendance"/>   
                    
                    <group expand="0" string="Group By">                       
                        <filter string="Employee" name="employee_id" context="{'group_by':'employee_id'}"/>
                        <filter string="Company" name="company_id" context="{'group_by':'company_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_kw_employee_monthly_payroll_info_act_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Employee Payroll Info</field>
            <field name="res_model">kw_employee_monthly_payroll_info</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="context">{'search_default_current_year_attendance':1,'search_default_current_month_attendance':1,"create": False,"edit": False}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No record found
                </p>
            </field>
        </record>

        <menuitem name="Employee Payroll Info"
                  id="menu_kw_attendances_payroll_summary_report"
		          parent="hr_attendance.menu_hr_attendance_report"
		          action="action_kw_employee_monthly_payroll_info_act_window"
		          groups="hr_attendance.group_hr_attendance_manager,kw_hr_attendance.group_kw_hr_attendance_report_manager" sequence="10"/>
    </data>
</odoo>
