<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!--     Tree view       -->
    <record id="visitor_tree_view" model="ir.ui.view">
        <field name="name">visitor.tree.view</field>
        <field name="model">visitor_data</field>
        <field name="arch" type="xml">
            <tree string="visitor" import='0'>
                <field name="visitor_name" />
                <field name="visitor_phn" />
                <field name="create_date" string="Visit Date" widget='date' />
                <field name="in_time"/>
                <field name="out_time"/>
                <field name="visitor_gender" />
                <field name="visitor_email" />
                <field name="visitor_address" />
                <field name="whom_to_meet" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                <field name="submitted" invisible="1"/>
                <!-- <field name="entry" invisible="1"/> -->
                <!-- <field name="not_entry" invisible="1"/> -->
                <!-- <button string="Allow" type="object" name="action_allowed_visitor" class="btn-info" attrs="{'invisible': ['|',('submitted', '!=', True),('entry','=',True)]}"/>
                <button string="Deny" type="object" name="action_denied_visitor" class="btn-warning" attrs="{'invisible': ['|',('submitted', '!=', True),('entry','=',True)]}"/> -->
            </tree>
        </field>
    </record>
    <!--  End Tree View    -->
    <record id="visitor_form_view" model="ir.ui.view">
        <field name="name">visitor.form.view</field>
        <field name="model">visitor_data</field>
        <field name="arch" type="xml">
            <form duplicate='0'>
                <header>
                    <button string="Check In" type="object" name="action_check_in" class="btn-primary" attrs="{'invisible': [('submitted', '=', True)]}"/>
                    <button string="Check Out" type="object" name="action_check_out" class="btn-primary" attrs="{'invisible': ['|',('submitted', '!=', True),('entry','=',True)]}"/>
                </header>
                <sheet>
                    <group style="text-align:center" string=" Create Visitor's Information " />
                    <group>
                        <field style="height:150px; width:150px;" name="visitor_image" widget="image" />
                    </group>
                    <group>
                        
                        <group>
                            <field name="entry" invisible="1"/>
                            <field name="test_css" invisible="1"/>
                            <field name="submitted" invisible="1"/>
                            <field name="visitor_phn" widget="phone" autocomplete='off' />
                            <field name="visitor_address" required="1" autocomplete='off'/>
                            <field name="visitor_name" autocomplete='off'/>
                            <field name="visitor_gender" autocomplete='off'/>
                            <field name="visitor_email" autocomplete='off'/>
                            <field name="in_time" readonly='1'/>
                            <field name="out_time" readonly='1'/>
                        </group>
                        <group>
                            <field name="visit_purpose" widget='radio' options="{'horizontal': true}" autocomplete='off'/>
                            <field name="whom_to_meet" options="{'no_open': True,'no_create':True,'no_edit':True}" autocomplete='off'/>
                            <field name="employee_status" readonly="1"/>
                            <field name="asset_opt" widget="boolean_toggle" options="{'horizontal': true}" attrs="{'readonly': [('submitted', '=', True)]}" autocomplete='off'/>
                            <field name="asset_no" attrs="{'invisible': [('asset_opt', '!=', True)],'required': [('asset_opt', '=', True)]}" autocomplete='off'/>
                            <field name="asset_srl_no" attrs="{'invisible': [('asset_opt', '!=', True)],'required': [('asset_opt', '=', True)]}" autocomplete='off'/>
                            <field name="asset_type" attrs="{'invisible': [('asset_opt', '!=', True)],'required': [('asset_opt', '=', True)]}" autocomplete='off'/>
                            <!-- <field name="show_asset_fields" invisible="1"/> -->
                        </group>
                        
                    </group>
                </sheet>
                <!--  Add Chatter Form View for   -->
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread"
                        options="{'post_refresh': 'recipients'}" />
                </div>
                <!--  End Add chatter Form View for   -->
            </form>
        </field>
    </record>
    <!-- wizard form view -->

    <record id="view_visitor_wizard_form" model="ir.ui.view">
        <field name="name">visitor_wizard_form</field>
        <field name="model">visitor_wizard</field>
        <field name="arch" type="xml">
            <form string="Visitor Wizard">
                <group style="text-align:center" string="Do You Want To Share Visitor's Information With Management." />
                <group>
                    <field name="visitor_id" invisible="1"/>
                </group>
                <footer>
                    <center>
                        <button string="Send Mail" type="object" name="action_send_visitor_mail" class="btn-primary"/>
                        
                        <button string="Close" type="object" special="cancel"  class="btn-secondary"/>
                    </center>

                </footer>
            </form>
        </field>
    </record>


    <!-- Pre Schdeuled Visitors Tree View -->

    <record id="scheduled_visitor_data_tree_view" model="ir.ui.view">
        <field name="name">scheduled_visitor_data.tree.view</field>
        <field name="model">scheduled_visitor_data</field>
        <field name="arch" type="xml">
            <tree string="visitor" import='0'>
                <field name="visitor_name" />
                <field name="organisation_name" />
                <field name="visit_date" />
                <field name="state"/>
                <!-- <field name="visit_time_full"/> -->
                <field name="allow_preschedule_visitors" groups="tendrils_visitor_management.tendrils_visitor_management_manager" readonly='1'/>
                
            </tree>
        </field>
    </record>

    <!-- Pre Schdeuled Visitors Search View -->

    <record id="preschedule_visitors_search_view" model="ir.ui.view">
        <field name="name">preschedule_visitors_search</field>
        <field name="model">scheduled_visitor_data</field>
        <field name="arch" type="xml">
            <search>
                <field name="visitor_name"/>
                <field name="organisation_name"/>
                <filter string="Visit Date" name="filter_visit_date" date="visit_date"/>
            </search>
        </field>
    </record>

    <!-- Pre Schdeuled Visitors Form View -->

    <record id="scheduled_visitor_data_form_view" model="ir.ui.view">
        <field name="name">scheduled_visitor_data.form.view</field>
        <field name="model">scheduled_visitor_data</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="state" widget='statusbar'/>
                    <button string="Schedule" type="object" name="schedule_visitor" class="btn-primary" states="draft" groups="tendrils_visitor_management.tendrils_visitor_management_manager"/>
                    <button string="Re-Schedule" type="object" name="re_schedule_visitor" class="btn-warning" states="schedule" groups="tendrils_visitor_management.tendrils_visitor_management_manager" />
                    <button string="Cancel" type="object" name="cancel_schedule_visitor" class="btn-danger" states="schedule" groups="tendrils_visitor_management.tendrils_visitor_management_manager" />
                    <button string="Allow" type="object" name="allow_preschedule_visitor" class="btn-primary" groups="tendrils_visitor_management.tendrils_visitor_management_receptionist"  attrs="{'invisible': ['|',('allow_preschedule_visitors', '=', 'yes'),('state','not in',('schedule'))]}"/>
                </header>
                <sheet>
                    <group>
                        <field style="height:150px; width:150px;" name="visitor_image" widget="image" />
                    </group>
                    <group>
                        
                        <group>
                            <field name="test_css" invisible="1"/>
                            <field name="is_scheduled" invisible='1' />
                            <field name="allow_preschedule_visitors" invisible='1' />

                            <field name="visitor_name"  autocomplete='off' />
                            <field name="organisation_name" autocomplete='off' />
                            <field name="visit_date"  autocomplete='off' />
                            <field name="visitor_phn" widget="phone"  autocomplete='off' />
                            <field name="visitor_email" autocomplete='off' />
                            <field name="vehicle_no"  autocomplete='off' />
                            <field name="vehicle_model" autocomplete='off' />
                            <field name="remark" attrs="{'invisible': [('remark', '=',False)]}" readonly='1'/>
                            
                           
                        </group>
                    </group>
                </sheet>
                <!--  Add Chatter Form View for   -->
                <!-- <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread"
                        options="{'post_refresh': 'recipients'}" />
                </div> -->
                <!--  End Add chatter Form View for   -->
            </form>
        </field>
    </record>

    <record id="action_visitor_wizard" model="ir.actions.act_window">
        <field name="name">Visitor Wizard</field>
        <field name="res_model">visitor_wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <record id="action_visitor_data" model="ir.actions.act_window">
        <field name="name">Un-Scheduled Visitors</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">visitor_data</field>
        <field name="view_mode">tree,form</field>
    </record>
    <!-- Pre Schdeuled Visitors Action  -->

    <record id="action_scheduled_visitor_data" model="ir.actions.act_window">
        <field name="name">Pre-Schedule Visitors</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">scheduled_visitor_data</field>
        <field name="domain">[('state','!=','cancel')]</field>
        <field name="view_mode">tree,form</field>
    </record>

<!-- Report Section -->
     <!-- Pre Schdeuled Visitors Report Tree View -->

     <record id="preschedule_visitors_report_tree_view" model="ir.ui.view">
        <field name="name">preschedule_visitors_report.tree.view</field>
        <field name="model">preschedule_visitors_report</field>
        <field name="arch" type="xml">
            <tree string="Pre Scheduled Visitor" create='0' import='0' delete='0' edit='0'>
                <field name="vtr_name" />
                <field name="vtr_phn" />
                <field name="vtr_email" />
                <field name="vtr_organisation"/>
                <field name="visit_date" />
                <!-- <field name="visit_time" /> -->
                <field name="vehicle_no"/>
                <field name="vehicle_model"/>
                <field name="state"/>
                
            </tree>
        </field>
    </record>
    <record id="preschedule_visitors_report_search" model="ir.ui.view">
        <field name="name">preschedule_visitors_report_search</field>
        <field name="model">preschedule_visitors_report</field>
        <field name="arch" type="xml">
            <search>
                <field name="vtr_name"/>
                <field name="vtr_organisation"/>
                <filter string="Visit Date" name="filter_visit_date" date="visit_date"/>
            </search>
        </field>
    </record>


    <!-- Un Schdeuled Visitors Report Tree View -->

    <record id="un_schedule_visitors_report_tree_view" model="ir.ui.view">
        <field name="name">un_schedule_visitors_report.tree.view</field>
        <field name="model">un_schedule_visitors_report</field>
        <field name="arch" type="xml">
            <tree string=" Un Scheduled Visitor" create='0' import='0' delete='0' edit='0'>
                <field name="v_purpose" />
                <field name="v_name" />
                <field name="v_phn" />
                <field name="v_email" />
                <field name="v_address" />
                <field name="to_meet"/>
                <field name="v_asset_no" />
                <field name="v_asset_srl_no" />
                <field name="v_asset_type"/>
            </tree>
        </field>
    </record>
    <record id="un_schedule_visitors_report_search" model="ir.ui.view">
        <field name="name">un_schedule_visitors_report_search</field>
        <field name="model">un_schedule_visitors_report</field>
        <field name="arch" type="xml">
            <search>
                <field name="v_name"/>
                <field name="to_meet"/>
            </search>
        </field>
    </record>


    <!-- Un Schdeuled Visitors Report Action  -->

    <record id="action_un_schedule_visitors_report" model="ir.actions.act_window">
        <field name="name">Un Schedule Visitors Report</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">un_schedule_visitors_report</field>
        <field name="view_mode">tree</field>
    </record>

    <!-- Pre Schdeuled Visitors Report Action  -->

    <record id="action_preschedule_visitors_report" model="ir.actions.act_window">
        <field name="name">Pre-Schedule Visitors Report</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">preschedule_visitors_report</field>
        <field name="view_mode">tree</field>
    </record>
    <record id="preschedule_visitors_calendar_view" model="ir.ui.view">
        <field name="name">pre_schedule_visitors_calendar</field>
        <field name="model">scheduled_visitor_data</field>
        <field name="arch" type="xml">
            <calendar string="Pre-Schedule Visitors Calendar" date_start="visit_date"  mode="month" 
             readonly_form_view_id="%(tendrils_visitor_management.scheduled_visitor_data_form_view)s" 
             event_open_popup="false" quick_add="False" color="visitor_name">
             <field name="visitor_name" />
             <field name="organisation_name"/>
             <!-- <field name="visit_time_full" /> -->
            </calendar>
        </field>
    </record>

    <record id="pre_schedule_visitors_calendar_action" model="ir.actions.act_window">
        <field name="name">Pre-Schedule Visitors Calendar</field>
        <field name="res_model">scheduled_visitor_data</field>
        <field name="view_mode">calendar</field>
        <field name="domain">[('state','=','schedule')]</field>
        <field name="view_ids" eval="[(5, 0, 0),
                 (0, 0, {'view_mode': 'calendar', 'view_id': ref('preschedule_visitors_calendar_view')})]"/>
    </record>

    <!-- Re Schdeuled Visitors Wizard Form view  -->


    <record id="view_reschedule_visit_wizard_form" model="ir.ui.view">
        <field name="name">reschedule.visit.wizard.form</field>
        <field name="model">reschedule_visit_wizard</field>
        <field name="arch" type="xml">
            <form string="Reschedule Visit">
                <group>
                    <field name="update_visit_date" autocomplete='off'/>
                    <field name="vehicle_no" autocomplete='off'/>
                    <field name="vehicle_model" autocomplete='off'/>
                    <field name="remark" autocomplete='off'/>
                </group>
                <footer>
                    <center>
                        <button name="action_reschedule" string="Reschedule" type="object" class="btn-primary"/>
                        <button string="Close" class="btn-secondary" special="cancel"/>
                    </center>
                </footer>
            </form>
        </field>
    </record>

     <!-- Cancel Visitors Wizard Form view  -->


     <record id="view_cancel_visit_wizard_form" model="ir.ui.view">
        <field name="name">Cancel.visit.wizard.form</field>
        <field name="model">cancel_visit_wizard</field>
        <field name="arch" type="xml">
            <form string="Cancel Visit">
                <group>
                    <field name="remark" autocomplete='off'/>
                </group>
                <footer>
                    <center>
                        <button name="action_cancel" string="Cancel" type="object" class="btn-danger"/>
                        <button string="Close" class="btn-secondary" special="cancel"/>
                    </center>
                </footer>
            </form>
        </field>
    </record>
    
   
</odoo>