<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="0">
        <template id="kw_survey_final_result" name="Appraisal Final Result">
            <t t-call="website.layout">
                <div class="wrap mb-5">
                    <div class="container p-3">
                        <div class="card">
                            <div class="card-header text-uppercase font-weight-bold text-center white-text ">
                            Appraisal Form
                            </div>
                            <div class="card-body">
                                <div class="mt-2 mb-4">
                                    <div t-foreach='user_input' t-as='user_inputs' class="float-left logedin-user">
                                        <img t-attf-src="data:image_small/*;base64,{{user_inputs.appraisal_id.emp_id.image_small}}" />
                                        <div class="info">
                                            <p class="m-0 font-weight-bold h4">
                                                <span t-esc="user_inputs.appraisal_id.emp_id.name+ ' ('+ user_inputs.appraisal_id.emp_id.emp_code +')' " />
                                            </p>
                                            <p class="m-0 badge badge-pill badge-primary">
                                                <span t-esc='user_inputs.appraisal_id.emp_id.job_id.name' />
                                            </p>
                                        </div>

                                    </div>
                                    <button onclick="window.history.go(-1);" id='back' class="btn btn-secondary btn-md float-right">
                                        Back to Appraisal
                                    </button>
                                    <div class="clearfix" />
                                </div>
                                <div class="clearfix" />
                                <div t-if="prev_goal">
                                    <h6 class="alert alert-info al text-dark">Goal Accomplishment : Please update the status of previous goals set by clicking against the appropriate milestones.</h6>
                                    <t t-foreach="prev_goal" t-as="goals">
                                        <div class="form-group">
                                            <label class="text-uppercase font-weight-bold" for="goal_name_vals">Goal :</label>
                                            <br />
                                            <span t-esc="goals.name" class="col-md-12" id="goal_name_vals" name="goal_name_vals" readonly="1" />
                                        </div>
                                        <div class="form-group row ml-0">
                                            <label class="text-uppercase font-weight-bold">Milestones :</label>
                                            <div t-foreach="goals.milestone_id" t-as="milestones" class="row col-sm-12" style="left: 1%;">
                                                <div class="funkyradio">
                                                    <div class="funkyradio-primary">
                                                        <t t-if="milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="milestones.status and manager_record or milestones.status and collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and manager_record or not milestones.status and collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <label t-att-for="milestones.id" t-raw="milestones.name" class="milestone_label" t-if="not manager_record and not collaborator_record" />
                                                        <label t-raw="milestones.name" class="milestone_label" t-if="manager_record or collaborator_record" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                                <div t-if="current_goal">
                                    <h6 class="alert alert-info al text-dark">Goal Plan : Please set goals for the next appraisal period along with the milestones.</h6>
                                    <t t-foreach="current_goal" t-as="goals">
                                        <div class="form-group">
                                            <label class="text-uppercase font-weight-bold" for="goal_name_vals">Goal :</label>
                                            <br />
                                            <span t-esc="goals.name" class="col-md-12" id="goal_name_vals" name="goal_name_vals" readonly="1" />
                                        </div>
                                        <div class="form-group row ml-0">
                                            <label class="text-uppercase font-weight-bold">Milestones :</label>
                                            <div t-foreach="goals.milestone_id" t-as="milestones" class="row col-sm-12" style="left: 1%;">
                                                <div class="funkyradio">
                                                    <div class="funkyradio-primary">
                                                        <t t-if="milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="milestones.status and manager_record or milestones.status and collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and manager_record or not milestones.status and collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <label t-att-for="milestones.id" t-raw="milestones.name" class="milestone_label" t-if="not manager_record and not collaborator_record" />
                                                        <label t-raw="milestones.name" class="milestone_label" t-if="manager_record or collaborator_record" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div t-if="goals.training" class="form-group">
                                            <label class="text-uppercase font-weight-bold">Need Training (if any) :</label>
                                            <br />
                                            <span t-esc="goals.training" class="col-md-12" />
                                        </div>
                                        <div t-if="goals.lm_score and manager_inputs_vals" class="form-group">
                                            <label class="text-uppercase font-weight-bold">LM Score :</label>
                                            <br />
                                            <span t-esc="goals.lm_score" class="col-md-12" />
                                        </div>
                                        <div t-if="goals.lm_remarks and manager_inputs_vals" class="form-group">
                                            <label class="text-uppercase font-weight-bold">LM Remark :</label>
                                            <br />
                                            <span t-esc="goals.lm_remarks" class="col-md-12" />
                                        </div>
                                        <div t-if="goals.ulm_remarks and collaborator_input_vals" class="form-group">
                                            <label class="text-uppercase font-weight-bold">ULM Remark :</label>
                                            <br />
                                            <span t-esc="goals.ulm_remarks" class="col-md-12" />
                                        </div>
                                    </t>
                                    <hr style='border: 4px solid #108fbb;padding:0;border-radius: 4px;' />
                                </div>

                                <div class="mt-3" t-att-name="'%s' % (survey.id)">
                                    <table t-foreach="survey.page_ids" t-as="page" id="survey_table" class="table table-hover table-bordered auto-index mb-5">
                                        <div class="card-body d-flex justify-content-end" style="padding: 1px;">
                                            <t t-set="test1" t-value="page.question_ids.mapped('id')" />
                                            <t t-set="test2" t-value="request.env['survey.question'].sudo().search([('id','in',test1)]).mapped('type')" />
                                            <t t-if="'simple_choice' in test2">
                                                <div class='text-right text-bold'>
                                                    <style>
                                                        .badge-custom {
                                                            font-size: 1.25rem;
                                                            padding: 0.75rem 1.5rem; 
                                                        }
                                                    </style>
                                                    <div class="form-group">
                                                        <!-- <label for="ratingDefinition" style="font-weight: bold; color: black; font-size: 16px;">Competency Rating Definition:</label> -->
                                                        <div>
                                                          <b><a href="#" data-toggle="modal" class="text-primary" data-target="#scoreDefinitionModal" style="text-decoration: none; border-bottom: 1px dotted #007bff; transition: border-bottom 0.3s;">Competency Rating Definition:</a></b>
                                                        </div>
                                                      </div>
                                                      
                                                </div>
                                            </t>
                                        </div>
                                        <div class="modal fade" id="scoreDefinitionModal" tabindex="-1" role="dialog" aria-labelledby="scoreDefinitionModalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document"  >
                                                <div class="modal-content" >
                                                    <div class="modal-header" style="background-color:#a6c !important;color:#fff">
                                                        <h3 class="modal-title" id="scoreDefinitionModalLabel">Rating Definition</h3>
                                                    </div>
                                                    <div style="margin-bottom: 10px;">
                                                        <t t-set="star" t-value="'ðŸŒŸ'"/>
                                                        
                                                        <h3 style="margin-bottom: 5px;padding: 15px;">Outstanding (5): <t t-esc="star"/></h3>
                                                        <ul style="list-style-type: disc; margin-left: 20px;">
                                                            <li>Consistently surpasses expectations, delivering exceptional work.</li>
                                                            <li>Demonstrates remarkable proficiency and goes above and beyond outlined responsibilities.</li>
                                                            <li>Acknowledged for consistently delivering high-quality results.</li>
                                                        </ul>
                                                    </div>
                                                    
                                                    <div style="margin-bottom: 10px;">
                                                        <t t-set="commendable_emoji" t-value="'ðŸ…'"/>
                                                        <h3 style="margin-bottom: 5px;padding: 15px;">Commendable (4): <t t-esc="commendable_emoji"/></h3>
                                                        <ul style="list-style-type: disc; margin-left: 20px;">
                                                            <li>Consistently meets and often exceeds expectations.</li>
                                                            <li>Shows above-average proficiency and achieves notable accomplishments.</li>
                                                            <li>Recognized for consistent, commendable performance.</li>
                                                        </ul>
                                                    </div>
                                                    
                                                    <div style="margin-bottom: 10px;">
                                                        <t t-set="meet_expectations_emoji" t-value="'ðŸ¤'"/>
                                                        <h3 style="margin-bottom: 5px;padding: 15px;">Meet Expectations (3):<t t-esc="meet_expectations_emoji"/></h3>
                                                        <ul style="list-style-type: disc; margin-left: 20px;">
                                                            <li>Delivers satisfactory work in line with outlined responsibilities.</li>
                                                            <li>Meets the expected standards consistently.</li>
                                                            <li>Performs tasks as expected and fulfills assigned duties competently.</li>
                                                        </ul>
                                                    </div>
                                                    
                                                    <div style="margin-bottom: 10px;">
                                                        <t t-set="need_improvement_emoji" t-value="'ðŸ”'"/>
                                                        <h3 style="margin-bottom: 5px;padding: 15px;">Need Improvement (2):<t t-esc="need_improvement_emoji"/></h3>
                                                        <ul style="list-style-type: disc; margin-left: 20px;">
                                                            <li>Displays areas that require enhancement or development.</li>
                                                            <li>May benefit from additional support or guidance in specific aspects.</li>
                                                            <li>Shows potential but needs improvement in certain areas to meet expected standards.</li>
                                                        </ul>
                                                    </div>
                                                    
                                                    <div style="margin-bottom: 10px;">
                                                        <t t-set="underperformance_emoji" t-value="'ðŸ“‰'"/>
                                                        <h3 style="margin-bottom: 5px;padding: 15px;">Underperformance (1)::<t t-esc="underperformance_emoji"/></h3>
                                                        <ul style="list-style-type: disc; margin-left: 20px;">
                                                            <li>Performs below the expected standards consistently.</li>
                                                            <li>Requires significant support and development to meet role expectations.</li>
                                                            <li>Needs guidance and improvement across multiple areas to align with organizational standards.</li>
                                                        </ul>
                                                    </div>
                                                    
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <h4 t-field="page.title" class="text-uppercase font-weight-bold text-dark" />
                                        <thead class="thead-orange">
                                            <tr>
                                                <t t-set="a" t-value="page.question_ids.mapped('id')" />
                                                <t t-set="b" t-value="request.env['survey.question'].sudo().search([('id','in',a)]).mapped('type')" />
                                                <t t-set="c" t-value="request.env['survey.question'].sudo().search([('id','in',a)]).mapped('indicator')" />

                                                <t t-if="'numerical_box' in b">
                                                    <th scope="col" width='15%'>KRA</th>
                                                </t>
                                                <t t-if="'numerical_box' in b">
                                                    <th scope="col" width='15%'>KPI</th>
                                                </t>
                                                <t t-else="">
                                                    <t t-if="'textbox'  in b">
                                                        <th scope="col" width='15%'>Training Planned hours</th>
                                                        <th scope="col" width='15%'>Attended hours</th>
                                                        <th scope="col" width='15%'>Percentage</th>
                                                    </t>
                                                    <t t-if="False not in c and 'textbox' not in b">
                                                        <th scope="col" width='15%'>Competencies</th>
                                                    </t>
                                                    <t t-if="'textbox' not in b">
                                                        <th scope="col" width='15%'>Behaviour Indicators</th>
                                                    </t>
                                                </t>
                                                <th scope="col" width='17.5%'>Self Remark</th>
                                                <th t-if="'textbox' not in b" scope="col" width='17.5%'>Self Score</th>

                                                <th t-if="manager_inputs_vals" scope="col" width='17.5%'>LM Remark</th>
                                                <th t-if="'textbox' not in b" scope="col" width='17.5%'>LM Score</th>

                                                <th t-if="collaborator_input_vals" scope="col" width='17.5%'>ULM Remark</th>
                                                <th  t-if="'numerical_box'  in b" width='17.5%'>Full Marks</th>
                                                <th  t-if="'textbox' not in b and (manager_inputs_vals or collaborator_input_vals)" width='17.5%'>Secured Score</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-set="prev_indicator" t-value="" />
                                            <t t-value="list(set(page.question_ids.mapped('indicator')))" t-set="indicator" />
                                            <t t-foreach="indicator" t-as="category">
                                                <tr t-foreach="page.question_ids.filtered(lambda x : x.indicator == category)" t-as="question">
                                                    <t t-set="prefix" t-value="'%s_%s_%s' % (survey.id, page.id, question.id)" />
                                                    <t class="js_question-wrapper" t-att-id="prefix" />
                                                    <td scope="col">
                                                        <t t-if="question.type != 'textbox'">
                                                            <span  t-field="question.question" />
                                                        </t>
                                                        <t t-if="question.type == 'textbox'">
                                                            <span  t-esc="planned_training_hours" />
                                                        </t>
                                                    </td>
                                                    <t t-if="question.indicator">
                                                        <td scope="col">
                                                            <span t-field="question.indicator" />
                                                        </td>
                                                    </t>
                                                    <!-- Self datas -->
                                                    <td t-if='employee_data_vals' scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'numerical_box'" >
                                                                <p t-esc='employee.value_text' style='word-break: break-word;' />
                                                            </t>
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'simple_choice'" >
                                                                <p t-esc='employee.value_text' style='word-break: break-word;' />
                                                            </t>
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'textbox'"  >
                                                                <p t-esc='achieved_duration' style='word-break: break-word;' />
                                                            </t>
                                                        </span>
                                                    </td>
                                                    <td t-if="employee_data_vals and question.type != 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'numerical_box'" >
                                                                <span>
                                                                    <p t-esc='(employee.value_number)' />
                                                                </span>
                                                            </t>
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'simple_choice'" >
                                                                <span>
                                                                    <p t-esc='(employee.value_suggested.value)' />
                                                                </span>
                                                            </t>
                                                        </span>
                                                    </td>
                                                    <td t-if="employee_data_vals and  question.type == 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'textbox'"  >
                                                                <p t-esc='training_percentage' style='word-break: break-word;' />
                                                            </t>
                                                        </span>
                                                    </td>
                                                    <td t-if="employee_data_vals and  question.type == 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'textbox'"  >
                                                                <p t-esc='employee.value_text' style='word-break: break-word;' />
                                                            </t>
                                                        </span>
                                                    </td>
                                                    
                                                    <!-- LM datas -->
                                                    <td t-if="manager_inputs_vals" scope="col" width='300px'>
                                                        <span t-foreach="manager_inputs_vals" t-as="manager">
                                                            <p t-if="manager.question_id.id == question.id" t-esc="manager.value_text" style='word-break: break-word;' />
                                                        </span>
                                                    </td>
                                                    <td t-if="manager_inputs_vals and question.type != 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="manager_inputs_vals" t-as="manager">
                                                            <t t-if="manager.question_id.id == question.id and question.type == 'numerical_box'" >
                                                            <p t-if="manager.question_id.id == question.id" t-esc="manager.value_number" style='word-break: break-word;' />
                                                            </t>
                                                            <t t-if="manager.question_id.id == question.id and question.type == 'simple_choice'" >
                                                                <p t-if="manager.question_id.id == question.id" t-esc="manager.value_suggested.value" style='word-break: break-word;' />
                                                                </t>
                                                        </span>
                                                    </td>
                                                    <!-- ULM datas -->
                                                    <td t-if="collaborator_input_vals" scope="col" width='300px'>
                                                        <span t-foreach="collaborator_input_vals" t-as="collaborators">
                                                            <p t-if="collaborators.question_id.id == question.id" t-esc="collaborators.value_text" style='word-break: break-word;' />
                                                        </span>
                                                    </td>
                                                    

                                                    <t t-if="question.type != 'textbox' and question.type == 'numerical_box'">
                                                        <td t-if="employee_data_vals" scope="col" width='300px'>
                                                            <span t-foreach="employee_data_vals" t-as="employee">
                                                                <p t-if="employee.question_id.id == question.id" t-esc="question.validation_max_float_value" style='word-break: break-word;' />
                                                            </span>
                                                        </td>
                                                    
                                                 
                                                </t>
                                                    <!-- LM datas score-->
                                                    <t t-if="question.type != 'textbox'">

                                                        <t t-if="manager_inputs_vals and collaborator_input_vals" width='15%'>
                                                            <td t-if="user_input.appraisal_id.score_calculation=='lm_ulm'">
                                                                <span t-foreach="manager_inputs_vals" t-as="manager">
                                                                    <span t-foreach="collaborator_input_vals" t-as="collaborators">
                                                                        <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id and collaborators.value_suggested.quizz_mark > 0  " >
                                                                            <t t-set="compitency_score" t-value="request.env['survey.label'].sudo().search([('question_id','=',collaborators.question_id.id),('question_id','=',manager.question_id.id),('quizz_mark','>=',(manager.value_suggested.quizz_mark + collaborators.value_suggested.quizz_mark)/2)],order='quizz_mark asc',limit=1).mapped('value')" />
                                                                            <t t-if="compitency_score">
                                                                                <p t-esc="compitency_score[0]"/>
                                                                            </t>
                                                                            <t t-else="">
                                                                                <t t-set="score" t-value="request.env['survey.label'].sudo().search([('question_id','=',collaborators.question_id.id),('question_id','=',manager.question_id.id),('quizz_mark','>=',(manager.value_suggested.quizz_mark + collaborators.value_suggested.quizz_mark)/2)],order='quizz_mark asc',limit=1).mapped('value') " />
                                                                                <p t-esc="score[0]"/>
                                                                            </t>
                                                                        </t>
                                                                        <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id and collaborators.value_suggested.quizz_mark == 0" >
                                                                            <p t-esc='manager.value_suggested.value' />
                                                                        </t>
                                                                        <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id">
                                                                            <p t-esc='(manager.value_number + collaborators.value_number)/2' />
                                                                        </t>
                                                                    </span>
                                                                </span>
                                                            </td>
                                                            <td t-if="user_input.appraisal_id.score_calculation=='lm'">
                                                                <span t-foreach="manager_inputs_vals" t-as="manager">
                                                                    <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id">
                                                                        <span>
                                                                            <t t-set="compitency_score" t-value="request.env['survey.label'].sudo().search([('question_id','=',manager.question_id.id),('quizz_mark','>=',manager.value_suggested.quizz_mark)],order='quizz_mark asc',limit=1).mapped('value')" />
                                                                            <t t-if="compitency_score">
                                                                                <p t-esc="compitency_score[0]"/>
                                                                            </t>
                                                                            <t t-else="">
                                                                                <t t-set="score" t-value="request.env['survey.label'].sudo().search([('question_id','=',manager.question_id.id),('quizz_mark','>=',manager.value_suggested.quizz_mark)],order='quizz_mark asc',limit=1).mapped('value') " />
                                                                                <p t-esc="score[0]"/>
                                                                            </t>
                                                                        </span>
                                                                    </t>
                                                                    <!-- <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id">
                                                                        <span>
                                                                            <p t-esc='manager.value_suggested.value' />
                                                                        </span>
                                                                    </t> -->
                                                                    <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id">
                                                                        <span>
                                                                            <p t-esc='(manager.value_number)' />
                                                                        </span>
                                                                    </t>
                                                                </span>
                                                            </td>
                                                            
                                                        </t>
                                                        
                                                        <t t-if="manager_inputs_vals and not collaborator_input_vals">
                                                            <td t-if="manager_inputs_vals" width='15%'>
                                                                <span t-foreach="manager_inputs_vals" t-as="manager">
                                                                    <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id">
                                                                        <p t-esc="manager.value_suggested.value" />
                                                                    </t>
                                                                    <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id">
                                                                        <p t-esc='manager.value_number' />
                                                                    </t>
                                                                </span>
                                                            </td>
                                                        </t>
                                                    </t>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <!-- <div t-if='user_input.appraisal_id.state.name == "Published"' class='font-weight-bold float-right'>
                                        <table class="table table-borderless">
                                            <tbody>
                                                <tr>
                                                    <td class="h4 py-0 text-right font-weight-bold">
                                                        Competency Score:
                                                    </td>
                                                    <td class="h4 py-0 text-success font-weight-bold">
                                                        <t t-esc="('%.2f' % user_input.appraisal_id.score).rstrip('0').rstrip('.')" />
                                                        %
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="h4 py-0 text-right font-weight-bold">
                                                    KRA Score:
                                                    </td>
                                                    <td class="h4 pt-0 pb-3 text-success font-weight-bold">
                                                        <t t-esc="('%.2f' % user_input.appraisal_id.kra_score).rstrip('0').rstrip('.')" />
                                                        %
                                                    </td>
                                                </tr>
                                                <tr></tr>
                                                <tr>
                                                    <td class="h4 py-0 text-right font-weight-bold">
                                                    Appraisal Score:
                                                    </td>
                                                    <td class="h4 py-0 text-success font-weight-bold">
                                                        <t t-esc="('%.2f' % user_input.appraisal_id.total_score).rstrip('0').rstrip('.')" />
                                                        %
                                                    </td>
                                                </tr>
                                                <tr> 
                                                    <td>
                                                        <a t-att-href="'/kw/appraisal/results/%s/%s' % (slug(survey), token)"> <button style='font-size:20px;background-color: #a6c !important; color: white;border:none'>Know your Score <i class='fa fa-arrow-circle-right'></i>
                                                        </button>
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div> -->
                                </div>
                                
                                <table class="table table-bordered table-hover" t-if="user_input.appraisal_id.state.name == 'Published'" >
                                    <thead class="thead-light">
                                        <h4 class="text-uppercase font-weight-bold text-dark" >Appraisal Score :</h4>
                                        <tr >
                                            <th style="width:33.3%;background-color:#b3d9ff;font-size:large">Aspect</th>
                                            <!-- <th>Description</th> -->
                                            <th style="width:33.3%;background-color:#b3d9ff;font-size:large">Weightage</th>
                                            <th style="width:33.3%;background-color:#b3d9ff;font-size:large">Secured Score </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td  style="font-size:large">KRA</td>
                                            <!-- <td>KPI</td> -->
                                            <td  style="font-size:large">
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).mapped('per_kra')" />
                                               <p><t t-esc="score[0]"/> % </p> 
                                            </td>
                                            <td id="redirectTdKPI"  style="font-size:large">
                                                <t t-set="kra_score" t-value="user_input.appraisal_id.kra_score" />
                                              <u style="color: blue; font-weight: bold;">  <t t-esc="('%.2f' % ((kra_score * score[0]) / 100)).rstrip('0').rstrip('.')" /> %</u>
                                            </td>
                                        </tr>
                                        
                                        <tr>
                                            <td  style="font-size:large">Competencies</td>
                                            <!-- <td>Behavior Indicator</td> -->
                                            <td  style="font-size:large">
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).mapped('per_appraisal')" />
                                                <p><t t-esc="score[0]"/> % </p> 

                                            </td>
                                            <td id="redirectTd"  style="font-size:large">
                                                <t t-set="appraisal_score" t-value="user_input.appraisal_id.score" />
                                               <u style="color: blue; font-weight: bold;"> <t t-esc="('%.2f' % ((appraisal_score * score[0]) / 100)).rstrip('0').rstrip('.')"/> %</u>
                                            </td>
                                        </tr>
                                        
                                        <tr>
                                            <td  style="font-size:large">Training</td>
                                            <!-- <td>Attended hour %</td> -->
                                            <td  style="font-size:large"> 
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).mapped('per_training')" />
                                                <p><t t-esc="score[0]"/> % </p> 
                                            </td>
                                            <td id="redirectTdTrng" style="font-size:large">
                                                <t t-set="training_score" t-value="user_input.appraisal_id.training_score" />
                                                <u style="color: blue; font-weight: bold;"> <!-- Added font-weight for emphasis -->
                                                    <t t-esc="('%.2f' % ((training_score * score[0]) / 100)).rstrip('0').rstrip('.')" /> %
                                                </u>
                                            </td>
                                                
                                              
                                        </tr>
                                        <tr>
                                            <td  class='font-weight-bold' style='text-align:right;font-size:large;background-color:#e6f2ff'>Total Final Score</td>
                                            <td style="font-size:large;background-color:#e6f2ff">
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).per_training + 
                                                                         request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).per_appraisal + 
                                                                         request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).per_kra" />
                                                <p  class='font-weight-bold' ><t t-esc="score"/> % </p> 

                                            </td>
                                            <td  class='font-weight-bold' style='font-size:large;background-color:#e6f2ff'> <t t-esc="('%.2f' % user_input.appraisal_id.total_score).rstrip('0').rstrip('.')" />
                                                %</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class='text-right text-bold'>
                                    <style>
                                        .badge-custom {
                                            font-size: 1.25rem;
                                            padding: 0.75rem 1.5rem; 
                                        }
                                    </style>
                                    <div class="form-group">
                                        <!-- <label for="ratingDefinition" style="font-weight: bold; color: black; font-size: 16px;">Score Calculation:</label> -->
                                        <div>
                                            <b><a href="#" id="scoreLink" class="text-primary" data-toggle="modal" data-target="#calculatiomModal" style="text-decoration: none; border-bottom: 1px dotted #007bff; transition: border-bottom 0.3s;">Score Calculation Details</a></b>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Your existing HTML code -->

                            <div class="modal fade" id="calculatiomModal" tabindex="-1" role="dialog" aria-labelledby="calculatiomModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header" style="background-color:#a6c !important;color:#fff">
                                            <h3 class="modal-title" id="calculatiomModalLabel">Score Details</h3>
                                        </div>
                                        <div style="margin-bottom: 10px;">
                                            <h3 style="margin-bottom: 5px;padding: 15px;">KRA Score Calculation:</h3>
                                            <ul style="list-style-type: disc; margin-left: 20px;">
                                                <t t-set="kra_score" t-value="user_input.appraisal_id.kra_score" />
                                                <t t-set="rounded_kra_score" t-value="kra_score and '%.2f' % kra_score"/>

                                                <li id="kraScoreCalculation"> KRA Score = <t t-esc="rounded_kra_score"/>% (LM Score)</li>
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).mapped('per_kra')" />
                                                <li>KRA Final Score = <t t-esc="rounded_kra_score"/>% x <t t-esc="score[0]"/>% (KRA Weightage) = <t t-esc="('%.2f' % ((kra_score * score[0]) / 100)).rstrip('0').rstrip('.')" />%</li>
                                            </ul>
                                            <h3 style="margin-bottom: 5px;padding: 15px;">Competency Score Calculation:</h3>
                                            <ul style="list-style-type: disc; margin-left: 20px;">
                                                <t t-set="appraisal_score" t-value="user_input.appraisal_id.score" />

                                                <li id="compScoreCalculation"> Competency Score = <t t-esc="appraisal_score"/>% (LM Score)</li>
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).mapped('per_appraisal')" />
                                                <li>Competency Final Score = <t t-esc="appraisal_score"/>% x <t t-esc="score[0]"/>% (Competency Weightage) = <t t-esc="('%.2f' % ((appraisal_score * score[0]) / 100)).rstrip('0').rstrip('.')" />%</li>
                                            </ul>
                                            <h3 style="margin-bottom: 5px;padding: 15px;">Training Score Calculation:</h3>
                                            <ul style="list-style-type: disc; margin-left: 20px;">
                                                <t t-set="training_score" t-value="user_input.appraisal_id.training_score" />
                                                <li id="trainScoreCalculation"> Training Score* = <t t-esc='achieved_duration'/> (Attended Hrs.) / <t t-esc="planned_training_hours"/> (Planned Hrs.) = <t t-esc="training_score"/>%</li>
                                                <t t-set="score" t-value="request.env['kw_appraisal_template_score_view'].sudo().search([('survey_id','=', user_input.appraisal_id.emp_survey_id.id)]).mapped('per_training')" />

                                                <li>Training Final Score = <t t-esc="training_score"/>% x <t t-esc="score[0]"/>% (Training Weightage) =  <t t-esc="('%.2f' % ((training_score * score[0]) / 100)).rstrip('0').rstrip('.')" />%</li>
                                            </ul>
                                            <b style="margin-left: 5px;padding: 15px;">*Training Hours are calculated from 01-Apr-2023 till 31-Mar-2024.</b>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <!-- <template id="kw_survey_appraisal_result" name="Appraisal Final Result">
            <t t-call="website.layout">
                <div class="wrap mb-5">
                    <div class="container p-3">
                        <div class="card">
                            <div class="card-header text-uppercase font-weight-bold text-center white-text ">
                            Appraisal Form
                            </div>
                            <div class="card-body">
                                <div class="mt-2 mb-4">
                                    <div t-foreach='user_input' t-as='user_inputs' class="float-left logedin-user">
                                        <img t-attf-src="data:image_small/*;base64,{{user_inputs.appraisal_id.emp_id.image_small}}" />
                                        <div class="info">
                                            <p class="m-0 font-weight-bold h4">
                                                <span t-esc="user_inputs.appraisal_id.emp_id.name+ ' ('+ user_inputs.appraisal_id.emp_id.emp_code +')' " />
                                            </p>
                                            <p class="m-0 badge badge-pill badge-primary">
                                                <span t-esc='user_inputs.appraisal_id.emp_id.job_id.name' />
                                            </p>
                                        </div>

                                    </div>
                                    <button onclick="window.history.go(-1);" id='back' class="btn btn-secondary btn-md float-right">
                                        Back to Form
                                    </button>
                                    <div class="clearfix" />
                                </div>
                                <div class="clearfix" />
                                <div t-if="prev_goal">
                                    <h6 class="alert alert-info al text-dark">Goal Accomplishment : Please update the status of previous goals set by clicking against the appropriate milestones.</h6>
                                    <t t-foreach="prev_goal" t-as="goals">
                                        <div class="form-group">
                                            <label class="text-uppercase font-weight-bold" for="goal_name_vals">Goal :</label>
                                            <br />
                                            <span t-esc="goals.name" class="col-md-12" id="goal_name_vals" name="goal_name_vals" readonly="1" />
                                        </div>
                                        <div class="form-group row ml-0">
                                            <label class="text-uppercase font-weight-bold">Milestones :</label>
                                            <div t-foreach="goals.milestone_id" t-as="milestones" class="row col-sm-12" style="left: 1%;">
                                                <div class="funkyradio">
                                                    <div class="funkyradio-primary">
                                                        <t t-if="milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="milestones.status and manager_record or milestones.status and collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and manager_record or not milestones.status and collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <label t-att-for="milestones.id" t-raw="milestones.name" class="milestone_label" t-if="not manager_record and not collaborator_record" />
                                                        <label t-raw="milestones.name" class="milestone_label" t-if="manager_record or collaborator_record" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                                <div t-if="current_goal">
                                    <h6 class="alert alert-info al text-dark">Goal Plan : Please set goals for the next appraisal period along with the milestones.</h6>
                                    <t t-foreach="current_goal" t-as="goals">
                                        <div class="form-group">
                                            <label class="text-uppercase font-weight-bold" for="goal_name_vals">Goal :</label>
                                            <br />
                                            <span t-esc="goals.name" class="col-md-12" id="goal_name_vals" name="goal_name_vals" readonly="1" />
                                        </div>
                                        <div class="form-group row ml-0">
                                            <label class="text-uppercase font-weight-bold">Milestones :</label>
                                            <div t-foreach="goals.milestone_id" t-as="milestones" class="row col-sm-12" style="left: 1%;">
                                                <div class="funkyradio">
                                                    <div class="funkyradio-primary">
                                                        <t t-if="milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and not manager_record and not collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="milestones.status and manager_record or milestones.status and collaborator_record">
                                                            <input type="checkbox" checked="checked" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <t t-if="not milestones.status and manager_record or not milestones.status and collaborator_record">
                                                            <input type="checkbox" t-att-id="milestones.id" t-att-name="milestones.id" onclick="return false" />
                                                        </t>
                                                        <label t-att-for="milestones.id" t-raw="milestones.name" class="milestone_label" t-if="not manager_record and not collaborator_record" />
                                                        <label t-raw="milestones.name" class="milestone_label" t-if="manager_record or collaborator_record" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div t-if="goals.training" class="form-group">
                                            <label class="text-uppercase font-weight-bold">Need Training (if any) :</label>
                                            <br />
                                            <span t-esc="goals.training" class="col-md-12" />
                                        </div>
                                        <div t-if="goals.lm_score and manager_inputs_vals" class="form-group">
                                            <label class="text-uppercase font-weight-bold">LM Score :</label>
                                            <br />
                                            <span t-esc="goals.lm_score" class="col-md-12" />
                                        </div>
                                        <div t-if="goals.lm_remarks and manager_inputs_vals" class="form-group">
                                            <label class="text-uppercase font-weight-bold">LM Remark :</label>
                                            <br />
                                            <span t-esc="goals.lm_remarks" class="col-md-12" />
                                        </div>
                                        <div t-if="goals.ulm_remarks and collaborator_input_vals" class="form-group">
                                            <label class="text-uppercase font-weight-bold">ULM Remark :</label>
                                            <br />
                                            <span t-esc="goals.ulm_remarks" class="col-md-12" />
                                        </div>
                                    </t>
                                    <hr style='border: 4px solid #108fbb;padding:0;border-radius: 4px;' />
                                </div>

                                <div class="mt-3" t-att-name="'%s' % (survey.id)">
                                    <table t-foreach="survey.page_ids" t-as="page" id="survey_table" class="table table-hover table-bordered auto-index mb-5">
                                        <h4 t-field="page.title" class="text-uppercase font-weight-bold text-dark" />
                                        <thead class="thead-orange">
                                            <tr>
                                                <t t-set="a" t-value="page.question_ids.mapped('id')" />
                                                <t t-set="b" t-value="request.env['survey.question'].sudo().search([('id','in',a)]).mapped('type')" />
                                                <t t-set="c" t-value="request.env['survey.question'].sudo().search([('id','in',a)]).mapped('indicator')" />

                                                <t t-if="'numerical_box' in b">
                                                    <th scope="col" width='30%'>KRA</th>
                                                </t>
                                                <t t-if="'numerical_box' in b">
                                                    <th scope="col" width='30%'>KPI</th>
                                                </t>
                                                <t t-else="">
                                                    <t t-if="'textbox'  in b">
                                                        <th scope="col">Training Planned hours</th>
                                                        <th scope="col">Attended hours</th>
                                                        <th scope="col">Percentage</th>
                                                        <th scope="col">Self Remark : </th>
                                                        <th t-if="manager_inputs_vals" scope="col">LM Remark</th>
                                                        <th  t-if="collaborator_input_vals" width='15%'>ULM Score</th>

                                                    </t>
                                                    <t t-if="False not in c and 'textbox' not in b">
                                                        <th scope="col" width='30%'>Competencies</th>
                                                    </t>
                                                    <t t-if="'textbox' not in b">
                                                        <th scope="col" width='30%'>Behaviour Indicators</th>
                                                    </t>
                                                </t>
                                                <t t-if="'textbox' not in b">
                                                    <th scope="col" width='20%'>Weightage</th>
                                                    <th scope="col" width='20%'>Final Score</th>
                                                </t>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-set="prev_indicator" t-value="" />
                                            <t t-value="list(set(page.question_ids.mapped('indicator')))" t-set="indicator" />
                                            <t t-foreach="indicator" t-as="category">
                                                <tr t-foreach="page.question_ids.filtered(lambda x : x.indicator == category)" t-as="question">
                                                    <t t-set="prefix" t-value="'%s_%s_%s' % (survey.id, page.id, question.id)" />
                                                    <t class="js_question-wrapper" t-att-id="prefix" />
                                                    <td scope="col">
                                                        <t t-if="question.type != 'textbox'">
                                                            <span  t-field="question.question" />
                                                        </t>
                                                        <t t-if="question.type == 'textbox'">
                                                            <span  t-esc="planned_training_hours" />
                                                        </t>
                                                    </td>
                                                    <t t-if="question.indicator">
                                                        <td scope="col">
                                                            <span t-field="question.indicator" />
                                                        </td>
                                                    </t>
                                                    <td t-if='employee_data_vals' scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'numerical_box'" >
                                                                <p t-esc='question.validation_max_float_value' style='word-break: break-word;' />
                                                            </t>
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'simple_choice'" >
                                                                <p t-esc='employee.value_suggested.quizz_mark' style='word-break: break-word;' />
                                                            </t>
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'textbox'"  >
                                                                <p t-esc='achieved_duration' style='word-break: break-word;' />
                                                            </t>
                                                        </span>
                                                    </td>
                                                    
                                                    <td t-if="employee_data_vals and  question.type == 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'textbox'"  >
                                                                <p t-esc='training_percentage' style='word-break: break-word;' />
                                                            </t>
                                                        </span>
                                                    </td>
                                                    <td t-if="employee_data_vals and  question.type == 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="employee_data_vals" t-as="employee">
                                                            <t t-if="employee.question_id.id == question.id and question.type == 'textbox'"  >
                                                                <p t-esc='employee.value_text' style='word-break: break-word;' />
                                                            </t>
                                                        </span>
                                                    </td>
                                                    
                                                   
                                                  
                                                      <td t-if="manager_inputs_vals and question.type == 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="manager_inputs_vals" t-as="manager">
                                                            <p t-if="manager.question_id.id == question.id and question.type == 'textbox'" t-esc="manager.value_text" style='word-break: break-word;' />
                                                        </span>
                                                    </td>
                                                  
                                                     <td t-if="collaborator_input_vals  and  question.type == 'textbox'" scope="col" width='300px'>
                                                        <span t-foreach="collaborator_input_vals" t-as="collaborators">
                                                            <p t-if="collaborators.question_id.id == question.id and  question.type == 'textbox'" t-esc="collaborators.value_text" style='word-break: break-word;' />
                                                        </span>
                                                    </td>
                                                    <t t-if="question.type != 'textbox'">
                                                        <t t-if="manager_inputs_vals and collaborator_input_vals" width='15%'>
                                                            <td t-if="user_input.appraisal_id.score_calculation=='lm_ulm'">
                                                                <span t-foreach="manager_inputs_vals" t-as="manager">
                                                                    <span t-foreach="collaborator_input_vals" t-as="collaborators">
                                                                        <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id and collaborators.value_suggested.quizz_mark > 0">
                                                                            <t t-set="compitency_score" t-value="request.env['survey.label'].sudo().search([('question_id','=',collaborators.question_id.id),('question_id','=',manager.question_id.id),('quizz_mark','>=',(manager.value_suggested.quizz_mark + collaborators.value_suggested.quizz_mark)/2)],order='quizz_mark asc',limit=1).mapped('value')" />
                                                                                <t t-if="compitency_score">
                                                                                    <p t-esc="compitency_score[0]"/>
                                                                                </t>
                                                                            </t>
                                                                        <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id and collaborators.value_number > 0">
                                                                                <p t-esc='(manager.value_number + collaborators.value_number)/2' />
                                                                            </t>
                                                                        <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id and collaborators.value_suggested.quizz_mark == 0" >
                                                                            <p t-esc='manager.value_suggested.value' />
                                                                        </t>
                                                                        <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id and collaborators.question_id.id == question.id and collaborators.value_number == 0">
                                                                            <p t-esc='manager.value_number' />
                                                                        </t>
                                                                    </span>
                                                                </span>
                                                            </td>
                                                            <td t-if="user_input.appraisal_id.score_calculation=='lm'">
                                                                <span t-foreach="manager_inputs_vals" t-as="manager">
                                                                    <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id">
                                                                        <span>
                                                                            <t t-set="compitency_score" t-value="request.env['survey.label'].sudo().search([('question_id','=',manager.question_id.id),('quizz_mark','>=',manager.value_suggested.quizz_mark)],order='quizz_mark asc',limit=1).mapped('value')" />
                                                                            <t t-if="compitency_score">
                                                                                <p t-esc="compitency_score[0]"/>
                                                                            </t>
                                                                            <t t-else="">
                                                                                <t t-set="score" t-value="request.env['survey.label'].sudo().search([('question_id','=',manager.question_id.id),('quizz_mark','>=',manager.value_suggested.quizz_mark)],order='quizz_mark asc',limit=1).mapped('value') " />
                                                                                <p t-esc="score[0]"/>
                                                                            </t>
                                                                        </span>
                                                                    </t>
                                                                  
                                                                    <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id">
                                                                        <span>
                                                                            <p t-esc='(manager.value_number)' />
                                                                        </span>
                                                                    </t>
                                                                </span>
                                                            </td>
                                                        </t>
                                                        <t t-if="manager_inputs_vals and not collaborator_input_vals">
                                                            <td t-if="manager_inputs_vals" width='15%'>
                                                                <span t-foreach="manager_inputs_vals" t-as="manager">
                                                                    <t t-if="question.type != 'numerical_box' and manager.question_id.id == question.id">
                                                                        <p t-esc="manager.value_suggested.value" />
                                                                    </t>
                                                                    <t t-if="question.type == 'numerical_box' and manager.question_id.id == question.id">
                                                                        <p t-esc='manager.value_number' />
                                                                    </t>
                                                                </span>
                                                            </td>
                                                        </t>
                                                    </t>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <table style="width: 100%; margin: 20px auto; border-collapse: collapse; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                                        <tr>
                                            <th scope="col" style="background-color: #dee2e6; color: black; padding: 15px; text-align: left;font-size: initial;font-weight: 700;: black;"><b>Score Calculation</b></th>
                                        </tr>
                                        <tr>
                                            <th style="background-color: #f9f9f9; font-size: .9rem;font-weight: bold;">
                                                In the context of appraisal scoring, individuals are evaluated with a scale ranging from 1 to 5, where:
                                                <ul style="list-style: disc;">
                                                    <li style="font-weight:bold">
                                                        Underperformance    -
                                                        <span style="color: blue;font-weight:bold">1</span>
                                                    </li>
                                                    <li style="font-weight:bold">
                                                        Need Improvement -
                                                        <span style="color: blue;font-weight:bold">2</span>
                                                    </li>
                                                    <li style="font-weight:bold">
                                                        Meet Expectations -
                                                        <span style="color: blue;font-weight:bold">3</span>
                                                    </li>
                                                    <li style="font-weight:bold">
                                                        Commendable -
                                                        <span style="color: blue;font-weight:bold">4</span>
                                                    </li>
                                                    <li style="font-weight:bold">
                                                        Outstanding  -   <span style="color: blue;font-weight:bold">5</span>
                                                    </li>
                                                </ul>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="background-color: #f9f9f9; font-size: .9rem;font-weight: bold;">
                                                KRA Score Calculation:
                                                <ul style="list-style: disc;">
                                                    <li>
                                                        KRA Score = 
                                                        <span style="color: blue;font-weight:bold">(LM Score + ULM Score) / 2</span>
                                                    </li>
                                                    <li>
                                                        KRA Final Score = 
                                                        <span style="color: blue;font-weight:bold"> % (KRA Score / Total Score)</span>
                                                    </li>
                                                </ul>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="background-color: #f9f9f9;font-size: .9rem;font-weight: bold;">
                                                Competency Score Calculation:
                                                <ul style="list-style: disc;">
                                                    <li>
                                                        Training Score = 
                                                        <span style="color: blue;font-weight:bold"> Attended Hours / Planned Hours</span> 
                                                        <ul style="list-style: disc;"><span style="color:#a6c !important">On a scale of 1 to 5</span>
                                                            <li>
                                                                Scoring 1-20% falls in 'Underperformance,' rating at 1.
                                                            </li>
                                                            <li>
                                                                21-40% lands in 'Need Improvement,' rated 2.
                                                            </li>
                                                            <li>
                                                                41-60% aligns with 'Meeting Expectations,' deserving 3.
                                                            </li>
                                                            <li>
                                                                61-80% indicates 'Commendable' performance, marked at 4.
                                                            </li>
                                                            <li>
                                                                81-100% signifies 'Outstanding' performance, rated 5.
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li>
                                                        Competency Score = 
                                                        <span style="color: blue;font-weight:bold">(LM Score + ULM Score) / 2 + Training Score</span>
                                                    </li>
                                                    <li>
                                                        Competency Final Score = 
                                                        <span style="color: blue;font-weight:bold"> % (Competency Score / Total Score) </span>
                                                    </li>
                                                </ul>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="background-color: #f9f9f9;font-size: .9rem;font-weight: bold;">
                                                Appraisal Score Calculation:
                                                <ul style="list-style: disc; ">
                                                    <li>
                                                        KRA Configuration Ratio = 
                                                        <span style="color: blue;font-weight:bold">Ratio configured for Final KRA calculation</span>
                                                    </li>
                                                    <li>
                                                        Competency Configuration Ratio = 
                                                        <span style="color: blue;font-weight:bold">Ratio configured for Final Competency calculation</span>
                                                    </li>
                                                    <li>
                                                        The sum of total increment ratio is 100.
                                                    </li>
                                                    <li>
                                                        Final Score = 
                                                        <span style="color: blue;font-weight:bold">(KRA Config Ratio % of KRA Final Score) + (Competency Config Ratio % of Competency Final Score)</span>
                                                    </li>
                                                </ul>
                                            </th>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template> -->
        <template id="kw_survey_assets_final_results" inherit_id="kw_appraisal.kw_survey_final_result">
            <xpath expr="." position="inside">
                <link href="/kwantify_theme/static/src/mdb/css/mdb.min.css?v=12" rel="stylesheet" />
                <link href="/kw_appraisal/static/src/css/front_style.css?v=12" rel="stylesheet" />
                <link href="/kw_appraisal/static/src/css/selection_box_arrow.css?v=12" rel="stylesheet" />
                <style>
                    table.table.table-bordered tbody tr:hover { background-color: #d1ecf1;}
                </style>
                <script type="text/javascript" src="/kwantify_theme/static/src/mdb/js/mdb.min.js?v=12"></script>
                <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const redirectTdkpi = document.getElementById('redirectTdKPI');
                            if (redirectTdkpi) {
                                redirectTdkpi.addEventListener('click', function() {
                                    const tableRows = document.querySelectorAll('tr');
                                    let KPISection = null;
                                    tableRows.forEach(function(row) {
                                        const cells = row.querySelectorAll('th');
                                        cells.forEach(function(cell) {
                                            if (cell.textContent.trim() === 'KPI') {
                                                KPISection = row;
                                            }
                                        });
                                    });

                                    if (KPISection) {
                                        KPISection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    } else {
                                        console.log("KPI section not found.");
                                    }
                                });
                            } else {
                                console.log("Element with id 'redirectTdkpi' not found.");
                            }
                            const redirectTd = document.getElementById('redirectTd');
                            if (redirectTd) {
                                redirectTd.addEventListener('click', function() {
                                    const tableRows = document.querySelectorAll('tr');
                                    let competencySection = null;
                                    tableRows.forEach(function(row) {
                                        const cells = row.querySelectorAll('th');
                                        cells.forEach(function(cell) {
                                            if (cell.textContent.trim() === 'Competencies') {
                                                competencySection = row;
                                            }
                                        });
                                    });
                    
                                    if (competencySection) {
                                        competencySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    } else {
                                        console.log("Competency section not found.");
                                    }
                                });
                            } else {
                                console.log("Element with id 'redirectTd' not found.");
                            }
                            const redirectTdTrng = document.getElementById('redirectTdTrng');
                            if (redirectTdTrng) {
                                redirectTdTrng.addEventListener('click', function() {
                                    const tableRows = document.querySelectorAll('tr');
                                    let TrainingSection = null;
                                    tableRows.forEach(function(row) {
                                        const cells = row.querySelectorAll('th');
                                        cells.forEach(function(cell) {
                                            if (cell.textContent.trim() === 'Training Planned hours') {
                                                TrainingSection = row;
                                            }
                                        });
                                    });
                    
                                    if (TrainingSection) {
                                        TrainingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    } else {
                                        console.log("Competency section not found.");
                                    }
                                });
                            } else {
                                console.log("Element with id 'redirectTd' not found.");
                            }
                            });
                </script>
                
            </xpath>
        </template>
        
        <!-- <template id="kw_survey_appraisal_assets_final_results" inherit_id="kw_appraisal.kw_survey_appraisal_result">
            <xpath expr="." position="inside">
                <link href="/kwantify_theme/static/src/mdb/css/mdb.min.css?v=12" rel="stylesheet" />
                <link href="/kw_appraisal/static/src/css/front_style.css?v=12" rel="stylesheet" />
                <link href="/kw_appraisal/static/src/css/selection_box_arrow.css?v=12" rel="stylesheet" />
                <style>
                    table.table.table-bordered tbody tr:hover { background-color: #d1ecf1;}
                </style>
                <script type="text/javascript" src="/kwantify_theme/static/src/mdb/js/mdb.min.js?v=12" />
            </xpath>
        </template> -->
        
    </data>
</odoo>