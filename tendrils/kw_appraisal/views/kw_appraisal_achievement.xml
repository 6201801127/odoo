<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="kw_appraisal_achievement_form" model="ir.ui.view">
            <field name="name">Kw apprisal achievement form</field>
            <field name="model">kw_appraisal_achievement</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="appraisal_period" readonly='1'/>
                            <field name="employee_id" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                            <field name="emp_deg" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" attrs="{'invisible': ['|',('employee_id','=', False),('emp_deg','=', False)]}"/>
                        </group>
                        <group string="Achievement List">
                            <field name="achievement_pages" string="Achievements">
                                <tree>
                                    <field name="situation"/>
                                    <field name="task"/>
                                    <field name="action"/>
                                    <field name="result"/>
                                </tree>
                            </field>
                        </group>
                        <div>
                            <p><strong><i>NOTE : </i></strong> STAR Methodology is the most effective way of competency assessment and noting down the achievements for the Appraisal period.
                            <br/>
                            <strong>S - Situation :</strong> Narrate a situation of your day to day work life.<br/>
                            <strong>T - Task :</strong> What was the task before you ?<br/>
                            <strong>A - Action :</strong> What action did you take to address the task ?<br/>
                            <strong>R - Result :</strong> What was the result of the action ?<br/></p>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="kw_appraisal_achievement_tree" model="ir.ui.view">
            <field name="name">Kw apprisal achievement tree</field>
            <field name="model">kw_appraisal_achievement</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="appraisal_period"/>
                    <field name="employee_id"/>
                    <field name="emp_deg"/>
                    <field name="emp_dept"/>
                    <field name="ra_id"/>
                    <field name="achievement_pages"/>
                    <field name="image" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="kw_appraisal_achievement_actions" model="ir.actions.act_window">
            <field name="name">Achievement List</field>
            <field name="res_model">kw_appraisal_achievement</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_type">form</field>
            <field name="domain">['&amp;',('employee_id.active','=',True),'|','|',('employee_id.user_id','=',uid),('employee_id.parent_id.user_id','=',uid),('employee_id.parent_id.parent_id.user_id','=',uid)]</field>
        </record>

        <record id="kw_appraisal_achievement_pages_form" model="ir.ui.view">
            <field name="name">Kw apprisal achievement pages form</field>
            <field name="model">kw_appraisal_achievement_pages</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="situation"/>
                            <field name="task"/>
                            <field name="action"/>
                            <field name="result"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- kanban view for Achievement List -->

        <record id="kw_appraisal_achievement_kanban" model="ir.ui.view">
            <field name="name">Kw appraisal achievement kanban</field>
            <field name="model">kw_appraisal_achievement</field>
            <field name="arch" type="xml">
                <kanban>
                    <field name="id"/>
                    <field name="image"/>
                    <field name="appraisal_period"/>
                    <field name="employee_id"/>
                    <field name="emp_deg"/>
                    <field name="emp_dept"/>
                    <field name="ra_id"/>
                    <field name="achievement_pages"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_hr_kanban_record">
                                <div class="o_kanban_image" t-attf-style="background-image: url(#{kanban_image('kw_appraisal_achievement', 'image', record.id.raw_value)});
                                                                        height: 150px;  /* Adjust the height as needed */
                                                                        width: 150px;   /* Adjust the width as needed */" role="img"></div>
                                                    
                                <div class="oe_kanban_details">
                                    <div class="o_kanban_record_top">
                                        <div class="o_kanban_record_headings">
                                            <strong class="o_kanban_record_title" style="color: blue; font-size: 18px;">
                                                Name: <field name="employee_id"/>
                                            </strong>
                                            <br/>
                                            <strong class="o_kanban_record_title" style="color: purple;">
                                                Financial Year: <field name="appraisal_period"/>
                                            </strong>
                                            <strong class="o_kanban_record_subtitle" style="color: purple;">
                                                Designation: <field name="emp_deg"/>
                                            </strong>
                                            <span class="o_kanban_record_subtitle" style="color: purple;">
                                                Emp Dept: <field name="emp_dept"/>
                                            </span>
                                            <span class="o_kanban_record_subtitle" style="color: purple;">
                                                Reporting Authority :<field name="ra_id"/>
                                            </span>
                                            <span class="o_kanban_record_subtitle" t-attf-style="background-color: yellow; border-radius: 10px; padding: 5px; display: inline-block; width: 100px; height: 30px;"
                                                t-if="record.achievement_pages">
                                                <field name="achievement_pages"/>
                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>

                </kanban>
            </field>
        </record>






        


        <menuitem name="Achievement" id="menu_kw_appraisal_acheivement_root" parent="menu_hr_appraisal_root" sequence="1"/>
        <menuitem name="My Achievement" id="menu_kw_appraisal_update_acheivement" action='kw_appraisal_achievement_actions' parent="menu_kw_appraisal_acheivement_root" sequence="1"/>

    </data>
</odoo>
