<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
		<!-- tree view -->
        <record id="kw_performance_navigator_my_goals_tree" model="ir.ui.view">
			<field name="name">My goals tree</field>
			<field name="model">kw_appraisal_goal</field>
			<field name="arch" type="xml" >
				<tree import='false' decoration-success="goal_progress_hide == True"  class='customer_tree'>
					<field name="button_hide" invisible='1'/>
					<field name="is_goal_user" invisible='1'/>
					<field name="goal_btn" invisible='1'/>
					<field name="goal_progress_hide" string='goal_progress_hide' invisible='1'/>

					<field name="goal_milestone_accepted" string='goal_milestone_accepted' invisible='1' force_save='1'/>
					<field name="goal_milestone_bool" string='goal_milestone_bool' invisible='1' force_save='1'/>
					<field name="appraisal_period" class='text-info font-weight-bold'/>
					<field name="employee_id"/>
					<field name="emp_deg"/>
					<field name="emp_dept"/>
					<field name="division_id"/>
					<field name="name" />
					<!-- <field name="milestone_id"/> -->
					<!-- <field name="training"/> -->
					<!-- <button class="btn btn-sm btn-info" string='Update Progress' type="object" name="update_goal_milestone"  attrs="{'invisible': ['|','&amp;',('goal_milestone_accepted','=',False),('goal_milestone_bool','=',False),('goal_progress_hide','=',True)]}"/> -->
                    <button string="Accept Goal" type="object" name="accept_goal_milestone" attrs="{'invisible': ['|','|',('is_goal_user','!=',True),('goal_milestone_bool','=',True),('goal_milestone_accepted','=',True)]}" class="btn btn-primary" />
					<!-- <button string="View Details" type="object" name="view_goal_milestone_details" attrs="{'invisible': [('goal_progress_hide','!=',True)]}" class="btn btn-success" /> -->
				</tree>
			</field>
		</record>
		

		<!-- Update goal form view -->
        <record id="kw_performance_navigator_goal_update_form" model="ir.ui.view">
			<field name="name">Goal form</field>
			<field name="model">kw_appraisal_goal</field>
			<field name="arch" type="xml">
				<form style="background-color: #def2e5;">
					<sheet>
						<label for="appraisal_period" class="oe_edit_only"/>
						<h1>
							<field name="appraisal_period" readonly='1' required='1' placeholder="Appraisal period" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" class='text-info font-weight-bold'/>
						</h1>
						<group style="background-color: #def2e5;">
							<group>
								<field name="name" readonly='1'/>
							</group>
							<group>
								<field name="employee_id" readonly='1' options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
								<field name="emp_deg" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" attrs="{'invisible': ['|',('employee_id','=', False),('emp_deg','=', False)]}"/>
							</group>
						</group>
						<group >
							<field name="milestone_id" class='text-info font-weight-bold'>
								<tree editable='top' class='customer_tree' reate='false' delete='false'>
									<field name="name" readonly='1'/>
									<field name="milestone_date" readonly='1'/>
									<field name="status"/>
									<field name="remark"/>
								</tree>
							</field>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<!-- Goal creation By RA form view -->
        <record id="kw_performance_navigator_goal_creation_form" model="ir.ui.view">
			<field name="name">Goal form</field>
			<field name="model">kw_appraisal_goal</field>
			<field name="arch" type="xml">
				<form>
					<sheet>
						<label for="appraisal_period" class="oe_edit_only" />
						<h1>
							<field name="appraisal_period" class="oe_inline" required='1' placeholder="Appraisal period" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" readonly='1' force_save = '1'/>
						</h1>
						<group style="background-color: #def2e5;">
							<group>
								<field name="employee_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" required='1'/>
								<field name="emp_deg" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" attrs="{'invisible': ['|',('employee_id','=', False),('emp_deg','=', False)]}"/>
								<field name="emp_dept" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" attrs="{'invisible': ['|',('employee_id','=', False),('emp_dept','=', False)]}"/>
							</group>
							<group>
								<field name="name" readonly='0'/>
								<field name="test_css" invisible='1' />
							</group>
						</group>
						<group>
							<field name="milestone_id" string="Milestone" class='text-info font-weight-bold'>
								<tree editable='top' class='customer_tree'>
									<field name="name"/>
									<field name="milestone_date"/>
									<!-- <field name="status"/> -->
								</tree>
							</field>
						</group>
					</sheet>
				</form>
			</field>
		</record>
		<!-- My goals action window -->
        <record model="ir.actions.act_window" id="kw_performance_navigator_goal_action_window">
            <field name="name">My Goals &amp; Milestone</field>
            <field name="res_model">kw_appraisal_goal</field>
            <field name="view_mode">tree</field>
            <field name="context">{'create':False,'edit':False,'delete':False}</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_performance_navigator_my_goals_tree')})]"/>
            <field name="help" type="html">
                    <p class="o_view_nocontent_smiling_face">
                        No modules to view...
                    </p>
            </field>
        </record>

		<!-- Employee goals action window = where other will see -->
        <record model="ir.actions.act_window" id="kw_performance_navigator_all_goal_action_window">
            <field name="name">My Team Member Goals</field>
            <field name="res_model">kw_appraisal_goal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('employee_id.active','=',True)]</field>
            <field name="context">{'type':'goal'}</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_performance_navigator_my_goals_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('kw_performance_navigator_goal_creation_form')}),]"/>
            <field name="help" type="html">
                    <p class="o_view_nocontent_smiling_face">
                        No modules to view...
                    </p>
            </field>
        </record>
    </data>
</odoo>