<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="kw_billing_port_tree" model="ir.ui.view">
            <field name="name">kw_billing_port_tree</field>
            <field name="model">kw_billing_dashboard_port</field>
            <field name="arch" type="xml">
                <tree create='0' duplicate='0' delete='1' import ='0'>
                    <field name="id" string='ID'/>
                    <field name="kw_milestone_id" string='KW Milestone ID'/>
                    <field name="project_id"/>
                    <field name="sbu_name"/>
                    <field name="wo_code"/>
                    <field name="wo_name"/>
                    <field name="milestone_details"/>
                    <field name="billing_amount"/>
                    <field name="billing_target_date"/>
                    <field name="active" invisible='1'/>
                </tree>
            </field>
        </record>
        <record id="kw_billing_port_expand_tree_view" model="ir.ui.view">
            <field name="name">kw_billing_port_expand_tree_view</field>
            <field name="model">kw_billing_dashboard_port</field>
            <field name="arch" type="xml">
                <tree editable='top' create='0' duplicate='0' delete='1' import ='0' decoration-danger="is_target_date_less">
                    <field name="project_id" readonly='1' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="sbu_name" readonly='1'/>
                    <field name="wo_code" readonly='1'/>
                    <field name="wo_name" readonly='1'/>
                    <field name="milestone_details" readonly='1'/>
                    <field name="billing_amount" readonly='1'/>
                    <field name="billing_target_date"/>
                    <field name="active" invisible='1' readonly='1'/>
                    <field name="is_target_date_less" invisible='1'/>
                </tree>
            </field>
        </record>
        <!-- <record id="kw_billing_port_form" model="ir.ui.view">
            <field name="name">kw_billing_port_form</field>
            <field name="model">kw_billing_dashboard_port</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="billing_plan_date"/>
                                <field name="collection_plan_date"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record> -->
        <record id="kw_billing_port_view_form" model="ir.ui.view">
            <field name="name">kw_billing_port_view_form</field>
            <field name="model">kw_billing_dashboard_port</field>
            <field name="arch" type="xml">
                <form  duplicate='0' delete='1' import = '0'>
                    <sheet>
                        <group>
                            <group>
                                <field name="kw_milestone_id" string='KW Milestone ID'/>
                                <field name="project_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="sbu_name"/>
                                <field name="wo_code"/>
                                <field name="wo_name"/>
                                <field name="billing_plan_date"/>
                                <field name="collection_plan_date"/>
                                <field name="billing_target_date"/>
                                <field name="billing_amount"/>
                                <field name="milestone_details"/>
                                <field name="active"/>
                            </group>
                            <group>
                                <field name="project_manager_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="account_leader_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="account_manager_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="reviewer_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="sbu_head_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                            </group>
                            <group string="Action Log" >
                                <field name="action_log_ids"  nolabel="1" readonly='1'>
                                    <tree>
                                        <field name="action_taken_by_id"/>
                                        <field name="action_taken_date"/>
                                        <field name="changed_date"/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="kw_billing_port_act_window" model="ir.actions.act_window">
            <field name="name">Billing Data</field>
            <field name="res_model">kw_billing_dashboard_port</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_ids" eval="[(5, 0, 0), (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_project.kw_billing_port_tree')}), (0, 0, {'view_mode': 'form', 'view_id': ref('kw_project.kw_billing_port_view_form')})]"/>
        </record>
        <menuitem name="Billing Data" id="menu_billing_new" parent="crm_v5_opp_debt_billing_menu" action="kw_billing_port_act_window" sequence="1"/>
    </data>
</odoo>