<?xml version="1.0"?>
<odoo>
    <record model="ir.ui.view" id="kw_recruitment_positions_tree">
        <field name="name">Recruitment calender Details</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="priority">8</field>
        <field name="arch" type="xml">
            <tree class="recruitment-calendar-tree" default_order='status asc' decoration-danger="status=='reject'"
                  decoration-info="status=='draft'">
                <field name="name" readonly="1" invisible="1"/>
                <field name="check_hod" readonly="1" invisible="1"/>
                <field name="code" readonly="1"/>
                <field name="fiscalyr" options="{'no_create': True,'no_open': True}"
                       attrs="{'readonly': [('status','in',['publish','reject'])]}" invisible="0"/>
                <field name="branch_id" attrs="{'readonly': [('status'	,'in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="dept_id"
                       attrs="{'readonly': ['|',('status','in',['publish','reject']),('check_hod','=',True)]}"
                       options="{'no_create': True,'no_open': True}" required="1"/>
                <field name="division"
                       attrs="{'invisible': [('dept_id','=', False)],'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="section"
                       attrs="{'invisible': [('division','=', False)],'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="practise"
                       attrs="{'invisible': [('section','=', False)],'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="designation" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="type_of_project" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="project" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="resource_type" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}"/>
                <field name="exp_year" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="qualification_ids" widget="many2many_tags"
                       attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="technology" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                       options="{'no_create': True,'no_open': True}" required="1"/>
                <field name="apr" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="may" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="jun" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="jul" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="aug" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="sep" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="octo" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="nov" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="dec" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="jan" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="feb" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="mar" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                <field name="total" sum="Total Resource" force_save="1" class="rc-total-resource"/>
                <field name="employee_id" readonly="1" options="{'no_create': True,'no_open': True}" invisible="0"/>
                <field name="pending_at" readonly='1'/>
                <field name="published_by" readonly='1'/>
                <field name="status" readonly="1"/>
                <field name="recruitment_calender_id" invisible="0"/>
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="kw_recruitment_positions_form">
        <field name="name">Recruitment calender Details</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="status" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name" readonly="1" invisible="1"/>
                            <field name="check_hod" readonly="1" invisible="1"/>
                            <field name="code" readonly="1"/>
                            <field name="fiscalyr" options="{'no_create': True,'no_open': True}"
                                   attrs="{'readonly': [('status','in',['publish','reject'])]}" invisible="0"/>
                            <field name="branch_id" attrs="{'readonly': [('status'	,'in',['publish','reject'])]}"
                                   options="{'no_create': True,'no_open': True}"/>
                            <field name="dept_id"
                                   attrs="{'readonly': ['|',('status','in',['publish','reject']),('check_hod','=',True)]}"
                                   options="{'no_create': True,'no_open': True}" required="1"/>
                            <field name="division"
                                   attrs="{'invisible': [('dept_id','=', False)],'readonly': [('status','in',['publish','reject'])]}"
                                   options="{'no_create': True,'no_open': True}"/>
                            <field name="section"
                                   attrs="{'invisible': [('division','=', False)],'readonly': [('status','in',['publish','reject'])]}"
                                   options="{'no_create': True,'no_open': True}"/>
                            <field name="practise"
                                   attrs="{'invisible': [('section','=', False)],'readonly': [('status','in',['publish','reject'])]}"
                                   options="{'no_create': True,'no_open': True}"/>
                            <field name="designation" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                                   options="{'no_create': True,'no_open': True}"/>
                        </group>
                        <group>

                                <field name="type_of_project"
                                       attrs="{'readonly': [('status','in',['publish','reject'])]}"
                                       options="{'no_create': True,'no_open': True}"/>
                                <field name="project" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                                       options="{'no_create': True,'no_open': True}"/>
                                <field name="resource_type" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                                       options="{'no_create': True,'no_open': True}"/>
                                <field name="exp_year" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                                <field name="qualification_ids" widget="many2many_tags"
									   options="{'no_create': True,'no_open': True}"
                                       attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
                                <field name="technology" attrs="{'readonly': [('status','in',['publish','reject'])]}"
                                       options="{'no_create': True,'no_open': True}" required="1"/>
                        </group>
                    </group>

                    <group>
						<group>
							<group>
								 <field name="apr" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="may" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="jun" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="jul" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="aug" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="sep" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
							</group>
							<group>
								<field name="octo" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="nov" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="dec" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="jan" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="feb" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="mar" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
								<field name="total" sum="Total Resource" force_save="1" class="rc-total-resource"/>
							</group>


                            <!-- <field name="employee_id" readonly="1" options="{'no_create': True,'no_open': True}" invisible="0"/> -->
                        </group>
                        <group>
                            <group>
                                <field name="pending_at" readonly='1'/>
                                <field name="published_by" readonly='1'/>
                                <!-- <field name="status" readonly="1"/> -->
                                <!-- <field name="recruitment_calender_id" invisible="0"/> -->
                            </group>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="kw_recruitment_positions_search_view" model="ir.ui.view">
        <field name="name">view.recruitment_positions.search</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="type">search</field>
        <field name="mode">primary</field>
        <!-- <field name="priority" eval="16" /> -->
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <search string="Recruitment Positions Search">
                <field name="fiscalyr" string="Current Fiscal Year"/>
                <field name="dept_id" string="Department"/>
                <field name="designation" string="Designation"/>
                <field name="technology" string="Technology"/>
                <field name="division" string="Division"/>
                <field name="section" string="Practise"/>
                <field name="practise" string="Section"/>
                <field name="resource_type" string="Resource type"/>
                <field name="type_of_project" string="Type of project"/>
                <field name="exp_year" string="Experience Year"/>
                <field name="published_by" string="Publsihed By"/>

                <filter string="Current Fiscal Year"
                        domain="['&amp;',('fiscalyr.date_start', '&lt;=',context_today().strftime('%Y-%m-%d')),('fiscalyr.date_stop', '&gt;=',context_today().strftime('%Y-%m-%d'))]"
                        name="fiscalyear"/>
                <separator/>
                <filter name="fresher"
                        string="Fresher"
                        domain="[('resource_type','=','fresher')]"/>

                <filter name="lateral"
                        string="Lateral"
                        domain="[('resource_type','=','lateral')]"/>
                <separator/>
                <filter name="draft"
                        string="Draft"
                        domain="[('status','=','draft')]"/>

                <filter name="publish"
                        string="Published"
                        domain="[('status','=','publish')]"/>

                <filter name="reject"
                        string="Rejected"
                        domain="[('status','=','reject')]"/>

                <group string="Group By">
                    <filter name="group_by_status" string="Status" domain="" context="{'group_by':'status'}"/>
                    <filter name="department_name" string="Department" domain="" context="{'group_by':'dept_id'}"/>
                    <filter name="job_name" string="Designation" domain="[]" context="{'group_by':'designation'}"/>
                </group>
            </search>
        </field>
    </record>

    <record model="ir.ui.view" id="kw_recruitment_positions_tree_group_inh">
        <field name="name">Recruitment calender Details</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="inherit_id" ref="kw_recruitment_positions_tree"/>
        <field name="groups_id" eval="[(6, 0, [ref('hr_recruitment.group_hr_recruitment_manager') ])]"/>
        <field name="arch" type="xml">
            <field name="employee_id" position="attributes">
                <attribute name="readonly">0</attribute>
            </field>
        </field>
    </record>

    <record id="recruitment_calender_views_pivot" model="ir.ui.view">
        <field name="name">recruitment.calender.views.pivot</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="arch" type="xml">
            <pivot>
                <field name="dept_id" type="col"/>
                <field name="technology" type="row"/>
            </pivot>
        </field>
    </record>

    <record id="budget_publish_confirmation_form" model="ir.ui.view">
        <field name="name">Publish Confirmation Form</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="priority">110</field>
        <field name="arch" type="xml">
            <form create="false" edit="false">
                <script>
                    $(document).ready(function(){
                    $(".modal-dialog").addClass('modal-md').removeClass('modal-lg');
                    });
                </script>
                <p style="line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                    <center>Are you sure you want to Publish?</center>
                </p>
                <footer class="text-center">
                    <button name="publish_plan" string="Yes" context="{'publish_plan_details':True}" type="object"
                            class="btn-success"/>
                    <button name="cancel" string="No" special="cancel" type="object" class="btn-danger"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="budget_reject_confirmation_form" model="ir.ui.view">
        <field name="name">Reject Confirmation Form</field>
        <field name="model">kw_recruitment_positions</field>
        <field name="priority">110</field>
        <field name="arch" type="xml">
            <form create="false" edit="false">
                <script>
                    $(document).ready(function(){
                    $(".modal-dialog").addClass('modal-md').removeClass('modal-lg');
                    });
                </script>
                <p style="line-height: 145%;margin: 10px 0 0 0;font-size: 17px;">
                    <center>Are you sure you want to Reject?</center>
                </p>
                <footer class="text-center">
                    <button name="reject_plan_action" string="Yes" context="{'reject_plan_details':True}" type="object"
                            class="btn-success"/>
                    <button name="cancel" string="No" special="cancel" type="object" class="btn-danger"/>
                </footer>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_kw_recruitment_positions">
        <field name="name">Recruitment Calendar</field>
        <field name="res_model">kw_recruitment_positions</field>
        <field name="view_mode">tree,form,search</field>
<!--        pivot,-->
        <field name="search_view_id" ref="kw_recruitment_positions_search_view"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_fiscalyear':1}</field>
        <field name="view_type">form</field>
    </record>

    <record id="hr_recruitment.menu_hr_recruitment_root" model="ir.ui.menu">
        <field name="groups_id" eval="[(4,ref('kw_recruitment_calendar.group_kw_calendar_user'))]"/>
    </record>
</odoo>
