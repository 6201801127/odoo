<?xml version="1.0"?>
<odoo>
	<record model="ir.ui.view" id="kw_recruitment_budget_lines_tree">
		<field name="name">Recruitment calender Details</field>
		<field name="model">kw_recruitment_budget_lines</field>
        <field name="priority">9</field>
		<field name="arch" type="xml">
            <tree editable="top" class="rc-budget" default_order='status,sort,department_sequence asc' decoration-info="status=='draft'" decoration-danger="status=='reject'" import="true">
				<!-- <field name="code"  readonly="1" options="{'no_create': True,'no_open': True}"/> -->
                <field name="name" readonly="1" string="Sequence"/>
				<!-- <field name="ref_code" readonly="0" /> -->
				<field name="mrf_id" invisible ="0" options="{'no_create': True,'no_open': True}" readonly='1'/>
				<field name="offer_id" invisible ="0" options="{'no_create': True,'no_open': True}" readonly='1'/>
				<field name="fiscalyr" invisible ="0" options="{'no_create': True,'no_open': True}" readonly='1'/>
				<field name="branch_id"  options="{'no_create': True,'no_open': True}"/>
				<field name="dept_id"  options="{'no_create': True,'no_open': True}" readonly="1"/>
				<field name="division"   options="{'no_create': True,'no_open': True}"/>
				<field name="section"    options="{'no_create': True,'no_open': True}"/>
				<field name="practise"    options="{'no_create': True,'no_open': True}"/>
				<field name="designation"  options="{'no_create': True,'no_open': True}" />
				<field name="type_of_project"   options="{'no_create': True,'no_open': True}" />
				<field name="project"   options="{'no_create': True,'no_open': True}" />
				<field name="resource_type"   options="{'no_create': True,'no_open': True}" />
				<field name="technology"   options="{'no_create': True,'no_open': True}"/>
				<field name="exp_year" />
				<field name="qualification_ids"  widget="many2many_tags"/>
                <field name="employee_id" readonly="1" options="{'no_create': True,'no_open': True}" invisible="1"/>
                <field name="resource" readonly="1"/>
				<field name="hiring_status"/>
				<field name="apr_budget"  attrs="{'readonly': ['|',('planned_month','!=','apr'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="may_budget" attrs="{'readonly': ['|',('planned_month','!=','may'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="jun_budget" attrs="{'readonly': ['|',('planned_month','!=','jun'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="jul_budget" attrs="{'readonly': ['|',('planned_month','!=','jul'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="aug_budget" attrs="{'readonly': ['|',('planned_month','!=','aug'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="sep_budget" attrs="{'readonly': ['|',('planned_month','!=','sep'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="octo_budget" attrs="{'readonly': ['|',('planned_month','!=','octo'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="nov_budget" attrs="{'readonly': ['|',('planned_month','!=','nov'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="dec_budget" attrs="{'readonly': ['|',('planned_month','!=','dec'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="jan_budget" attrs="{'readonly': ['|',('planned_month','!=','jan'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="feb_budget" attrs="{'readonly': ['|',('planned_month','!=','feb'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="mar_budget" attrs="{'readonly': ['|',('planned_month','!=','mar'),('status','=','publish')]}" force_save="1" widget='monetary'/>
				<field name="planned_month" invisible="1"/>
				<field name="total_budget" invisible="0" string="Total [Planned]" sum="Total [Planned]" widget="monetary" force_save="1"/>
				<field name="resource_joined" options="{'no_create': True,'no_open': True}" attrs="{'readonly': [('status','=','draft')]}"/>
				<field name="resource_tobe_joined" options="{'no_create': True,'no_open': True}" readonly='1'/>
				<field name="total_incurred" readonly="1" force_save="1" sum='Total incurred'/>
				<field name="total_remaining" readonly="1" sum="Total Remaining" widget="monetary" force_save="1"/>
				<field name="status" readonly="1"/>
				<!-- <button name="call_publish_method" confirm="Are you sure to Publish ?" string="Publish" type="object" attrs="{'invisible': [('status','not in',['draft'])]}" icon="fa-check text-success" groups="kw_recruitment.group_hr_recruitment_accounts" />
				<button name="reject_plan" confirm="Are you sure to Reject ?" string="Decline" type="object" attrs="{'invisible': [('status','not in',['draft'])]}" icon="fa-ban text-danger" groups="kw_recruitment.group_hr_recruitment_accounts" /> -->
				<field name="department_sequence" invisible='1'/>
			</tree>
		</field>
	</record>

	

	<record id="kw_recruitment_budget_lines_search" model="ir.ui.view">
		<field name="name">Recruitment calender Search Details </field>
		<field name="model">kw_recruitment_budget_lines</field>
		<field name="arch" type="xml">
			<search>
				<field name="fiscalyr"/>
				<field name="dept_id"/>
				<field name="division"/>
				<field name="section"/>
				<field name="practise"/>
				<field name="designation"/>
				<field name="project"/>
				<field name="type_of_project"/>
				<field name="resource_type"/>
				<field name="technology"/>
				<field name="branch_id"/>
				<field name="exp_year" string="Experience Year" />
				<field name="published_by" string="Publsihed By" />
				<separator/>
				<filter name="fiscalyr_filter" string="Current Fiscal Year" 
				domain="['&amp;',('fiscalyr.date_start', '&lt;=',context_today().strftime('%Y-%m-%d')),('fiscalyr.date_stop', '&gt;=',context_today().strftime('%Y-%m-%d'))]"
				context="{}" readonly="1"/>
				
				<separator/>	
				<filter string="January" domain="[('month','=',1)]" name="jan"/>
				<filter string="February" domain="[('month','=',2)]" name="feb"/>
				<filter string="March" domain="[('month','=',3)]" name="mar"/>
				<filter string="April" domain="[('month','=',4)]" name="apr"/>
				<filter string="May" domain="[('month','=',5)]" name="may"/>
				<filter string="June" domain="[('month','=',6)]" name="jun"/>
				<filter string="July" domain="[('month','=',7)]" name="jul"/>
				<filter string="August" domain="[('month','=',8)]" name="aug"/>
				<filter string="September" domain="[('month','=',9)]" name="sep"/>
				<filter string="October" domain="[('month','=',10)]" name="oct"/>
				<filter string="November" domain="[('month','=',11)]" name="nov"/>
				<filter string="December" domain="[('month','=',12)]" name="dec"/> 
				<filter name="fresher"
						string="Fresher"
						domain="[('resource_type','=','fresher')]" />
						
				<filter name="lateral"
						string="Lateral"
						domain="[('resource_type','=','lateral')]" />
							
				<filter name="draft"
						string="Draft"
						domain="[('status','=','draft')]" />

				<filter name="publish"
						string="Published"
						domain="[('status','=','publish')]" />

				<filter name="reject"
						string="Rejected"
						domain="[('status','=','reject')]" />
				<separator/>
				<group string="Group By">
					<filter name="department_name" string="Department" domain="" context="{'group_by':'dept_id'}"/>
					<filter name="job_name" string="Designation" domain="[]" context="{'group_by':'designation'}"/>
					<filter name="group_by_status" string="Status" domain="" context="{'group_by':'status'}"/>
				</group>
			</search>
		</field>
	</record>
	<record id="recruitment_budget_add" model="ir.ui.view">
        <field name="name">Recruitment Budget Add</field>
        <field name="model">kw_recruitment_requisition</field>
        <field name="inherit_id" ref="kw_recruitment.view_manpower_requisition_form_form"/>
        <field name="arch" type="xml">
        <xpath expr="//group/group/field[@name='max_sal']" position="after">
            <field name="budget_id" force_save='1' options="{'no_create': True,'no_open': True}" invisible='1'
			 attrs="{'invisible':['|',('resource','=','replacement'),('type_project','=','work')],'readonly':True}"
			groups='hr_recruitment.group_hr_recruitment_manager,kw_recruitment.group_tag_budget_user,kw_resource_management.group_budget_manager,kw_wfh.group_hr_hod'>
				<tree>
					<field name="name" style="pointer-events:none;" string='Budget Code'/>
					<field name="fiscalyr" style="pointer-events:none;"/>
					<field name="dept_id" style="pointer-events:none;"/>
					<field name="designation" style="pointer-events:none;"/>
					<field name="technology" style="pointer-events:none;"/>
					<field name="exp_year" style="pointer-events:none;"/>
					<field name="mar_budget" style="pointer-events:none;" string='Amount'/>
				</tree>
			</field>
        </xpath>
        </field>
    </record>

	<record model="ir.actions.act_window" id="action_kw_recruitment_budget_lines">
		<field name="name">All Budget</field>
		<field name="res_model">kw_recruitment_budget_lines</field>
		<field name="view_mode">tree,search</field>
		<field name="domain">[]</field>
		<field name="context">{'search_default_fiscalyr_filter':1}</field>
		<field name="search_view_id" ref="kw_recruitment_budget_lines_search"/>
		<field name="view_type">form</field>
		<field name="view_id" ref ="kw_recruitment_budget_lines_tree"/>
	</record>


	


</odoo>
