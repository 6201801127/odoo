<?xml version="1.0"?>
<odoo>
	<record model="ir.ui.view" id="kw_recruitment_calendar_take_action_tree">
		<field name="name">Recruitment calender Details</field>
		<field name="model">kw_recruitment_positions</field>
        <field name="priority">8</field>
		<field name="arch" type="xml">
			<tree editable='bottom' create='false' import='false'  class="recruitment-calendar-tree" default_order='status asc' decoration-danger="status=='reject'" decoration-info="status=='draft'">
				<field name="name" readonly="1" invisible="1"/>
				<field name="check_hod" readonly="1" invisible="1"/>
				<field name="code" readonly="1"/>
				<field name="fiscalyr" options="{'no_create': True,'no_open': True}" attrs="{'readonly': [('status','in',['publish','reject'])]}" invisible="0"/>
				<field name="branch_id" attrs="{'readonly': [('status'	,'in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="dept_id"   attrs="{'readonly': ['|',('status','in',['publish','reject']),('check_hod','=',True)]}" options="{'no_create': True,'no_open': True}" required="1"/>
				<field name="division"  attrs="{'invisible': [('dept_id','=', False)],'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="section"   attrs="{'invisible': [('division','=', False)],'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="practise"  attrs="{'invisible': [('section','=', False)],'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}" />
				<field name="designation"  attrs="{'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="type_of_project"  attrs="{'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="project"  attrs="{'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="resource_type"  attrs="{'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}"/>
				<field name="exp_year" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="qualification_ids" widget="many2many_tags" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="technology"  attrs="{'readonly': [('status','in',['publish','reject'])]}" options="{'no_create': True,'no_open': True}" required="1"/>
				<field name="apr"  attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="may" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="jun" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="jul" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="aug" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="sep" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="octo" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="nov" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="dec" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="jan" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="feb" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="mar" attrs="{'readonly': [('status','in',['publish','reject'])]}"/>
				<field name="total" sum="Total Resource" force_save="1" class="rc-total-resource"/>
				<field name="employee_id" readonly="1" options="{'no_create': True,'no_open': True}" invisible="0"/>
				<field name="pending_at" readonly='1'/>
				<field name="published_by" readonly='1'/>
				<field name="status" readonly="1"/>
<!--				<button name="draft_plan" string="Save as Draft" type="object" attrs="{'invisible': [('status','in',['publish'])]}" class="oe_highlight"/>-->
				<button name="call_publish_method" confirm="Are you sure to Publish ?" string="Publish" type="object" attrs="{'invisible': [('status','not in',['draft'])]}" icon="fa-check text-success" groups="kw_recruitment.group_tag_budget_user,kw_resource_management.group_budget_manager"/>
				<button name="reject_plan" confirm="Are you sure to Decline ?" string="Decline" type="object" attrs="{'invisible': [('status','not in',['draft'])]}" icon="fa-ban text-danger" groups="kw_recruitment.group_tag_budget_user,kw_resource_management.group_budget_manager">
				</button>
			</tree>
		</field>
	</record>

	
	<record model="ir.ui.view" id="kw_recruitment_positions_tree_group_inherited">
		<field name="name">Recruitment calender Details</field>
		<field name="model">kw_recruitment_positions</field>
		<field name="inherit_id" ref="kw_recruitment_positions_tree" />
        <field name="groups_id" eval="[(6, 0, [ref('hr_recruitment.group_hr_recruitment_manager') ])]" />
		<field name="arch" type="xml">
			<field name="employee_id" position="attributes">
                   <attribute name="readonly">0</attribute>
                </field>
		</field>
	</record>


	<record model="ir.actions.act_window" id="action_kw_recruitment_positions_take_action">
		<field name="name">Recruitment Calendar</field>
		<field name="res_model">kw_recruitment_positions</field>
		<field name="view_mode">tree</field>
		<field name="domain">[('status','=','draft')]</field>
		<field name="view_type">form</field>
		<field name="view_id" ref ="kw_recruitment_calendar_take_action_tree"/>

	</record>

</odoo>
