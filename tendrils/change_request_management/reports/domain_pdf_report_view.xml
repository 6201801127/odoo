<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="paper_format_domain_billing_pdf_report" model="report.paperformat">
        <field name="name">Domain Bill Report</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">4</field>
        <field name="margin_bottom">4</field>
        <field name="margin_left">2</field>
        <field name="margin_right">2</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">80</field>
    </record>

    <!-- Month WISE REPORT TEMPLATE -->
    <template id="report_monthly_domain_bill_view">
        <t t-call="web.html_container">
            <t t-call="web.external_layout" t-lang="hi_IN">
                <h4 class="text-center mt-2">
                    <b>DOMAIN BILLING INFORMATION</b>
                </h4>

                <p class="text-right" style="font-size: 12px;">
                    <b>Bill Date:-</b>
                    <t t-set="min_date" t-value="docs[0].dt_start.strftime('%d-%b-%Y')"/>
                    <t t-set="max_date" t-value="docs[0].dt_stop.strftime('%d-%b-%Y')"/>
                    <b>
                        <t t-esc="'{} To {}'.format(min_date, max_date)"/>
                    </b>
                </p>

                <table class="table table-sm table-bordered" style="width: 100%; border-collapse: collapse; font-size: 14px;" cellpadding="5" cellspacing="0">
                    <thead style="background-color: #f2f2f2;">
                        <tr style="height: 30px; ">
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Sl.No
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Accounting Head
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                April
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                May
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                June
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                July
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                August
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                September
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                October
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                November
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                December
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                January
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                February
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                March
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Total
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="column_index" t-value="1"/>
                        <t t-foreach="docs" t-as="o">

                            <tr style="height: 30px;">
                                <td style="border: 1px solid #dddddd; text-align: center; padding-left: 2px; vertical-align: middle;">
                                    <t t-esc="column_index"/>
                                    <t t-set="column_index" t-value="column_index + 1"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    <span t-field="o.account_head_id"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_apr != 0.00" t-esc="'{0:,.2f}'.format(o.bill_apr)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_may != 0.00" t-esc="'{0:,.2f}'.format(o.bill_may)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_jun != 0.00" t-esc="'{0:,.2f}'.format(o.bill_jun)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_jul != 0.00" t-esc="'{0:,.2f}'.format(o.bill_jul)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_aug != 0.00" t-esc="'{0:,.2f}'.format(o.bill_aug)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_sep != 0.00" t-esc="'{0:,.2f}'.format(o.bill_sep)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_oct != 0.00" t-esc="'{0:,.2f}'.format(o.bill_oct)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_nov != 0.00" t-esc="'{0:,.2f}'.format(o.bill_nov)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_dec != 0.00" t-esc="'{0:,.2f}'.format(o.bill_dec)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_jan != 0.00" t-esc="'{0:,.2f}'.format(o.bill_jan)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_feb != 0.00" t-esc="'{0:,.2f}'.format(o.bill_feb)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.bill_mar != 0.00" t-esc="'{0:,.2f}'.format(o.bill_mar)"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; font-weight: bold; padding-right: 2px; vertical-align: middle;">
                                    <t t-if="o.total_bill != 0.00" t-esc="'{0:,.2f}'.format(o.total_bill)"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                    <tfoot style="border: 1px solid #dddddd;">
                        <tr>
                            <td style="border: 1px solid #dddddd; "></td>
                            <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; font-weight: bold;">
                                Total
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_apr'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_apr'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_may'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_may'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_jun'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_jun'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_jul'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_jul'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_aug'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_aug'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_sep'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_sep'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_oct'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_oct'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_nov'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_nov'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_dec'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_dec'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_jan'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_jan'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_feb'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_feb'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['bill_mar'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['bill_mar'] for record in docs))"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; padding-right: 2px; text-align: right;">
                                <b>
                                    <t t-if="sum(record['total_bill'] for record in docs) != 0.0"
                                       t-esc="'{0:,.2f}'.format(sum(record['total_bill'] for record in docs))"/>
                                </b>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </t>
        </t>
    </template>
    <report string="Monthly Report"
            id="bill_monthly_pdf_report"
            model="monthly_billing_data_report_new"
            report_type="qweb-pdf"
            attachment_use="True"
            name="change_request_management.report_monthly_domain_bill_view"
            file="change_request_management.report_monthly_domain_bill_view"
            paperformat="change_request_management.paper_format_domain_billing_pdf_report"
            print_report_name="Monthly Billing Report"/>

    <!-- BILL WISE REPORT TEMPLATE -->
    <template id="report_domain_bill_wise_view">
        <t t-call="web.html_container">
            <t t-call="web.external_layout" t-lang="hi_IN">
                <h4 class="text-center">
                    <b>DOMAIN BILLING INFORMATION</b>
                </h4>

                <p class="text-center">
                    <b>BILL WISE</b>
                </p>

                <p class="text-right" style="font-size: 12px;">
                    <b>Bill Date:-</b>
                    <t t-set="min_date" t-value="docs[0].dt_start.strftime('%d-%b-%Y')"/>
                    <t t-set="max_date" t-value="docs[0].dt_stop.strftime('%d-%b-%Y')"/>
                    <b>
                        <t t-esc="'{} To {}'.format(min_date, max_date)"/>
                    </b>
                </p>

                <table class="table table-sm table-bordered" style="width: 100%; border-collapse: collapse; font-size: 14px;" cellpadding="5" cellspacing="0">
                    <thead style="background-color: #f2f2f2;">
                        <tr>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Sl.No
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Bill No.
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Bill Date
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Domain Name
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Account Head
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Billed Amount
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Discount
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Approved Amount
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="column_index" t-value="1"/>
                        <t t-set="bill_no" t-value=""/>
                        <t t-set="billed_amount" t-value="0"/>
                        <t t-set="discount" t-value="0"/>
                        <t t-set="approved_amount" t-value="0"/>
                        <t t-set="reports" t-value="docs.sorted(key=lambda r: r.bill_no)"/>

                        <t t-foreach="reports" t-as="o">

                            <t t-if="o.bill_no != bill_no">
                                <t t-if="approved_amount > 0">
                                    <tr>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;" colspan="5">Total</td>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                            <t t-esc="'{0:,.2f}'.format(billed_amount)"/>
                                        </td>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                            <t t-esc="'{0:,.2f}'.format(discount)"/>
                                        </td>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                            <t t-esc="'{0:,.2f}'.format(approved_amount)"/>
                                        </td>
                                    </tr>
                                </t>
                                <tr>
                                    <t t-set="bill_no" t-value="o.bill_no"/>
                                    <t t-set="billed_amount" t-value="o.billed_amount"/>
                                    <t t-set="discount" t-value="o.discount"/>
                                    <t t-set="approved_amount" t-value="o.approved_amount"/>

                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <t t-esc="column_index"/>
                                        <t t-set="column_index" t-value="column_index + 1"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.bill_no"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.order_date"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.domain_name"/>
                                    </td>
                                     <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.account_head_id"/>
                                    </td>

                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.billed_amount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.discount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.approved_amount"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-else="">
                                <tr>
                                    <t t-set="billed_amount" t-value="billed_amount + o.billed_amount"/>
                                    <t t-set="discount" t-value="discount + o.discount"/>
                                    <t t-set="approved_amount" t-value="approved_amount + o.approved_amount"/>

                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">

                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">

                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">

                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.domain_name"/>
                                    </td>
                                     <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.account_head_id"/>
                                    </td>

                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.billed_amount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.discount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.approved_amount"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-if="o_last">
                                <tr>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;" colspan="5">Total</td>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                        <t t-esc="'{0:,.2f}'.format(billed_amount)"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                        <t t-esc="'{0:,.2f}'.format(discount)"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                        <t t-esc="'{0:,.2f}'.format(approved_amount)"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>

                    <tfoot>
                        <tr>
                            <td style="border: 1px solid #dddddd; font-weight: bold; text-align: right; padding-right: 2px;" colspan="5">
                                Grand Total
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="billed_amount_total" t-value="sum(record['billed_amount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(billed_amount_total)"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="discount_total" t-value="sum(record['discount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(discount_total)"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="approved_amount_total" t-value="sum(record['approved_amount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(approved_amount_total)"/>
                                </b>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </t>
        </t>
    </template>
    <report string="Bill Wise Report"
            id="bill_wise_pdf_report"
            model="domain_wise_data_report"
            report_type="qweb-pdf"
            attachment_use="True"
            name="change_request_management.report_domain_bill_wise_view"
            file="change_request_management.report_domain_bill_wise_view"
            paperformat="change_request_management.paper_format_domain_billing_pdf_report"
            print_report_name="Bill Wise Report"/>

    <!-- DOMAIN WISE REPORT TEMPLATE -->
    <template id="report_domain_wise_view">
        <t t-call="web.html_container">
            <t t-call="web.external_layout" t-lang="hi_IN">
                <h4 class="text-center">
                    <b>DOMAIN BILLING INFORMATION</b>
                </h4>

                <p class="text-center">
                    <b>DOMAIN WISE</b>
                </p>

                <p class="text-right" style="font-size: 12px;">
                    <b>Bill Date:-</b>
                    <t t-set="min_date" t-value="docs[0].dt_start.strftime('%d-%b-%Y')"/>
                    <t t-set="max_date" t-value="docs[0].dt_stop.strftime('%d-%b-%Y')"/>
                    <b>
                        <t t-esc="'{} To {}'.format(min_date, max_date)"/>
                    </b>
                </p>

                <table class="table table-sm table-bordered" style="width: 100%; border-collapse: collapse; font-size: 14px;" cellpadding="5" cellspacing="0">
                    <thead style="background-color: #f2f2f2;">
                        <tr>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Sl.No
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Domain Name
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Account Head
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Bill No.
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Bill Date
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Billed Amount
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Discount
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Approved Amount
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="column_index" t-value="1"/>
                        <t t-set="domain_name" t-value=""/>
                        <t t-set="billed_amount" t-value="0"/>
                        <t t-set="discount" t-value="0"/>
                        <t t-set="approved_amount" t-value="0"/>
                        <t t-set="reports" t-value="docs.sorted(key=lambda r: r.domain_name)"/>

                        <t t-foreach="reports" t-as="o">
                            <t t-if="o.domain_name != domain_name">
                                <t t-if="approved_amount > 0">
                                    <tr>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;" colspan="5">Total</td>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                            <t t-esc="'{0:,.2f}'.format(billed_amount)"/>
                                        </td>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                            <t t-esc="'{0:,.2f}'.format(discount)"/>
                                        </td>
                                        <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                            <t t-esc="'{0:,.2f}'.format(approved_amount)"/>
                                        </td>
                                    </tr>
                                </t>
                                <tr>
                                    <t t-set="domain_name" t-value="o.domain_name"/>
                                    <t t-set="billed_amount" t-value="o.billed_amount"/>
                                    <t t-set="discount" t-value="o.discount"/>
                                    <t t-set="approved_amount" t-value="o.approved_amount"/>

                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <t t-esc="column_index"/>
                                        <t t-set="column_index" t-value="column_index + 1"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.domain_name"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.account_head_id"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.bill_no"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.order_date"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.billed_amount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.discount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.approved_amount"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-else="">
                                <t t-set="billed_amount" t-value="billed_amount + o.billed_amount"/>
                                <t t-set="discount" t-value="discount + o.discount"/>
                                <t t-set="approved_amount" t-value="approved_amount + o.approved_amount"/>

                                <tr>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.account_head_id"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.bill_no"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                        <span t-field="o.order_date"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.billed_amount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.discount"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                        <span t-field="o.approved_amount"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-if="o_last">
                                <tr>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;" colspan="5">Total</td>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                        <t t-esc="'{0:,.2f}'.format(billed_amount)"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                        <t t-esc="'{0:,.2f}'.format(discount)"/>
                                    </td>
                                    <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; font-weight: bold;">
                                        <t t-esc="'{0:,.2f}'.format(approved_amount)"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td style="border: 1px solid #dddddd; font-weight: bold; text-align: right; padding-right: 2px;" colspan="5">
                                Grand Total
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="billed_amount_total" t-value="sum(record['billed_amount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(billed_amount_total)"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="discount_total" t-value="sum(record['discount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(discount_total)"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="approved_amount_total" t-value="sum(record['approved_amount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(approved_amount_total)"/>
                                </b>
                            </td>
                        </tr>
                    </tfoot>
                </table>

            </t>
        </t>
    </template>
    <report string="Domain Wise Report"
            id="domain_wise_pdf_report"
            model="domain_wise_data_report"
            report_type="qweb-pdf"
            attachment_use="True"
            name="change_request_management.report_domain_wise_view"
            file="change_request_management.report_domain_wise_view"
            paperformat="change_request_management.paper_format_domain_billing_pdf_report"
            print_report_name="Domain Wise Report"/>

    <!-- DOMAIN BILL GENERAL REPORT TEMPLATE -->
    <template id="report_domain_bill_general_view">
        <t t-call="web.html_container">
            <t t-call="web.external_layout" t-lang="hi_IN">
                <h4 class="text-center">
                    <b>DOMAIN BILLING INFORMATION</b>
                </h4>

                <p class="text-right" style="font-size: 12px;">
                    <b>Bill Date:-</b>
                    <t t-set="min_date" t-value="docs[0].dt_start.strftime('%d-%b-%Y')"/>
                    <t t-set="max_date" t-value="docs[0].dt_stop.strftime('%d-%b-%Y')"/>
                    <b>
                        <t t-esc="'{} To {}'.format(min_date, max_date)"/>
                    </b>
                </p>

                <table class="table table-sm table-bordered" style="width: 100%; border-collapse: collapse; font-size: 14px;" cellpadding="5" cellspacing="0">
                    <thead style="background-color: #f2f2f2;">
                        <tr>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Sl.No
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Domain Name
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Account Head
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Bill No.
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Bill Date
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Billed Amount
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Discount
                            </th>
                            <th style="border: 1px solid #dddddd; text-align: left; white-space: nowrap; vertical-align: middle; padding-left: 2px;">
                                Approved Amount
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="column_index" t-value="1"/>
                        <t t-foreach="docs" t-as="o">
                            <tr>
                                <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    <t t-esc="column_index"/>
                                    <t t-set="column_index" t-value="column_index + 1"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    <span t-field="o.domain_name"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    <span t-field="o.account_head_id"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    <span t-field="o.bill_no"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: left; padding-left: 2px; vertical-align: middle;">
                                    <span t-field="o.order_date"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <span t-field="o.billed_amount"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <span t-field="o.discount"/>
                                </td>
                                <td style="border: 1px solid #dddddd; text-align: right; padding-right: 2px; vertical-align: middle;">
                                    <span t-field="o.approved_amount"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td style="border: 1px solid #dddddd; font-weight: bold; text-align: right; padding-right: 2px;" colspan="5">
                                 Total
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="billed_amount_total" t-value="sum(record['billed_amount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(billed_amount_total)"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="discount_total" t-value="sum(record['discount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(discount_total)"/>
                                </b>
                            </td>
                            <td style="border: 1px solid #dddddd; vertical-align: middle; text-align: right; padding-right: 2px;">
                                <b>
                                    <t t-set="approved_amount_total" t-value="sum(record['approved_amount'] for record in docs)"/>
                                    <t t-esc="'{0:,.2f}'.format(approved_amount_total)"/>
                                </b>
                            </td>
                        </tr>
                    </tfoot>
                </table>

            </t>
        </t>
    </template>
    <report string="General Report"
            id="domain_bill_general_pdf_report"
            model="domain_wise_data_report"
            report_type="qweb-pdf"
            attachment_use="True"
            name="change_request_management.report_domain_bill_general_view"
            file="change_request_management.report_domain_bill_general_view"
            paperformat="change_request_management.paper_format_domain_billing_pdf_report"
            print_report_name="Domain Bill General Report"/>

</odoo>