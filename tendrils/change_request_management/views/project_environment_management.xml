<odoo>
    <data>
        <!-- explicit list view definition -->
        <record id="kw_project_environment_management_form" model="ir.ui.view">
            <field name="name">kw_project_environment_management form</field>
            <field name="model">kw_project_environment_management</field>
            <field name="arch" type="xml">
                <form duplicate='0'>
                    <sheet>
                        <group>
                            <group>
                                <field name="project_id" options="{'no_open': True, 'no_create': True, 'no_edit': True}"
                                       required="1"/>
                                <!-- <field name="environment_ids" widget="many2many_tags" required="1" options="{'no_open': True, 'no_create': True, 'no_edit': True}"/> -->
                                <field name="project_code"/>
                            </group>
                        </group>
                        <group>
                            <group >
                                <field name="project_manager_id" 
                                 
                                 options="{'no_open': True, 'no_create': True, 'no_edit': True}"/>
                                <field name="employee_ids" widget='many2many_tags' required='1' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="server_admin" widget='many2many_tags' options="{'no_open': True, 'no_create': True, 'no_edit': True}"/>
                                <field name="testing_lead_id" options="{'no_open': True, 'no_create': True, 'no_edit': True}" widget="many2many_tags"/>
                                <field name="database_admin_id" options="{'no_open': True, 'no_create': True, 'no_edit': True}"/>
                                <field name="skip_pm_approval"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="Environment" string="Environment">
                                <field name="environment_sequence_ids" context="{'default_project_id': project_id}">
                                    <tree editable="bottom" delete='true'>
                                        <field name="project_id"
                                               options="{'no_open': True, 'no_create': True, 'no_edit': True}"
                                               required="1" readonly='1' force_save="1"/>
                                        <field name="environment_id"
                                               options="{'no_open': True, 'no_create': True, 'no_edit': True}"
                                               required="1"/>
                                        <field name="cr_sequence"/>
                                        <field name="service_sequence"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="kw_project_environment_management_list">
            <field name="name">kw_project_environment_management list</field>
            <field name="model">kw_project_environment_management</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="project_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <!-- <field name="environment_ids" widget='many2many_tags'/> -->
                    <field name="project_code"/>
                    <field name="employee_ids" widget='many2many_tags'/>

                    <field name="environment_sequence_ids" widget='many2many_tags'/>
                    <field name="server_admin" widget='many2many_tags'></field>
                    <field name="testing_lead_id" widget="many2many_tags"></field>
                    <field name="database_admin_id"></field>
                    <!-- <field name="skip_pm_approval"/> -->
                    <field name="active" widget="boolean_toggle"></field>

                </tree>
            </field>
        </record>

        <record id="project_environment_management_search_view" model="ir.ui.view">
            <field name="name">project_environment_management_search</field>
            <field name="model">kw_project_environment_management</field>
            <field name="type">search</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="arch" type="xml">
                <search string="Environment Search">
                     <field name="project_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="project_manager_id"/>
                    <!-- <field name="employee_ids"/> -->
                    <field name="server_admin"></field>
                    <field name="testing_lead_id" widget="many2many_tags"></field>
                    <field name="database_admin_id"></field>
                    <filter string="Active" domain="[('active', '=',True)]" name="enable_project_environment"/>
                    <filter string="Inactive" domain="[('active', '=',False)]" name="disable_project_environment"/>
                </search>
            </field>
        </record>

        <!-- actions opening views on models -->
        <record model="ir.actions.act_window" id="kw_project_environment_management_action">
            <field name="name">Project Environment Management</field>
            <field name="res_model">kw_project_environment_management</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem name="Project Environment Management"
                  id="kw_project_environment_management_menu"
                  parent='kw_environment_master_root_menu'
                  action='kw_project_environment_management_action'
                  sequence="2"/>

    </data>
</odoo>
