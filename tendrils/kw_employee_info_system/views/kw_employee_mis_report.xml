<odoo>
	<data>
		<record id="kw_mis_manager_employee_list_tree" model="ir.ui.view">
			<field name="name">Manager List</field>
			<field name="model">hr.employee.mis.report</field>
			<field name="priority" eval="60"/>
			<field name="arch" type="xml">
				<tree create="false" import="false" decoration-danger="active_display == 'Inactive'">
					<field name="employement_type"/>
					<field name="emp_role"/>
					<field name="emp_category"/>
					<field name="job_branch_id"/>
					<field name="sbu_master_id"/>
					<field name="department_id"/>
					<field name="division"/>
					<field name="section"/>
					<field name="practise"/>

					<field name="budget_type"/>
					<field name="emp_project_id"/>
					<field name="start_date"/>
					<field name="end_date"/>

					<field name="joining_type"/>
					<field name="emp_code"/>
					<field name="name" class="font-weight-bold"/>

					<field name="job_id"/>
					<field name="date_of_joining"/>
					<field name="emp_ph"></field>
					<field name="emp_mail"></field>
					<field name="date_of_exit"/>
					
					<field name="grade" invisible="context.get('manager', False)==False" groups='hr.group_hr_manager,kw_employee.group_payroll_manager'/>
					<field name="emp_band" invisible="context.get('manager', False)==False" groups='hr.group_hr_manager,kw_employee.group_payroll_manager'/>
					<field name="emp_level"/>
					<field name="location"/>
					<field name="company_id"/>
					<field name="contract_ctc" string="CTC" invisible="context.get('manager', False)==False" groups='kw_employee.group_payroll_manager'/>
					<field name="edu_qualification"/>
					<field name="previous_company_display" invisible="context.get('manager', False)==False"/>
					<field name="csm_experience_display"/>
					<field name="previous_company_experience_display_abbr"/>
					<field name="total_experience_display"/>
					<field name="emp_refered" invisible="context.get('manager', False)==False" groups='kw_employee.group_payroll_manager'/>
					<field name="refered_by" force_save="1" invisible="context.get('manager', False)==False" groups='kw_employee.group_payroll_manager'/>
					<field name="resource_calendar_id"/>
					<field name="parent_id"/>
					<field name="date_of_completed_probation"/>
					<field name="birthday" invisible="context.get('manager', False)==False" groups='kw_employee.group_payroll_manager'/>
					<field name="gender"/>
					<field name="emp_religion"/>
					<field name="blood_group"/>
					<field name="marital_sts" invisible="context.get('manager', False)==False"/>
					<field name="address" invisible="context.get('manager', False)==False"/>
					<field name="active_display" invisible="context.get('manager', False)==False"/>
					<field name="primary_skill_id"/>
					<field name="certification"/>
					<field name="total_experience_in_year"/>
					<field name="active_rec"/>
					<!-- <field name="project_boolean" invisible='0'/> -->

				</tree>
			</field>
		</record>

		<record id="kw_mis_manager_search_view" model="ir.ui.view">
			<field name="model">hr.employee.mis.report</field>
			<field name="priority">200</field>
			<field name="arch" type="xml">
				<search>
					<field name="name" string="Employees" filter_domain="[('name','ilike',self)]"/>
					<field name="employement_type"/>
					<field name="emp_role"/>
					<field name="budget_type"/>
					<field name="emp_category"/>
					<field name="job_branch_id" string="Work Location"/>
					<field name="department_id"/>
					<field name="division" string="Division"/>
					<field name="section" string="Practise"/>
					<field name="practise" string="Section"/>
					<field name="sbu_master_id"/>
					<!-- <field name="project_name" string="Project Name"/> -->
					<!-- <field name="emp_project_id"/>
					<field name="start_date"/>
					<field name="end_date"/> -->
					<field name="job_id" string='Designation'/>
					<field name="emp_code" string="Employee Code"/>
					<field name="gender" string="Gender"/>
					<field name="grade" string="Grade"/>
					<field name="emp_band" string="Band"/>
					<field name="parent_id" string="RA"/>
					<field name="emp_refered" string="Reference Mode"/>
					<field name="emp_religion"/>
					<field name="blood_group"/>
					<field name="resource_calendar_id" string="Shift"/>
					<field name="date_of_joining" string="Joining Date"/>
					<!-- <field name="last_working_day" string="Last Working Day"/> -->
					<!-- <field name="csm_experience_display_abbr" string="CSM Experience"/> -->
					<!-- <field name="total_experience_display_abbr" string="Total Experience"/> -->
					<field name="edu_qualification" string='Educational Qualification'/>
					<field name="primary_skill_id" string="Primary Skill"/>
					<field name="certification" string="Certification" />
					<field name="date_of_completed_probation" string="Probation Complete Date" invisible="context.get('management', False)"/>
					<field name="birthday" string="Birth Date"/>
					<!-- <field name="skill_id" string="Additional Skill"/> -->

					<!-- search view filters -->
					<filter name="employement_type" string="FTE" domain="[('employement_type.code','=','P')]"/>
					<filter name="employement_type" string="RET" domain="[('employement_type.code','in',['S','C'])]"/>
					<filter name="employement_type" string="Contractual" domain="[('employement_type.code','=','CE')]"/>

					<separator/>
					<filter name="budget_type" string="Treasury Budget" domain="[('budget_type','=','treasury')]"/>
					<filter name="budget_type" string="Project Budget" domain="[('budget_type','=','project')]"/>

					<separator/>
					<filter name="project_yes" string="Project Yes" domain="[('emp_project_id','!=',False)]"/>
					<filter name="project_no" string="Project No" domain="[('emp_project_id','=',False)]"/>

					<separator/>
					<filter name="location" string="WFA" domain="[('location','=','wfa')]"/>
					<filter name="location" string="Onsite" domain="[('location','=','onsite')]"/>
					<filter name="location" string="Offsite" domain="[('location','=','offsite')]"/>


					<separator/>
					<filter name="date_of_joining" string="Joining Date: Last 30 Days" domain="[('date_of_joining', '&gt;', (context_today()-relativedelta(days=30)).strftime('%Y-%m-%d'))]" />
					<filter name="date_of_joining" string="Joining Date: Last 45 Days" domain="[('date_of_joining', '&gt;', (context_today()-relativedelta(days=45)).strftime('%Y-%m-%d'))]" />
					<filter name="date_of_joining_last60_days" string="Joining Date: Last 60 Days" domain="[('date_of_joining', '&gt;', (context_today()-relativedelta(days=60)).strftime('%Y-%m-%d'))]" />

					<filter string="Active" name="active_employees" domain="[('active_rec','=',True)]"/>
					<filter string="Resigners" name="resigned_employees" domain="[('active_rec','=',False)]"/>


					<group expand="1" string="Group By"/>

					<filter name="group_by_department" string="Department" domain="[]" context="{'group_by':'department_id'}"/>
					<filter name="group_by_parent_id" string="Administrative Authority" domain="[]" context="{'group_by':'parent_id'}"/>
					<filter name="group_by_location" string="Location" domain="[]" context="{'group_by':'job_branch_id'}"/>
					<filter name="group_by_gender" string="Gender" domain="[]" context="{'group_by':'gender'}"/>
					<filter name="group_by_job_id" string="Designation" domain="[]" context="{'group_by':'job_id'}"/>


				</search>
			</field>
		</record>
		
		<record id="kw_mis_manager_employees_actions" model="ir.actions.act_window">
			<field name="name">MIS For Manager</field>
			<field name="res_model">hr.employee.mis.report</field>
			<field name="view_mode">tree</field>
			<field name="search_view_id" ref="kw_mis_manager_search_view"/>
			<field name="view_id" ref="kw_mis_manager_employee_list_tree"/>
			<field name="view_type">form</field>
			<field name="domain">[('employement_type.code','!=','O')]</field>
			<field name="context">{'manager':True,'search_default_active_employees':1}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					No Records to take action...
				</p>
			</field>
		</record>

		<record id="kw_mis_management_employees_actions" model="ir.actions.act_window">
			<field name="name">MIS For Management</field>
			<field name="res_model">hr.employee.mis.report</field>
			<field name="view_mode">tree</field>
			<field name="search_view_id" ref="kw_mis_manager_search_view"/>
			<field name="view_id" ref="kw_mis_manager_employee_list_tree"/>
			<field name="view_type">form</field>
			<field name="domain">[('employement_type.code','!=','O')]</field>
			<field name="context">{'management':True,'search_default_active_employees':1}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					No Records to take action...
				</p>
			</field>
		</record>

		<!-- <menuitem id="mis_report_employees_manager_menu"
				  name="MIS For Manager"
				  parent="kw_employee_info_system.employee_mis_report_menu"
				  action="kw_employee_info_system.kw_mis_manager_employees_actions"
				  groups='kw_employee.group_payroll_manager'
				  sequence="2"/> -->

		<menuitem id="mis_report_employees_management_menu"
				  name=" MIS For Management"
				  parent="kw_employee_info_system.employee_mis_report_menu"
				  action="kw_employee_info_system.kw_mis_management_employees_actions"
				  groups="hr.group_hr_manager,kw_employee.group_hr_management,kw_employee_info_system.group_mis_user"
				  sequence="1"/>

		<record id="mis_emp_reports_wizard_view_form" model="ir.ui.view">
			<field name="name">MIS_emp_reports_wizard_form</field>
			<field name="model">mis_emp_reports_wizard</field>
			<field name="arch" type="xml">
				<form string="">
					<sheet>
						<group>
							<field name="types" widget="radio" options="{'horizontal': true}"/>
							<field name="fiscalyr" attrs="{'invisible':[('types','=','all')]}"
								   options="{'no_open': True,'no_create':True,'no_edit':True}" context="{'order_display': 'name desc'}"/>
						</group>
					</sheet>
					<footer>
						<button name="get_employee_report" class="btn-success" string="Result" type="object"/>
					</footer>
				</form>
			</field>
		</record>
		<record id="mis_emp_wizard_view_action" model="ir.actions.act_window">
			<field name="type">ir.actions.act_window</field>
			<field name="name">MIS Report</field>
			<field name="res_model">mis_emp_reports_wizard</field>
            <field name="view_id" ref="mis_emp_reports_wizard_view_form"/>
			<field name="view_mode">form</field>
			<field name="view_type">form</field>
			<field name="target">new</field>
		</record>


        <menuitem id="mis_report_emp_manager_menu"
                name="MIS For Manager"
                parent="kw_employee_info_system.employee_mis_report_menu"
                action="kw_employee_info_system.mis_emp_wizard_view_action"
                groups='kw_employee.group_payroll_manager'
                sequence="2"/>		  
    </data>
</odoo>