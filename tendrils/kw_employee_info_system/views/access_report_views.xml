<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="kw_group_access_tree_view" model="ir.ui.view">
		<field name="name">User Access Report</field>
		<field name="model">kw_group_access_report</field>
		<field name="arch" type="xml">
			<tree create='false' delete='false' import='false'>
				<field name="emp_code" string='Employee Code'/>
				<field name="user_name" string="User Name"/>
				<field name="designation" string='Designation'/>
				<field name="dept_id" string='Department'/>
				<field name="module_name" string="Module Name"/>
				<field name="group_name" string='Group Name'/>
			</tree>
		</field>
	</record>

	<!-- Default Search View -->
	<record id="group_access_search_view" model="ir.ui.view">
		<field name="name">kw_group_access_search_view</field>
		<field name="model">kw_group_access_report</field>
		<field name="arch" type="xml">
			<search>
				<field name="emp_code" string='Employee Code'/>
				<field name="user_name" string="Employee Name"/>
				<field name="designation" string='Designation'/>
				<field name="dept_id" string='Department'/>
				<field name="module_name" string="Module Name"/>
				<field name="group_name" string='Group Name'/>

				<group expand="1" string="Group By">
					<filter name="group_by_emp_code" string="Employee_code" context="{'group_by': 'emp_code'}"/>
					<filter name="group_by_user_name" string="Employee Name" context="{'group_by': 'user_name'}"/>
					<filter name="group_by_designation" string="Designation" context="{'group_by': 'designation'}"/>
					<filter name="group_by_dept_id" string="Department" context="{'group_by': 'dept_id'}"/>
					<filter name="group_by_module_name" string="Module Name" context="{'group_by': 'module_name'}"/>
					<filter name="group_by_group_name" string="Group Name" context="{'group_by': 'group_name'}"/>
				</group>
			</search>
		</field>
	</record>


	<record id="kw_group_modules_access_view_action" model="ir.actions.act_window">
		<field name="type">ir.actions.act_window</field>
		<field name="name">User Access Report</field>
		<field name="res_model">kw_group_access_report</field>
		<field name="view_mode">tree</field>
        <field name="search_view_id" ref="group_access_search_view"/>
        <field name="domain">[]</field>
        <field name="context">{'search_default_group_by_module_name':1}</field>
		<field name="view_type">form</field>
	</record>

	<menuitem id="kwantify_group_access_report_menu"
	          name='User Access Report'
	          parent="kw_employee_info_system.employee_mis_report_menu"
	          action="kw_group_modules_access_view_action"
	          groups="base.group_no_one"/>
<!--	hr.group_hr_manager,-->
</odoo>
