<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- skill sheet tree view -->
        <record id="kw_skill_sheet_view_tree" model="ir.ui.view">
            <field name="name">kw_skill_sheet_view.tree</field>
            <field name="model">kw_skill_sheet</field>
            <field name="arch" type="xml">
                <tree delete="true" import="false">
                    <field name="date_"/>
                    <field name="employee_id"/>
                    <field name="code" force_save="1"/>
                    <field name="job_name" force_save="1"/>
                    <field name="department_name" force_save="1"/>
                    <field name="location" force_save="1"/>
                    <field name="section" force_save="1"/>
                    <field name="grade" force_save="1" invisible="1"/>
                    <field name="primary_skill_id"/>
                    <field name="self_primary_skill_id_score"/>
                    <field name="ra_primary_skill_id_score"/>
                    <field name="lnk_primary_skill_id_score"/>
                    <field name="secondary_skill_id"/>
                    <field name="self_secondary_skill_id_score"/>
                    <field name="ra_secondary_skill_id_score"/>
                    <field name="lnk_secondary_skill_id_score"/>
                    <field name="tertial_skill_id"/>
                    <field name="self_tertial_skill_id_score"/>
                    <field name="ra_tertial_skill_id_score"/>
                    <field name="lnk_tertial_skill_id_score"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <!-- kw_skill_sheet form view -->
        <record id="kw_skill_sheet_view_form" model="ir.ui.view">
            <field name="name">kw_skill_sheet.view.form</field>
            <field name="model">kw_skill_sheet</field>
            <field name="arch" type="xml">
                <form string="" duplicate="false">
                    <header>
                        <field name="state" widget="statusbar"/>
                        <button string='Submit' name="self_mark_sheet_submit" attrs="{'invisible':[('state','in',['2','3','4'])]}" class="btn font-weight-bold text-white" style="background-color: #108fbb;" type="object" />
                        <button string='Submit' name="ra_mark_sheet_submit" attrs="{'invisible':['|',('btn_visibility_status','=',False),('ra_submit_data_bool','=',True)]}" class="btn font-weight-bold text-white" style="background-color: #108fbb;" type="object" />
                        <button string='Submit' name="lnk_mark_sheet_submit" attrs="{'invisible':['|',('is_lnk_user','=',False),('state','in',['1','2','4']),]}" class="btn font-weight-bold text-white" style="background-color: #108fbb;" type="object" />
                    </header>
                    <sheet>
                        <group string="Employee Details">
                            <group>
                                <field name="employee_id" options="{'no_create_edit': True,'no_open':True,'no_create':True}" readonly='1'/>
                                <field name="code" attrs="{'invisible':[('employee_id', '=', False)]}" force_save="1" />
                                <field name="job_name" attrs="{'invisible':[('employee_id', '=', False)]}" force_save="1"/>
                                <field name="date_" readonly="1"/>
                            </group>
                            <group>
                                <field name="department_name" attrs="{'invisible':[('employee_id', '=', False)]}" force_save="1"/>
                                <field name="location" attrs="{'invisible':[('employee_id', '=', False)]}" force_save="1"/>
                                <field name="section" attrs="{'invisible':[('employee_id', '=', False)]}" force_save="1"/>
                                <field name="default_fiscal_year" readonly="1" options="{'no_create_edit': True,'no_open':True,'no_create':True}"/>
                                <field name="fiscal_quarter" readonly="1" />
                                <field name="grade" attrs="{'invisible':[('employee_id', '=', False)]}" force_save="1" invisible="1"/>
                                <field name="submit_data_readonly" invisible="1"/>
                                <field name="ra_submit_data_bool"  invisible="1"/>
                                <field name="btn_visibility_status"  invisible="1"/>
                                <field name="lnk_submit_data_bool"  invisible="1"/>
                                <field name="is_lnk_user"  invisible="1"/>
                            </group>
                           
                        </group>
                        <!-- <span style='text-align:right;color:blue;font-weight:bold; font-size:18px; margin-bottom:0'><i>Note : 1- represents Poor , 2- represents Below Average, 3- represents Average, 4- represents Good, 5- represents Excellent</i></span> -->
                        <p></p>
                        <table class="table table-bordered">
                            <tr class="leave_count_details text-center">
                                <th class="leave_count_header">
                                    <label for="max_leaves" string="Skill Type" style="font-weight: bold !important;" />
                                </th>
                                <th class="leave_count_header">
                                    <label for="max_leaves" string="Skill" style="font-weight: bold !important;" />
                                </th>
                                <th class="leave_count_header">
                                    <label for="leaves_taken" string="Self Score (Out of 5)" style="font-weight: bold !important;" />
                                </th>
                                <th class="leave_count_header">
                                    <label for="leaves_taken" string="RA Score (Out of 5)" style="font-weight: bold !important;" />
                                </th>
                                <th class="leave_count_header">
                                    <label for="remaining_leaves" string="L&amp;K Score (Out of 5)" style="font-weight: bold !important;" />
                                </th>
                            </tr>
                            <tr>
                                <td class="leave_count_data">
                                    <span>Primary</span>
                                </td>
                                <td class="leave_count_data">
                                    <field name="primary_skill_id" class="oe_inline" readonly='1' attrs="{'required':[('primary_skill_id', '=',False)]}" options="{'no_create':True,'no_create_edit':True,'no_open':True,'no_edit':True}" force_save="1"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="self_primary_skill_id_score" attrs="{'required':[('submit_data_readonly', '=',False)],'readonly':['|',('primary_skill_id', '=',False),('submit_data_readonly', '=',True)]}"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="ra_primary_skill_id_score"  attrs="{'invisible':[('state', '=','1')],'required':[('ra_submit_data_bool', '=',False)],'readonly':['|',('ra_submit_data_bool', '=',True),('btn_visibility_status','=',False)]}"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="lnk_primary_skill_id_score"   attrs="{'invisible':[('ra_submit_data_bool', '=',False)],'readonly':['|',('is_lnk_user', '=',False),('state', '=','4'),]}" />
                                </td>
                                
                            </tr>
                            <tr>
                                <td class="leave_count_data">
                                    <span>Secondary</span>
                                </td>
                                <td class="leave_count_data">
                                    <field name="secondary_skill_id" class="oe_inline" readonly='1'  options="{'no_create':True,'no_create_edit':True,'no_open':True,'no_edit':True}" force_save="1"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="self_secondary_skill_id_score" attrs="{'required':[('secondary_skill_id', '!=',False)],'readonly':['|',('secondary_skill_id', '=',False),('submit_data_readonly', '=',True)]}" />
                                </td>
                                <td class="leave_count_data">
                                    <field name="ra_secondary_skill_id_score"    attrs="{'invisible':[('state', '=','1')],'required':[('secondary_skill_id', '!=',False),('ra_submit_data_bool', '=',False)],'readonly':['|','|',('secondary_skill_id', '=',False),('ra_submit_data_bool', '=',True),('btn_visibility_status','=',False)]}"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="lnk_secondary_skill_id_score"   attrs="{'invisible':[('ra_submit_data_bool', '=',False)],'readonly':['|','|',('secondary_skill_id', '=',False),('is_lnk_user', '=',False),('state', '=','4'),]}" />
                                </td>
                                
                            </tr>
                            <tr>
                                <td class="leave_count_data">
                                    <span>Tertiary</span>
                                </td>
                                <td class="leave_count_data">
                                    <field name="tertial_skill_id" class="oe_inline" readonly='1' options="{'no_create':True,'no_create_edit':True,'no_open':True,'no_edit':True}" force_save="1"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="self_tertial_skill_id_score"  attrs="{'required':[('tertial_skill_id', '!=',False)],'readonly':['|',('tertial_skill_id', '=',False),('submit_data_readonly', '=',True)]}" />
                                </td>
                                <td class="leave_count_data">
                                    <field name="ra_tertial_skill_id_score"   attrs="{'invisible':[('state', '=','1')],'required':[('tertial_skill_id', '!=',False),('ra_submit_data_bool', '=',False)],'readonly':['|','|',('tertial_skill_id', '=',False),('ra_submit_data_bool', '=',True),('btn_visibility_status','=',False)]}"/>
                                </td>
                                <td class="leave_count_data">
                                    <field name="lnk_tertial_skill_id_score"   attrs="{'invisible':[('ra_submit_data_bool', '=',False)],'readonly':['|','|',('tertial_skill_id', '=',False),('is_lnk_user', '=',False),('state', '=','4'),]}" />
                                </td>
                                
                            </tr>
                        </table>
                        <!-- <group string="Employee Skills">
                            <field name="skills_id" attrs="{'readonly':[('submit_data_readonly', '=',True)]}">
                                <tree editable="top">
                                    <field name= "kw_skill_emp_id" invisible="1"/>
                                    <field name="skill_type_id" op	select * from kw_employee_skill_expertisetions="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="skills_id" options="{'no_open': True,'no_create':True,'no_edit':True}" domain="[('skill_type', '=', skill_type_id)]"/>
                                    <field name="mark"/>
                                </tree>
                                <form>
                                    <field name= "kw_skill_emp_id" invisible="1"/>
                                    <field name="skill_type_id" invisible="1"/>
                                    <field name="skills_id" inviskw_eos_checklist_view_treeible="1"/>
                                </form>
                            </field>
                        </group> -->
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Search view skill sheet-->

        <record id="kw_skill_sheet_search_view" model="ir.ui.view">
            <field name="name">kw_skill_sheet_search_view</field>
            <field name="model">kw_skill_sheet</field>
            <field name="arch" type="xml">
                <search>
                    <field name="employee_id" string="Name"/>
                    <field name="code" string="Code"/>
                    <field name="job_name" string="Job Name"/>
                    <field name="department_name" string="Department"/>
                    <field name="fiscal_quarter"/>
                    <separator/>
                        <filter string="Quarter 1" domain="[('date_', '>=', context_today().strftime('%Y-04-01')), ('date_', '&lt;', context_today().strftime('%Y-07-01'))]" name="quarter1_skill_sheet_report"/>
                        <filter string="Quarter 2" domain="[('date_', '>=', context_today().strftime('%Y-07-01')), ('date_', '&lt;', context_today().strftime('%Y-10-01'))]" name="quarter2_skill_sheet_report"/>
                        <filter string="Quarter 3" domain="[('date_', '>=', context_today().strftime('%Y-10-01')), ('date_', '&lt;', (context_today() + relativedelta(years=1)).strftime('%Y-01-01'))]" name="quarter3_skill_sheet_report"/>
                        <filter string="Quarter 4" domain="[('date_', '>=', (context_today() + relativedelta(years=1)).strftime('%Y-01-01')), ('date_', '&lt;', context_today().strftime('%Y-04-01'))]" name="quarter4_skill_sheet_report"/>
                    <group expand="0" string="Group By">
                        <filter name="quater_wise" string="Quaterly" domain="[]" context="{'group_by':'fiscal_quarter'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!--Skill sheet act window-->

        <record id="kw_skill_sheet_action_window" model="ir.actions.act_window">
            <field name="name">Self Skill Sheet</field>
            <field name="res_model">kw_skill_sheet</field>
            <field name="view_mode">tree,form,search</field>
            <field name="view_type">form</field>
            <field name="domain">[('employee_id.user_id','=',uid)]</field>
            <field name='context'>{'delete':1,'import':0}</field>
        </record>

        <record model="ir.actions.act_window" id="ra_skill_sheet_take_action_act_window">
            <field name="name">RA Skill Sheet Take Action</field>
            <field name="res_model">kw_skill_sheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_skill_assessment.kw_skill_sheet_view_tree')})]"/>
            <field name="domain">[('employee_id.parent_id.user_id','=',uid),('state','=','2')]</field>
            <field name='context'>{'create':0,'delete':0,'import':0}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No take action Skill Sheet(s) Here...
                </p>
            </field>
        </record>

        <record model="ir.actions.act_window" id="landk_skill_sheet_take_action_act_window">
            <field name="name">L &amp; K Skill Sheet Take Action</field>
            <field name="res_model">kw_skill_sheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_skill_assessment.kw_skill_sheet_view_tree')})]"/>
            <field name="domain">[('state','=','3')]</field>
            <field name='context'>{'create':0,'delete':0,'import':0}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No take action Skill Sheet(s) Here...
                </p>
            </field>
        </record>
        <!-- <record model="ir.actions.act_window" id="skill_sheet_report_act_window">
            <field name="name">Skill Sheet Report</field>
            <field name="res_model">kw_skill_sheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_skill_assessment.kw_skill_sheet_view_tree')})]"/>
            <field name="domain">[]</field>
            <field name='context'>{'create':0,'delete':0,'import':0}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No take action Skill Sheet(s) Here...
                </p>
            </field>
        </record> -->
        <!--        Wizard For Skill Sheet Report Filter Yearly and quaterly-->

        <record id="notify_user_mail_wizard" model="ir.ui.view">
            <field name="name">Notify User</field>
            <field name="model">skill_assessment_mail_notify_wizard</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <center>
                                <span style='text-align:center;color:red;font-weight:bold; font-size:18px; margin-bottom:0'><i>Click the 'Notify User' button to inform the user about the Skill Assessment Survey.</i></span>
                                <group>
                                    <field name="department_ids" widget='many2many_tags' options='{"no_open": True, "no_create": True, "no_edit": True}'/>
                                </group>
                            </center>
                        </group>
                    </sheet>
                    <footer>
                        <center>
                            <button string='Notify User' name="action_notify_to_user" type="object" class="btn-success"/>
                            <button string="Cancel" class="btn-danger" special="cancel"/>
                            <button string='Notify RA' name="action_notify_to_ra" type="object" class="btn-primary"/>

                        </center>
                    </footer>
                </form>
            </field>
        </record>

        <record id="notify_user_wizard_action" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Send Notification</field>
            <field name="res_model">skill_assessment_mail_notify_wizard</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="target">new</field>
        </record>

        <record id="skill_sheet_report_filter_wizard_id" model="ir.ui.view">
            <field name="name">Skill Sheet Report</field>
            <field name="model">skill_sheet_report_filter_wizard</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="fis_year" options='{"no_open": True, "no_create": True, "no_edit": True}'/>
                            <field name="quarter"/>
                        </group>
                    </sheet>
                    <footer>
                        <button string='View Report' name="get_client_action" type="object"
                                style="background-color: #108fbb;"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <record id="skill_sheet_report_filter_wizard_action" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Skill Sheet Report Wizard</field>
            <field name="res_model">skill_sheet_report_filter_wizard</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="target">new</field>
        </record>
    </data>
</odoo>
