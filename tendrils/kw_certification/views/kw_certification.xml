<odoo>
  <data>
    <!--    submit button wizard view-->
    <record model="ir.ui.view" id="mail_notify_wizard_list">
      <field name="name">mail_notify_wizard_list</field>
      <field name="model">mail_notify_wizard</field>
      <field name="arch" type="xml">
        <form import="false" delete="false">
          <sheet>
            <group>
              <field name="email_cc" widget="many2many_tags" options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
              <field name="certification_record_id" invisible="1"/>
            </group>
            <footer>
              <button name="btn_submit" string="Submit" type="object" class="oe_highlight"/>
              <button string="Cancel"  special="cancel" class = "btn-danger"/>
            </footer>
          </sheet>
        </form>
      </field>
    </record>


    <record model="ir.actions.act_window" id="mail_notify_wizard_action_window">
      <field name="name">Certification</field>
      <field name="res_model">mail_notify_wizard</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="mail_notify_wizard_list"/>
      <field name="target">new</field>
    </record>
    <record model="ir.ui.view" id="mail_notify_wizard_upload_form">
      <field name="name">mail_notify_wizard_upload</field>
      <field name="model">mail_notify_wizard</field>
      <field name="arch" type="xml">
        <form import="false" delete="false">
          <sheet>
            <group>
              <group>
                <field name="employee_id"  options="{'no_create': True, 'no_open': True, 'no_edit': True}" required="1" readonly="1"/>
                <field name="certification_record_id" invisible="1"/>
                <field name="assign_emp_record_id" invisible="1"/>
                <field name="course_type" readonly="1" required="1"/>
                <field name="course_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" readonly="1" required="1"/>
                <field name="stream_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" required="1"/>
                <field name="university_name" options="{'no_create': True, 'no_open': True, 'no_edit': True}" required="1"/>
              </group>
              <group>
                <field name="passing_year" required="1"/>
                <field name="division" required="1"/>
                <field name="marks_obtained" required="1"/>
                <field name="certificate_upload" required="1"/>
              </group>
            </group>
            <footer>
              <button name="btn_submit_upload" string="Submit" type="object" class="oe_highlight"/>
              <button string="Cancel"  special="cancel" class = "btn-danger"/>
            </footer>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.actions.act_window" id="kw_certification_wizard_window">
      <field name="name">View Upload</field>
      <field name="res_model">mail_notify_wizard</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="target">new</field>
      <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'form', 'view_id': ref('mail_notify_wizard_upload_form')})]"/>
    </record>
    <record model="ir.ui.view" id="mail_notify_wizard_appreciation_form">
      <field name="name">mail_notify_wizard_upload_close</field>
      <field name="model">mail_notify_wizard</field>
      <field name="arch" type="xml">
        <form import="false" delete="false">
          <sheet>
            <group>

              <field name="emp_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" widget="many2many_tags" required="1"/>
              <field name="certification_record_id" invisible="1"/>

            </group>
            <footer>
              <button name="btn_submit_close" string="Submit" type="object" class="oe_highlight"/>
              <button string="Cancel"  special="cancel" class = "btn-danger"/>
            </footer>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.actions.act_window" id="kw_certification_appreciation_wizard_window">
      <field name="name">Appreciation Mail</field>
      <field name="res_model">mail_notify_wizard</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="target">new</field>
      <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'form', 'view_id': ref('mail_notify_wizard_appreciation_form')})]"/>
    </record>


    <!-- list view -->
    <record model="ir.ui.view" id="kw_certification_list">
      <field name="name">kw_certification_list</field>
      <field name="model">kw_certification</field>
      <field name="arch" type="xml">
        <tree import="false" delete="false">
          <field name="number"/>
          <field name="create_date" string="Raised Date"/>
          <field name="date_of_raised" invisible="1"/>
          <field name="raised_by_id"/>
          <field name="certification_type_id"/>
          <field name="technology_id"/>
          <field name="qualification_ids" invisible="1"/>
          <field name="year_of_experience"/>
          <field name="year_of_experience_max"/>
          <field name="no_of_candidate"/>
          <field name="remarks"/>
          <field name="assigned_user_ids" widget="many2many_tags" invisible="1"/>
          <field name="view_status_user_ids" widget="many2many_tags" invisible="1"/>
          <field name="budget_for_certification" invisible="1"/>
          <field name="pending_at" invisible="1"/>
          <field name="take_action_user_ids" widget="many2many_tags"/>
          <field name="state"/>
          <field name="assign_button_hide_boolean" invisible="1"/>
          <field name="upload_btn_hide_boolean" invisible="1"/>
          <field name="remainder_mail_boolean" invisible="1"/>
          <field name="appreciation_mail_boolean" invisible="1"/>
        </tree>
      </field>
    </record>


    <!--  form view  -->

    <record id="kw_certification_form" model="ir.ui.view">
      <field name="name">kw_certification_form</field>
      <field name="model">kw_certification</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form import="false">
          <header>
            <field name="state" widget="statusbar"/>
            <button name="%(mail_notify_wizard_action_window)d" string="Submit" type="action" context= "{'current_record':id}" class="btn-success"
                    attrs="{'invisible':[('state', 'not in', ['Draft'])]}"/>

            <button name="%(nominate_employee_wizard_action)d" string="Add Nominees"  context="{'current_record':id, 'button':'nominate'}" type="action" class="btn-info"
                    attrs="{'invisible':['|', ('state', 'not in', ['Request Raised', 'Assigned']), ('assign_button_hide_boolean', '!=', True)]}"/>
            <button name="%(nominate_employee_wizard_action)d" string="Add Special Nominees"  context="{'current_record':id, 'button':'special_nominate'}" type="action" class="btn-info"
                    attrs="{'invisible':['|', ('state', 'not in', ['Request Raised', 'Assigned']), ('assign_button_hide_boolean', '!=', True)]}"/>
            <button name="btn_assign" string="Assign" type="object" class="btn-success"
                    attrs="{'invisible':['|', ('state', 'not in', ['Request Raised', 'Assigned']), ('assign_button_hide_boolean', '!=', True)]}"/>
            <!--            <button name="btn_approve" string="Approve" type="object" class="btn-success"-->
            <!--                    attrs="{'invisible':['|', ('state', 'not in', ['Accepted']), ('approve_button_boolean', '!=', True)]}"/>-->
<!--            <button name="%(kw_certification_wizard_window)d" string="Upload Documents" type="action" class="btn-success"-->
<!--                    attrs="{'invisible':['|', ('state', 'not in', ['Approved']), ('upload_btn_hide_boolean', '=', False)]}" context="{'current_record':id, 'default_stream_id':certification_type_id}"/>-->


            <button name="send_mail_button_landk" string="Certificate Upload Reminder Mail" type="object" class="btn-success" groups="kw_certification.group_manager_module_kw_certification"
                    attrs="{'invisible':['|', ('state', 'not in', ['Approved']), ('target_date_boolean', '!=', True)]}"/>
            <button name="send_mail_resource_button" string="Reminder Mail To Resource" type="object" class="btn-success" groups="kw_certification.group_manager_module_kw_certification"
                    attrs="{'invisible':['|', ('state', 'not in', ['Approved']), ('remainder_mail_boolean', '!=', True)]}"/>
            <button name="%(kw_certification_appreciation_wizard_window)d" string="Appreciation Mail" type="action" class="btn-success" context="{'current_record':id}"
                    attrs="{'invisible':['|', ('state', 'not in', ['Approved']), ('appreciation_mail_boolean', '!=', True)]}" groups="kw_certification.group_manager_module_kw_certification"/>


            <button name="close_button" string="Close" type="object" class="btn-danger"
                    attrs="{'invisible':[('state', 'not in', ['Approved']), ('close_btn_hide_boolean', '!=', True)]}" groups="kw_certification.group_manager_module_kw_certification"/>

          </header>
          <sheet>
            <div class="oe_title">
              <label for="number"/>
              <h1>
                <field name="number" nolabel="1"/>
              </h1>
            </div>
            <group>
              <group>
                <field name="date_of_raised" invisible="1"/>
                <field name="target_date_boolean" invisible="1"/>
                <field name="remainder_mail_boolean" invisible="1"/>
                <field name="appreciation_mail_boolean" invisible="1"/>
                <field name="suggested_by" widget="radio" options="{'horizontal': True}" attrs="{'readonly':[('state', '!=', 'Draft')]}" invisible="1"/>
                <field name="raised_by_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" attrs="{'readonly':['|', ('self_boolean_readonly', '=', True), ('state', '!=', 'Draft')]}" force_save="1" required="1" domain="[('employement_type.code','!=','O')]"/>
                <field name="self_boolean_readonly" invisible="1"/>
                <field name="department_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" force_save="1"/>
                <field name="certification_type_id" required="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>   <!-- attrs="{'readonly':[('state', '!=', 'Draft')]}" -->
                <field name="technology_id" required="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" />  <!-- attrs="{'readonly':[('state', '!=', 'Draft')]}" -->
                <field name="cert_budget" readonly="1" force_save="1" invisible="1"/>
                <field name="require_department_id" placeholder="Required For Department....." required="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" attrs="{'readonly':[('state', '!=', 'Draft')]}" context="{'tree_view_ref': 'kw_certification.department_tree_view'}"/>
                <field name="department_head_id" readonly="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" invisible="1"/>
              </group>
              <group>
                <field name="qualification_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True, 'no_edit': True}" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}" context="{'tree_view_ref': 'kw_certification.qualification_category_tree_view'}"/>
                <field name="year_of_experience" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="year_of_experience_max" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="no_of_candidate" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="remarks" required="1" placeholder="Description..." attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="enroll_policy" widget="radio" options="{'horizontal': True}" attrs="{'invisible':[('assign_button_hide_boolean', '!=', True)]}" required="1"/>
                <field name="target_date" attrs="{'readonly':[('state', 'in', ['Closed', 'Accepted'])]}"/>
                <field name="budget_for_certification" attrs="{'invisible':[('assign_button_hide_boolean', '!=', True)]}" invisible="1"/>
                <field name="cert_budget" readonly="1" force_save="1" attrs="{'invisible':[('assign_button_hide_boolean', '!=', True)]}"/>
                <field name="assign_button_hide_boolean" invisible="1"/>
                <field name="assigned_user_ids" widget="many2many_tags" invisible="1"/>
                <field name="view_status_user_ids" widget="many2many_tags" invisible="1"/>
                <field name="take_action_user_ids" widget="many2many_tags" invisible="1"/>
                <field name="accept_button_boolean" invisible="1"/>
                <field name="approve_button_boolean" invisible="1"/>
                <field name="upload_btn_hide_boolean" invisible="1"/>
                <field name="close_btn_hide_boolean" invisible="1"/>
                <field name="pending_at" invisible="1"/>
                <field name="rcm_head_manager_id" invisible="1"/>

              </group>
            </group>
            <group string="Nominate Employees" attrs="{'invisible':[('state', 'in', ['Draft'])]}">
              <field name="assigned_emp_data" required="1" attrs="{'readonly':[('state', 'in', ['Closed', 'Accepted'])]}">
                <tree editable="bottom" create="false" delete="false">
                  <field name="employee_id" required="1" readonly="1"/>
                  <field name="deg_id" readonly="1"/>
                  <field name="emp_qualification"/>
                  <field name="emp_year_of_exp"/>
                  <field name ="dept_id"/>
                  <field name="work_email"/>
                  <field name="status_certification" readonly="1"/>
                  <field name="certificate_upload" widget="binary" filename="doc_file_name"  readonly="1"/>
                  <field name="l_k_bool" invisible="1"/>
                  <field name="doc_file_name" invisible="1"/>
                  <field name="certification_master_id" invisible="1"/>
                  <field name="assigned_date" invisible="1"/>
                  <field name="mail_boolean" invisible="1"/>
                  <button name="%(kw_certification_wizard_window)d" string="Upload" type= "action" class="btn-success" attrs="{'invisible':['|', ('l_k_bool', '!=', True),('status_certification', '!=', 'Accepted')]}" context="{'default_certification_record_id': certification_master_id,
                                                                                                                                                                                                                                  'default_assign_emp_record_id':id,
                                                                                                                                                                                                                                  'default_employee_id':employee_id,
                                                                                                                                                                                                                                  }"/>
                </tree>
              </field>
              <group>
              </group>
              <group>
              </group>
            </group>
            <group>
              <group string="Action Log Table">
                <field name="action_log_table_ids"  nolabel="1" readonly="1">
                  <tree editable="bottom">
                    <field name="date"/>
                    <field name="action_taken_by"/>
                    <field name ="designation"/>
                    <field name="state"/>
                    <field name="certfication_con_id" invisible='1'/>
                  </tree>
                </field>
              </group>
              <group>
              </group>
            </group>
          </sheet>
          <div class="oe_chatter" >
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="activity_ids" widget="mail_activity" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>
    <!--form view status-->
    <record id="kw_certification_view_status_form" model="ir.ui.view">
      <field name="name">kw_certification_form</field>
      <field name="model">kw_certification</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form import="false">
          <header>
            <field name="state" widget="statusbar"/>
          </header>
          <sheet>
            <div class="oe_title">
              <label for="number"/>
              <h1>
                <field name="number" nolabel="1"/>
              </h1>
            </div>
            <group>
              <group>
                <field name="date_of_raised" invisible="1"/>
                <field name="suggested_by" widget="radio" options="{'horizontal': True}" attrs="{'readonly':[('state', '!=', 'Draft')]}" invisible="1"/>
                <field name="raised_by_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" attrs="{'readonly':['|', ('self_boolean_readonly', '=', True), ('state', '!=', 'Draft')]}" force_save="1" required="1" domain="[('employement_type.code','!=','O')]"/>
                <field name="self_boolean_readonly" invisible="1"/>
                <field name="department_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" force_save="1"/>
                <field name="certification_type_id" required="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="technology_id" required="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="cert_budget" readonly="1" force_save="1" invisible="1"/>
                <field name="require_department_id" placeholder="Required For Department....." required="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" attrs="{'readonly':[('state', '!=', 'Draft')]}" context="{'tree_view_ref': 'kw_certification.department_tree_view'}"/>
                <field name="department_head_id" readonly="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" invisible="1"/>
              </group>
              <group>
                <field name="qualification_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True, 'no_edit': True}" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}" context="{'tree_view_ref': 'kw_certification.qualification_category_tree_view'}"/>
                <field name="year_of_experience" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="year_of_experience_max" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="no_of_candidate" required="1" attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="remarks" required="1" placeholder="Description..." attrs="{'readonly':[('state', '!=', 'Draft')]}"/>
                <field name="enroll_policy" widget="radio" options="{'horizontal': True}"  readonly="1" />
                <field name="target_date" readonly="1"/>
                <field name="budget_for_certification" attrs="{'invisible':[('assign_button_hide_boolean', '!=', True)]}" invisible="1"/>
                <field name="cert_budget" readonly="1" force_save="1" />
                <field name="assign_button_hide_boolean" invisible="1"/>
                <field name="assigned_user_ids" widget="many2many_tags" invisible="1"/>
                <field name="accept_button_boolean" invisible="1"/>
                <field name="approve_button_boolean" invisible="1"/>
                <field name="upload_btn_hide_boolean" invisible="1"/>
                <field name="pending_at" invisible="1"/>
                <field name="rcm_head_manager_id" invisible="1"/>
              </group>
            </group>
            <group string="Nominate Employees" attrs="{'invisible':[('state', 'in', ['Draft'])]}">
              <field name="assigned_emp_data" required="1" attrs="{'readonly':[('state', 'in', ['Closed', 'Accepted'])]}">
                <tree editable="bottom" create="false" delete="false">
                  <field name="employee_id" required="1" readonly="1"/>
                  <field name="deg_id" readonly="1"/>
                  <field name="emp_qualification"/>
                  <field name="emp_year_of_exp"/>
                  <field name ="dept_id"/>
                  <field name="work_email"/>
                  <field name="status_certification" readonly="1"/>
                  <field name="certificate_upload" widget="binary" filename="doc_file_name"  attrs="{'readonly':[('l_k_bool', '=', False)]}"/>
                  <field name="l_k_bool" invisible="1"/>
                  <field name="doc_file_name" invisible="1"/>
                  <field name="assigned_date" invisible="1"/>
                </tree>
              </field>
              <group>
              </group>
              <group>
              </group>
            </group>
            <group>
              <group string="Action Log Table">
                <field name="action_log_table_ids"  nolabel="1" readonly="1">
                  <tree editable="bottom">
                    <field name="date"/>
                    <field name="action_taken_by"/>
                    <field name ="designation"/>
                    <field name="state"/>
                    <field name="certfication_con_id" invisible='1'/>
                  </tree>
                </field>
              </group>
              <group>
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Search View -->


    <record id="certification_search_view" model="ir.ui.view">
      <field name="name">Certification Search</field>
      <field name="model">kw_certification</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
        <search>
          <field name="create_date"/>
          <field name="raised_by_id"/>
          <field name="certification_type_id"/>
          <field name="technology_id"/>
          <field name="year_of_experience"/>
          <field name="no_of_candidate"/>
          <field name="remarks"/>
          <field name="pending_at"/>
          <field name="state"/>
          <filter string="New" name="New" domain="[('state','=','New')]"/>
          <filter string="Request Raised" name="raised_request" domain="[('state','=','Request Raised')]"/>
          <filter string="Assigned" name="assigned" domain="[('state','=','Assigned')]"/>
          <filter string="Accepted" name="accepted" domain="[('state','=','Accepted')]"/>
          <filter string="Approved" name="approved" domain="[('state','=','Approved')]"/>
          <filter string="Closed" name="closed" domain="[('state','=','Closed')]"/>
          <group expand="0" string="Group By">
            <filter name="group_by_certification_type_id" context="{'group_by': 'certification_type_id'}" string="Certification Name" />
            <filter name="group_by_state" context="{'group_by': 'state'}" string="State" />
          </group>
        </search>
      </field>
    </record>


    <!--  action  -->
    <record model="ir.actions.act_window" id="kw_certification_action_window">
      <field name="name">Certification</field>
      <field name="res_model">kw_certification</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form,search</field>
      <field name="domain">[('create_uid','=',uid)]</field>
    </record>

    <record model="ir.actions.act_window" id="kw_certification_take_action_window">
      <field name="name">Take action</field>
      <field name="res_model">kw_certification</field>
      <field name="view_mode">tree,form</field>
      <field name="context">{'create': False,'import': False}</field>
      <field name="domain">[('state', '!=', 'Closed')]</field>
      <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_certification_list')}),
    (0, 0, {'view_mode': 'form', 'view_id': ref('kw_certification_form')})]"/>
    </record>

    <record model="ir.actions.act_window" id="kw_certification_view_status_window">
      <field name="name">View Status</field>
      <field name="res_model">kw_certification</field>
      <field name="view_mode">tree,form</field>
      <field name="context">{'create': False,'import': False}</field>
      <field name="domain">[]</field>
      <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_certification_list')}),
    (0, 0, {'view_mode': 'form', 'view_id': ref('kw_certification_view_status_form')})]"/>
    </record>




    <record id="qualification_category_tree_view" model="ir.ui.view">
      <field name="name">kw_master_stream_name_tree_view</field>
      <field name="model">kwmaster_stream_name</field>
      <field name="arch" type="xml">
        <tree string="">
          <field name="name" />
        </tree>
      </field>
    </record>

    <record id="department_tree_view" model="ir.ui.view">
      <field name="name">kw_department_name_tree_view</field>
      <field name="model">hr.department</field>
      <field name="arch" type="xml">
        <tree string="">
          <field name="display_name" />
        </tree>
      </field>
    </record>
    <!--    assign employee form view -->
    <record id="assign_employee_view" model="ir.ui.view">
      <field name="name">assign_employee_tree_view</field>
      <field name="model">assign_employee</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form string="Assign Employee">
          <header>

          </header>
          <sheet>
            <group>
              <field name="employee_id"  options="{'no_create': True, 'no_open': True, 'no_edit': True}" />
              <field name="deg_id" readonly="1" options="{'no_create': True, 'no_open': True, 'no_edit': True}" />
              <field name="emp_qualification"/>
              <field name="emp_year_of_exp"/>
              <field name ="dept_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}" />
              <field name="work_email"/>
              <field name="status_certification" readonly="1" invisible="1"/>
              <field name="certificate_upload" widget="binary" filename="doc_file_name"  attrs="{'readonly':[('l_k_bool', '=', False)]}"/>
              <field name="l_k_bool" invisible="1"/>
              <field name="doc_file_name" invisible="1"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>
    <!--    view status server action -->

    <record id="kw_certification_view_status_action_window" model="ir.actions.server">
      <field name="name">View Status</field>
      <field name="model_id" ref="model_kw_certification"/>
      <field name="state">code</field>
      <field name="code">
        action = model.get_all_status_details()
      </field>
    </record>

    <!--    take action server action -->

    <record id="kw_certification_server_take_action_window" model="ir.actions.server">
      <field name="name">Take Action</field>
      <field name="model_id" ref="model_kw_certification"/>
      <field name="state">code</field>
      <field name="code">
        action = model.get_all_take_actions_user()
      </field>
    </record>


  </data>
</odoo>