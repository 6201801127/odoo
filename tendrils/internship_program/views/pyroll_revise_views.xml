<odoo>
    <data>
        <record id="kw_pyroll_revise_trainee_list" model="ir.ui.view">
            <field name="name">Pyroll Revise list</field>
            <field name="model">lk_batch</field>
            <field name="arch" type="xml">
                <tree create="false" import="false" delete="false">
                    <field name="financial_year_id"/>
                    <field name="name"/>
                    <field name="mrf_id"/>
                    <field name="training_completion_payroll_details_ids" string="No of Employees"/>
                </tree>
            </field>
        </record>

        <record id="payroll_revise_traineeship_form" model="ir.ui.view">
            <field name="name">lk_payroll_revise_form_view</field>
            <field name="model">lk_batch</field>
            <field name="arch" type="xml">
                <form create="false" delete="false">
                    <header>
                    </header>
                    <sheet>
                        <group>
                            <group>

                                <field name="financial_year_id" readonly='1' string='Financial Year'
                                       options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="name" readonly='1'/>
                                <field name="mrf_id" readonly='1'/>
                                <field name="pay_revies_all_bool" invisible="1"/>
                            </group>
                            <group>
                            </group>
                        </group>

                        <!--                        <group>-->
                        <!--                            <group>-->
                        <!--                                <field name="current_ctc_traineeship"/>-->
                        <!--                            </group>-->
                        <!--                        </group>-->
                        <footer>
                            <button name="compute_ctc_revise_payroll_traineeship"
                                    string="Update CTC" type="object"
                                    attrs="{'invisible':[('pay_revies_all_bool','=',True)]}"
                                    class="btn-success ml-1" context="{'button':'ctc_traineeship'}"/>
                            <button name="compute_revise_payroll_traineeship"
                                    attrs="{'invisible':[('pay_revies_all_bool','=',True)]}"
                                    string="All Pay Revise" type="object" class="oe_highlight ml-1"/>
                        </footer>
                        <group string="Payroll Revise">
                            <field name="training_completion_payroll_details_ids" required="1">
                                <tree editable="bottom" delete="false" create="false">
                                    <field name="lk_payroll" invisible="1"/>
                                    <field name="employee_id" readonly='1' invisible="1"
                                           options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="employee_name"/>
                                    <field name="employee_code"/>
                                    <field name="deg_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="department_id"
                                           options="{'no_open': True,'no_create':True,'no_edit':True}"
                                           readonly='1' force_save="true"/>
                                    <!-- attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"   -->
                                    <field name="new_dept_id"
                                           options="{'no_open': True,'no_create':True,'no_edit':True}"
                                           readonly='1' force_save="true"/>
                                    <!-- attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"  -->
                                    <!-- <field name="new_dept_id"  readonly="context.get('new_dept_id', True)"/> -->

                                    <field name="new_division_id"
                                           options="{'no_open': True,'no_create':True,'no_edit':True}"
                                           readonly='1' force_save="true"/>
                                    <!-- attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"  -->
                                    <field name="doj" string="Date of joining" readonly='1' force_save="true"/>
                                    <!-- attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"  -->
                                    <field name="traineeship_score" readonly='1' force_save="true"/>
                                    <!-- attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"  -->
                                    <field name="traineeship_comments_approved" force_save="true" readonly="1"/>
                                    <field name="traineeship_status" force_save="true" readonly="1"/>
                                    <field name="effective_from_date"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_current_ctc"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_emp_basic"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_emp_hra"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_emp_conv"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_emp_pb"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_emp_cb"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="traineeship_emp_esi" invisible="1"/>
                                    <field name="traineeship_emp_tax" invisible="1"/>
                                    <field name="gratuity_enable"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="pf_enable"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="pf_deduction" widget="selection"
                                           options="{'basicper': '12 % of basic', 'avail1800': 'Flat 1,800/-'}"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="enable_epf"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <!-- <field name="pf_deduction" attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/> -->
                                    <field name="eps_enable"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <!-- <field name="enable_gratuity" attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/> -->
                                    <field name="esi_applicable"
                                           attrs="{'readonly':[('pay_revise_success_bool','=',True)]}"/>
                                    <field name="pay_revise_success_bool" invisible='1'/>

                                    <button name="payroll_revise_check" class="oe_highlight" type="object"
                                            string="Pay Revise"
                                            attrs="{'invisible':[('pay_revise_success_bool','=',True)]}"/>
                                </tree>
                            </field>
                            <group>
                            </group>
                            <group>
                            </group>
                        </group>

                    </sheet>
                </form>
            </field>
        </record>

        <record id="emp_pay_revies_details_report_download_wizard" model="ir.ui.view">
            <field name="name">Download Form</field>
            <field name="model">employee_pay_revies_details_report_download</field>
            <field name="arch" type="xml">
                <form string="Download Form">
                    <script>
                        $(document).ready(function(){
                        $(".modal-title").show();
                        });
                    </script>
                    <header>
                    </header>
                    <sheet>
                        <group>
                            <field name="payrevies_emp_details_ids">
                                <tree create='0' edit='0' delete='0'>
                                    <field name="financial_year_id"/>
                                    <field name="name"/>
                                    <field name="mrf_id"/>
                                </tree>
                            </field>
                        </group>
                    </sheet>
                    <footer>
                        <button name="download_emp_report" string="Download"
                                type="object" class="oe_highlight"
                                icon="fa-refresh"/>
                    </footer>
                </form>
            </field>
        </record>

        <act_window id="download_pay_revies_data"
                        name="Download"
                        src_model="lk_batch"
                        res_model="employee_pay_revies_details_report_download"
                        view_type="form" view_mode="form" view_id="emp_pay_revies_details_report_download_wizard"
                        key2="client_action_multi" target="new" context="{'selected_active_ids':active_ids}"
            />

        <record id="lk_trainee_payroll_action_window" model="ir.actions.act_window">
            <field name="name">Pay Revise for Foundation Program</field>
            <field name="res_model">lk_batch</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="domain">[('training_completion_details_ids.traineeship_status','in',['Approved','Pay Revised'])]</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_pyroll_revise_trainee_list')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('payroll_revise_traineeship_form')})]"/>
        </record>

        <record id="kw_pyroll_revise_internship_list" model="ir.ui.view">
            <field name="name">Pyroll Revise Intern list</field>
            <field name="model">lk_batch</field>
            <field name="arch" type="xml">
                <tree create="false" import="false" delete="false">
                    <field name="financial_year_id" readonly="1"/>
                    <field name="name" readonly="1"/>
                    <field name="mrf_id" readonly="1"/>
                    <field name="internship_completion_payroll_details_ids" readonly="1" string="No of Employees"/>
                </tree>
            </field>
        </record>

        <record id="payroll_revise_internship_form" model="ir.ui.view">
            <field name="name">lk_payroll_revise_internship_form_view</field>
            <field name="model">lk_batch</field>
            <field name="arch" type="xml">
                <form create="false" delete="false">
                    <header>
                    </header>
                    <sheet>
                        <group>
                            <group>

                                <field name="financial_year_id" readonly='1' string='Financial Year'
                                       options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="name" readonly='1'/>
                                <field name="mrf_id" readonly='1'/>
                            </group>
                            <group>
                            </group>
                        </group>
                        <footer>
                            <button name="compute_ctc_revise_payroll_internship" string="Update CTC" type="object"
                                    class="btn-success ml-1"/>
                            <button name="compute_revise_payroll_internship" string="Compute Pay" type="object"
                                    class="oe_highlight ml-1"/>
                        </footer>
                        <group>
                            <group>
                                <field name="current_ctc_internship"/>
                            </group>
                        </group>
                        <group string="Pay Revise">
                            <field name="internship_completion_payroll_details_ids" required="1">
                                <tree editable="bottom" delete="false" create="false">
                                    <field name="lk_payroll_internship" invisible="1"/>
                                    <field name="internship_pay_revise_success_bool" invisible="1"/>
                                    <field name="employee_id" readonly='1' invisible="1"
                                           options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="employee_name" readonly='1'/>
                                    <field name="employee_code" readonly='1'/>
                                    <field name="deg_id" readonly='1'
                                           options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="doj" readonly='1' string="Date of joining"/>
                                    <field name="internship_status" readonly='1'/>
                                    <field name="internship_current_ctc" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_emp_basic" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_emp_hra" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_emp_conv" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_emp_pb" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_emp_cb" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_gratuity_enable" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_pf_enable" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_pf_deduction" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_enable_epf" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_eps_enable" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>
                                    <field name="internship_esi_applicable" attrs="{'readonly':[('internship_pay_revise_success_bool','=',True)]}"/>

                                    <button name="internship_payroll_revise_check" class="oe_highlight" type="object"
                                            string="Payroll Revise" attrs="{'invisible':[('internship_pay_revise_success_bool','=',True)]}"/>
                                </tree>
                            </field>
                            <group>
                            </group>
                            <group>
                            </group>
                        </group>

                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="lk_internship_payroll_action_window">
            <field name="name">Pay Revise for Internship Program</field>
            <field name="res_model">lk_batch</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="domain">[('internship_completion_details_ids.internship_status','in',['Approved'])]</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_pyroll_revise_internship_list')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('payroll_revise_internship_form')})]"/>

        </record>

        <menuitem name="Foundation Program"
                  id="lk_payroll_revise_menu1"
                  parent="lk_payroll_revise_menu"
                  sequence="1"
                  action="lk_trainee_payroll_action_window"/>

        <menuitem name="Internship Program"
                  id="lk_payroll_revise_menu2"
                  parent="lk_payroll_revise_menu"
                  sequence="2"
                  action="lk_internship_payroll_action_window"/>

    </data>
</odoo>
