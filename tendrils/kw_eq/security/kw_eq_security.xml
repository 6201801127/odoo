<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.module.category" id="module_category_kw_eq">
            <field name="name">EQ</field>
            <field name="description">EQ</field>
            <field name="sequence">3</field>
        </record>
        <record id="group_eq" model="res.groups">
            <field name="name">EQ User</field>
            <field name="category_id" ref="kw_eq.module_category_kw_eq"/>
        </record>

        <record id="group_eq_finance" model="res.groups">
            <field name="name">EQ Finance</field>
            <field name="category_id" ref="kw_eq.module_category_kw_eq"/>
        </record>

        <record id="group_eq_backlog" model="res.groups">
            <field name="name">EQ Backlog</field>
            <field name="category_id" ref="kw_eq.module_category_kw_eq"/>
        </record>

        <record id="group_eq_report_manager" model="res.groups">
            <field name="name">EQ Report Manager</field>
            <field name="category_id" ref="kw_eq.module_category_kw_eq"/>
        </record>

        <record id="group_eq_manager" model="res.groups">
            <field name="name">EQ Manager</field>
            <field name="category_id" ref="kw_eq.module_category_kw_eq"/>
        </record>
       

        <!-- <record id="user_eq_audit_trail_rule" model="ir.rule">
            <field name="name">User Record Rule</field>
            <field name="model_id" ref="model_kw_eq_audit_trail_details"/>
            <field name="groups" eval="[(4, ref('kw_eq.group_eq'))]"/>
            <field name="domain_force">['|','|','|','|','|','|','|','|','|','|',('level_1_id','=',user.employee_ids.id),('level_2_id','=',user.employee_ids.id),('level_3_id','=',user.employee_ids.id),('level_4_id','=',user.employee_ids.id),('level_5_id','=',user.employee_ids.id),('level_6_id','=',user.employee_ids.id),('revised_level_1_id','=',user.employee_ids.id),('revised_level_2_id','=',user.employee_ids.id),('revised_level_3_id','=',user.employee_ids.id),('revised_level_4_id','=',user.employee_ids.id),('revised_level_5_id','=',user.employee_ids.id)]</field>
        </record> -->

        <record id ="manager_eq_audit_trail_rule" model = "ir.rule">
            <field name = "name">Manager Record rule</field>
            <field name = "model_id" ref = "model_kw_eq_audit_trail_details" />
            <field name = "groups" eval = "[(4, ref ('kw_eq.group_eq_manager')),(4, ref ('kw_eq.group_eq_report_manager'))]" />
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id ="finance_eq_audit_trail_rule" model = "ir.rule">
            <field name = "name">Finance Record rule</field>
            <field name = "model_id" ref = "model_kw_eq_audit_trail_details" />
            <field name = "groups" eval = "[(4, ref ('kw_eq.group_eq_finance'))]" />
            <field name="domain_force">[('kw_oppertuinity_id.stage_id.code', '=','workorder')]</field>
        </record>

        <record id="sbu_eq_audit_trail_rule" model="ir.rule">
            <field name="name">SBU Record Rule</field>
            <field name="model_id" ref="model_kw_eq_audit_trail_details" />
            <field name="groups" eval="[(4, ref('kw_eq.group_eq'))]" />
            <field name="domain_force">
                [
                    '|', '|', '|', '|', '|', '|', '|', '|',
                        ('kw_oppertuinity_id.sales_person_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.presales_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.csg_head_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.reviewer_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.cso_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.cfo_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.ceo_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.pm_id.sbu_master_id.representative_id', '=', user.employee_ids.id),
                    '&amp;',
                        '&amp;',
                            ('kw_oppertuinity_id.kw_workorder_id', '&gt;', 0),
                            ('kw_oppertuinity_id.stage_id.code', '=', 'workorder'),
                        ('kw_oppertuinity_id.pm_id', '=', user.employee_ids.id)
                ]
            </field>
        </record>
        

        <record id="mf_eq_revision_report_record_rule" model="ir.rule">
            <field name="name">Manager Finance Record Rule for EQ Revision Report</field>
            <field name="model_id" ref="model_kw_eq_revision_report"/>
            <field name="groups" eval = "[(4, ref ('kw_eq.group_eq_manager')),(4, ref ('kw_eq.group_eq_finance'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id ="reportmanager_eq_revision_report_record_rule" model = "ir.rule">
            <field name = "name">Report Manager Record rule</field>
            <field name = "model_id" ref = "model_kw_eq_revision_report" />
            <field name = "groups" eval = "[(4, ref ('kw_eq.group_eq_report_manager'))]" />
            <field name="domain_force">[('kw_oppertuinity_id.kw_workorder_id', '&gt;',0),('kw_oppertuinity_id.stage_id.code', '=','workorder')]</field>
        </record>

      
        <record id="user_eq_revision_report_record_rule" model="ir.rule">
            <field name="name">User Record Rule for EQ Revision Report</field>
            <field name="model_id" ref="model_kw_eq_revision_report"/>
            <field name="groups" eval="[(4, ref('kw_eq.group_eq'))]"/>
            <field name="domain_force">
                [
                    '|',
                    '|',
                    '|',
                    '|',
                        ('kw_oppertuinity_id.pm_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.pm_id.sbu_master_id.representative_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.presales_id','=',user.employee_ids.id),
                        ('kw_oppertuinity_id.reviewer_id','=',user.employee_ids.id),
                    '&amp;',
                        '&amp;',
                            ('kw_oppertuinity_id.stage_id.code', '=', 'workorder'),
                            ('kw_oppertuinity_id.kw_workorder_id', '&gt;', 0),
                        '|',
                        '|',
                        '|',
                        '|',
                            ('kw_oppertuinity_id.sales_person_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.csg_head_id','=',user.employee_ids.id),
                            ('kw_oppertuinity_id.cso_id','=',user.employee_ids.id),
                            ('kw_oppertuinity_id.cfo_id','=',user.employee_ids.id),
                            ('kw_oppertuinity_id.ceo_id','=',user.employee_ids.id),
                ]
            </field>
        </record>
        

        <record id ="mf_eq_report_record_rule" model = "ir.rule">
            <field name = "name">Report Manager Finance Record rule for EQ Report</field>
            <field name = "model_id" ref = "model_kw_eq_estimate_report" />
            <field name = "groups" eval = "[(4, ref ('kw_eq.group_eq_report_manager')),(4, ref ('kw_eq.group_eq_finance'))]" />
            <field name="domain_force">[('kw_oppertuinity_id.stage_id.code', '=', 'opportunity')]</field>
        </record>

        <record id ="manager_eq_report_record_rule" model = "ir.rule">
            <field name = "name">Manager Record rule for EQ Report</field>
            <field name = "model_id" ref = "model_kw_eq_estimate_report" />
            <field name = "groups" eval = "[(4, ref ('kw_eq.group_eq_manager'))]" />
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>


        <record id="user_eq_report_record_rule" model="ir.rule">
            <field name="name">User Record Rule for EQ Report</field>
            <field name="model_id" ref="model_kw_eq_estimate_report"/>
            <field name="groups" eval="[(4, ref('kw_eq.group_eq'))]"/>
            <field name="domain_force">
                [
                    '|',
                    '|',
                        ('kw_oppertuinity_id.pm_id', '=', user.employee_ids.id),
                        ('kw_oppertuinity_id.pm_id.sbu_master_id.representative_id', '=', user.employee_ids.id),
                    '&amp;',
                            ('kw_oppertuinity_id.stage_id.code', '=', 'opportunity'),
                        '|',
                        '|',
                        '|',
                        '|',
                        '|',
                        '|',
                            ('kw_oppertuinity_id.sales_person_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.csg_head_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.cso_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.cfo_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.ceo_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.reviewer_id', '=', user.employee_ids.id),
                            ('kw_oppertuinity_id.presales_id', '=', user.employee_ids.id),
                ]
            </field>
        </record>
        
    </data>
</odoo>
