<?xml version='1.0' encoding='UTF-8' ?>
<odoo>

    <data>
        <!--Start:: Leave Take Action Form-->
        <record model="ir.ui.view" id="view_kw_apply_leave_take_action_form">
            <field name="name">Apply Leave Take Action Form</field>
            <field name="model">hr.leave</field>
            <field name="priority">99</field>
            <field name="arch" type="xml">
                <form string="Leave Request">
                    <field name="can_reset" invisible="1"/>
                    <field name="can_approve" invisible="1"/>
                    <field name="is_approver" invisible="1"/>
                    <field name="is_my_leave_request" invisible="1"/>

                    <sheet >
                        <field name="leave_type_request_unit" invisible="1" />
                        <group>
                            <group >
                                <field name="holiday_type" string="Mode" invisible="1" />
                                <field name="apply_for" widget="radio" readonly="1" options="{'horizontal': true}" />
                                <field name="employee_id" readonly="1"/>
                                <field name="employee_company_id" invisible="0" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="holiday_status_id" context="{'order_display':'name','tree_view_ref': 'kw_hr_leaves.kw_leaves_hr_leave_type'}" domain="[('valid', '=', True),('company_id','=',employee_company_id)]" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                <field name="number_of_days" invisible="1" />

                            </group>
                            <!--,('id','&gt;',0)  -->
                            <group attrs="{'invisible': ['|',('employee_id', '=', False),('holiday_status_id', '=', False)]}">
                                <table class="table table-bordered">
                                    <tr class="leave_count_details text-center">
                                        <th class="leave_count_header">
                                            <label for="max_leaves" string="ENTITLED" style="font-weight: bold !important;" />
                                        </th>
                                        <th class="leave_count_header">
                                            <label for="leaves_taken" string="APPLIED" style="font-weight: bold !important;" />
                                        </th>
                                        <th class="leave_count_header">
                                            <label for="leaves_taken" string="GRANTED" style="font-weight: bold !important;" />
                                        </th>
                                        <th class="leave_count_header">
                                            <label for="remaining_leaves" string="BALANCE" style="font-weight: bold !important;" />
                                        </th>
                                    </tr>
                                    <tr>
                                        <td class="leave_count_data">
                                            <field name="max_leaves" string="ENTITLED" />
                                        </td>
                                        <td class="leave_count_data">
                                            <field name="waiting_for_approval_leaves" string="PENDING FOR APPROVAL" />
                                        </td>
                                        <td class="leave_count_data">
                                            <field name="leaves_taken" string="GRANTED" class="o_adress_state" />
                                        </td>
                                        <td class="leave_count_data">
                                            <field name="remaining_leaves" string="BALANCE" class="o_address_zip" />
                                        </td>
                                    </tr>
                                </table>
                            </group>
                        </group>
                        <table class="o_group o_inner_group">
                            <tbody>
                                <tr>
                                    <td class="o_td_label">
                                        <label for="number_of_days_display" string="Duration" />
                                    </td>
                                    <td style="width: 100%">
                                        <div attrs="{'invisible': [('leave_type_request_unit', '=', 'hour')]}">
                                            <field name="number_of_days_display" nolabel="1" class="oe_inline" modifiers="{'readonly':true}"/>
                                            <span class="ml8">
                                        Days
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="o_td_label">
                                        <label for="request_date_from" string="From" />
                                    </td>
                                    <td style="width: 100%">
                                        <field name="status" invisible="1" />
                                        <field name="is_approver" invisible="1" />
                                        <field name="date_from" invisible="1" required="1" modifiers="{'required':true}"/>
                                        <field name="date_to" invisible="1" modifiers="{'required':true}"/>
                                        <div class="o_row o_row_readonly o_hr_holidays_dates">
                                            <field name="request_date_from" class="oe_inline" />
                                            <field name="request_date_from_period" class="oe_inline" string="In" options="{'horizontal': True}" attrs="{'required': [('request_unit_half', '=', True)],'invisible': [('request_unit_half', '=', False)]}" />
                                            <label for="request_unit_half" />
                                            <field name="request_unit_half" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="o_td_label">
                                        <label for="request_date_to" string="To" />
                                    </td>
                                    <td style="width: 100%">
                                        <div class="o_row o_row_readonly o_hr_holidays_dates">
                                            <field name="request_date_to" class="oe_inline" />
                                            <field name="request_date_to_period" class="oe_inline" string="In" options="{'horizontal': True}" attrs="{'required': [('request_unit_half_to_period', '=', True)],'invisible': [('request_unit_half_to_period', '=', False)]}" />

                                            <label for="request_unit_half_to_period" />
                                            <field name="request_unit_half_to_period" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="o_td_label">
                                        <label for="name" string="Reason" />
                                    </td>
                                    <td style="width: 100%">
                                        <field name="name" readonly="1" />
                                    </td>
                                </tr>
                                <field name="leave_code" invisible="1" />

                                <field name="leave_address1" readonly="1" attrs="{'invisible': [('leave_code', '!=', 'EL')]}"/>
                                <field name="leave_address2" readonly="1" attrs="{'invisible': [('leave_code', '!=', 'EL')]}" />
                                <field name="phone_no" readonly="1" attrs="{'invisible': [('leave_code', '!=', 'EL')]}" />
                                <div style="color:red; font-style: italic">
                                    <field name="message" attrs="{'invisible': [ ('status', '!=',True)]}" modifiers="{'invisible':[['status','!=',true]],'readonly':true}"/>
                                </div>
                                <!-- <separator /> -->
                            </tbody>
                        </table>
                        <group>
                            <field name="medical_doc" readonly="1" attrs="{'invisible': ['|','&amp;',('leave_code', '=', 'ML'),('number_of_days','&lt;',3),('leave_code', 'not in', ['ML','SPL'])]}" filename="ref_name" string="Medical Proof"/>
                            <field name="ref_name" invisible="1"/>
                        </group>
                        <group>
                            <field name="forward_request" string="Forward Request" attrs="{'invisible': ['|',('action_type', 'not in',[False,'forward']),('action_type', '=','cancel')]}" />
                            <field name="forward_to" string="Forward To" attrs="{'invisible': [('forward_request', '=', False)],'required': [('forward_request', '=', True)]}" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                            <field name="action_remark" string="Remark" required="1" placeholder="Enter your remark..."/>
                        </group>
                        <!-- 
                <group>
                   
                </group> -->
                    </sheet>
                    <footer>
                        <field name="action_type" invisible='1' />
                        <field name="state" invisible='1'  />
                        <button string='Approve' attrs="{'invisible': ['|',('forward_request', '=', True),('action_type', 'not in',['approve',False])]}" name="leave_request_approve_action" type="object" class="btn-success mr-2" />

                        <button string="Hold" type="object" class="btn btn-info" attrs="{'invisible':
                          ['|','|',('forward_request', '=', True),('state','in', ['hold']),('action_type', 'not in',['hold',False])]}" name="leave_request_hold_action" />

                        <button string='Reject' attrs="{'invisible': ['|',('forward_request', '=', True),('action_type', 'not in',['reject',False])]}" name="leave_request_reject_action" type="object" class="btn font-weight-bold text-white btn-danger" />

                        <button string='Forward' attrs="{'invisible': ['|',('forward_request', '=', False),('action_type', 'not in',['forward',False])]}" name="leave_request_forward_action" type="object" class="btn font-weight-bold text-white btn-warning" />

                        <!-- <button string='Cancel Request' attrs="{'invisible': [('action_type', '!=','cancel')]}" name="allocation_request_cancel" type="object" class="btn font-weight-bold text-white btn-warning" /> -->

                        <button string="Close" class="btn-secondary" special="cancel"/>

                    </footer>

                </form>
            </field>
        </record>


        <record id="hr_holidays.hr_leave_action_my" model="ir.actions.act_window">
            <field name="view_mode">tree,form,calendar,activity</field>
            <field name="context">{"search_default_current_financial_year": 1,"delete": False}</field>
        </record>

        <!-- END :: Leave Take Action Form -->

        <record id="hr_leave_view_tree_day_cal" model="ir.ui.view">
            <field name="name">hr.leave.view.tree.day cal modification</field>
            <field name="model">hr.leave</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_view_tree"/>
            <field name="arch" type="xml">

                <field name="date_from" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
                <field name="date_to" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
                <field name="date_to" position="after">
                    <field name="from_day_half" string="Start Date"/>
                    <field name="to_day_half" string="End Date"/>
                </field>
                <field name="state" position="after">
                    <field name="second_approver_id" attrs="{'invisible': [ ('state', 'not in', ['confirm','hold','forward','validate1'] )]}"/>
                    <field name="action_taken_date" />
                    <field name="authority_remark" string="Remarks"/>
                    <field name="action_taken_on" invisible='1'/>
                </field>
                <field name="payslip_status" position="after">
                    <field name="is_approver" invisible="1"/>
                    <button string="Take Action" name="leave_take_action" type="object" class="oe_highlight leave_action_wizard" attrs="{'invisible': [('is_approver','=',False),('state', 'not in', ['validate1','confirm','hold','forward'] )]}" context="{'default_leave_request_id': active_id}"/>

                    <field name="is_my_leave_request" invisible="1"/>
                    <field name="cancellation_log_ids" invisible="1"/>
                    <field name="is_cancel" invisible="1"/>
                    <button string="Cancel" name="cancel_approved_leave" type="object" class="btn-danger" attrs="{'invisible': ['|','|',('state', 'not in', ['validate']),('is_my_leave_request', '=', False),('is_cancel', '=', True)]}"/>
                </field>
                <xpath expr="//button[@name='action_approve']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='action_refuse']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='duration_display']" position="attributes">
                    <attribute name="string">Requested Days</attribute>
                </xpath>
            </field>
        </record>

        <record id="hr_leave_view_tree_my_cal" model="ir.ui.view">
            <field name="name">hr.holidays.view.tree cal</field>
            <field name="model">hr.leave</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_view_tree_my"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='leave_take_action']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='employee_id']" position="attributes">
                    <attribute name="invisible">0</attribute>
                </xpath>


            </field>
        </record>

        <record model="ir.ui.view" id="kw_apply_leave_primary_form_view">
            <field name="name">Apply Leave Primary Form</field>
            <field name="model">hr.leave</field>
            <field name="arch" type="xml">
                <form string="Leave Request" duplicate='false'>
                    <field name="can_reset" invisible="1"/>
                    <field name="can_approve" invisible="1"/>
                    <field name="is_approver" invisible="1"/>
                    <field name="is_my_leave_request" invisible="1"/>
                    <field name="compute_log" invisible="1"/>
                    <header>
                        <button string="Cancel" name="cancel_leave" type="object" class="btn-danger" attrs="{'invisible': ['|', ('is_my_leave_request', '=', False),('state', 'not in', ['confirm'])]}"/>

                        <!-- <button string="Approve" name="action_approve" type="object" class="btn-success mr-2" attrs="{'invisible': ['|', ('is_approver', '=', False), ('state', 'not in', ('confirm','validate','validate1'))]}" />
                <button string="Forward" name="action_forward" attrs="{'invisible': ['|', ('is_approver', '=', False), ('state', 'not in', ('confirm','validate','validate1'))]}" type="object" class="btn font-weight-bold text-white btn-warning" />
                <button string="Hold" name="hold_leave" attrs="{'invisible': ['|', ('is_approver', '=', False), ('state', 'not in', ('confirm','validate','validate1'))]}" type="object" class="btn btn-info" />
                <button string="Reject" name="action_refuse" type="object" attrs="{'invisible': ['|', ('is_approver', '=', False), ('state', 'not in', ('confirm','validate','validate1'))]}" class="btn font-weight-bold text-white btn-danger" /> -->
                        <field name="state" widget="statusbar" statusbar_visible="confirm,validate"/>
                    </header>
                    <sheet >
                        <field name="leave_type_request_unit" invisible="1" />
                        <group >
                            <group >
                                <field name="leave_cycle_id" invisible="1" />
                                <field name="leave_sub_type_required" invisible="1"/>
                                <field name="employee_company_id" invisible="0" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                                <field name="apply_for" widget="radio" attrs="{'readonly': [('id','!=',False)]}" options="{'horizontal': true}" />
                                <field name="employee_id" required="1" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('id','!=',False)]}" />
                                <field name="parent_holiday_status_id" required="1" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)]}" domain="[('valid', '=', True),('parent_leave_id','=',False),('company_id','=',employee_company_id)]" context="{'order_display':'name','employee_id':employee_id, 'default_date_from':date_from,'tree_view_ref': 'kw_hr_leaves.kw_leaves_hr_leave_type'}" options="{'no_create': True, 'no_open': True}" />
                                <field name="holiday_status_id" readonly="1" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}" force_save="1" invisible="1"/>
                                <field name="leave_sub_type_id" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'invisible':[('leave_sub_type_required','=',False)],'required':[('leave_sub_type_required','=',True)]}" context="{'order_display':'name','employee_id':employee_id, 'default_date_from':date_from,'tree_view_ref': 'kw_hr_leaves.kw_leaves_hr_leave_type'}" options="{'no_create': True, 'no_open': True}"/>
                                <field name="number_of_days" invisible="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft','confirm']]]}"/>
                                <label for="number_of_days_display" string="Duration" />
                                <div >
                                    <div attrs="{'invisible': [('leave_type_request_unit', '=', 'hour')]}">
                                        <field name="number_of_days_display" nolabel="1" class="oe_inline" modifiers="{'readonly':true}"/>
                                        <span class="ml8">
                                    Days
                                        </span>
                                    </div>
                                    <div attrs="{'invisible': [('leave_type_request_unit', '!=', 'hour')]}">
                                        <field name="number_of_hours_display" nolabel="1" class="oe_inline" modifiers="{'readonly':true}"/>
                                        <span class="ml8">
                                    Hours
                                        </span>
                                    </div>
                                </div>
                                <label for="request_date_from" string="From" />
                                <div >
                                    <field name="status" invisible="1" />
                                    <field name="is_approver" invisible="1" />
                                    <field name="date_from" invisible="1" required="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft','confirm']]],'required':true}"/>
                                    <field name="date_to" invisible="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft','confirm']]],'required':true}"/>
                                    <div class="o_row o_row_readonly o_hr_holidays_dates">
                                        <field name="request_date_from" class="oe_inline" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)]}" />
                                        <field name="request_date_from_period" class="oe_inline" string="In" options="{'horizontal': True}" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'required': [('request_unit_half', '=', True)],'invisible': [('request_unit_half', '=', False)]}" />
                                        <label for="request_unit_half" attrs="{'readonly': [('state', 'not in', ['draft', 'confirm'])]}" />
                                        <field name="request_unit_half" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)]}" />
                                    </div>
                                    <div class="o_row o_row_readonly">
                                        <label for="request_unit_hours" invisible="1" attrs="{'readonly': [('state', 'not in', ['draft', 'confirm'])],}" />
                                        <field name="request_unit_hours" invisible="1" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],}" />
                                        <label for="request_unit_custom" invisible="1" attrs="{                            'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],                         }" />
                                        <field name="request_unit_custom" invisible="1" attrs="{                            'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],                         }" />
                                    </div>
                                    <div class="o_row o_row_readonly">
                                        <label for="request_hour_from" string="From" attrs="{'invisible': [('request_unit_hours', '=', False)]}" />
                                        <field name="request_hour_from" attrs="{'readonly': [('state', '=', 'validate')],'required': [('request_unit_hours', '=', True)],'invisible': [('request_unit_hours', '=', False)]}" />

                                        <label for="request_hour_to" string="To" attrs="{'invisible': [('request_unit_hours', '=', False)]}" />
                                        <field name="request_hour_to" attrs="{'readonly': [('state', '=', 'validate')],'required': [('request_unit_hours', '=', True)],'invisible': [('request_unit_hours', '=', False)]}" />
                                    </div>
                                </div>
                                <label for="request_date_to" string="To" />
                                <div >
                                    <div class="o_row o_row_readonly o_hr_holidays_dates">
                                        <field name="request_date_to" class="oe_inline" attrs="{                                 'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],                                                             }" />
                                        <field name="request_date_to_period" class="oe_inline" string="In" options="{'horizontal': True}" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'required': [('request_unit_half_to_period', '=', True)],'invisible': [('request_unit_half_to_period', '=', False)]}" />

                                        <label for="request_unit_half_to_period" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)]}" />
                                        <field name="request_unit_half_to_period" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)]}" />
                                    </div>
                                </div>
                                <field name="name" attrs="{'readonly': [ ('id', '!=', False)]}" />
                                <field name="leave_code" invisible="1" />
                                <field name="number_of_days" invisible="1" modifiers="{'readonly':[['state','not in',['hold','forward','draft','confirm']]]}"/>
                                <field name="leave_address1" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'invisible': [('leave_code', '!=', 'EL')]}"/>
                                <field name="leave_address2" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'invisible': [('leave_code', '!=', 'EL')]}" />
                                <field name="phone_no" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'invisible': [('leave_code', '!=', 'EL')]}" />
                                <field name="medical_doc" attrs="{'readonly': ['|',('state', 'not in', ['confirm']),('id','&gt;', 0),('is_approver', '=', False)],'required': ['|','&amp;',('leave_code', '=', 'ML'),('number_of_days','&gt;=',3),('leave_code', '=', 'SPL')],'invisible': ['|','&amp;',('leave_code', '=', 'ML'),('number_of_days','&lt;',3),('leave_code', 'not in', ['ML','SPL'])]}" string="Medical Proof" filename="ref_name"/>
                                <field name="ref_name" invisible="1"/>
                                <div style="color:red; font-style: italic">
                                    <field name="message" attrs="{'invisible': [ ('status', '!=',True)]}" modifiers="{'invisible':[['status','!=',true]],'readonly':true}"/>
                                </div>
                            </group>
                            <!--,('id','&gt;',0)  -->
                            <group attrs="{'invisible': ['|',('employee_id', '=', False),('holiday_status_id', '=', False)]}">
                                <div class="o_address_format oe_edit_only">
                                    <table class="table table-bordered" style="width: 50%;">
                                        <tr class="leave_count_details text-center">
                                            <th class="leave_count_header">
                                                <label for="max_leaves" string="ENTITLED" style="font-weight: bold !important;" />
                                            </th>
                                            <th class="leave_count_header">
                                                <label for="waiting_for_approval_leaves" string="APPLIED" style="font-weight: bold !important;" />
                                            </th>
                                            <th class="leave_count_header">
                                                <label for="leaves_taken" string="GRANTED" style="font-weight: bold !important;" />
                                            </th>
                                            <th class="leave_count_header">
                                                <label for="remaining_leaves" string="BALANCE" style="font-weight: bold !important;" />
                                            </th>
                                        </tr>
                                        <tr>
                                            <td class="leave_count_data">
                                                <field name="max_leaves" class="o_address_city" modifiers="{'readonly':true}"/>
                                            </td>
                                            <td class="leave_count_data">
                                                <field name="waiting_for_approval_leaves" class="o_address_state" modifiers="{'readonly':true}"/>
                                            </td>
                                            <td class="leave_count_data">
                                                <field name="leaves_taken" class="o_adress_state" modifiers="{'readonly':true}"/>
                                            </td>
                                            <td class="leave_count_data">
                                                <field name="remaining_leaves" class="o_address_zip" modifiers="{'readonly':true}"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </group>
                            <group >
                                <field name="holiday_type" string="Mode" invisible="1" />

                            </group>
                            <div invisible="1">
                                <separator string="Comment by Manager" />
                                <field name="report_note" placeholder="e.g. Report to the next month..." />
                            </div>
                        </group>
                        <notebook attrs="{'invisible': ['|',('state', 'in', ['confirm','draft']),('compute_log','=',False)]}">
                            <page string="Approval Logs">
                                <group >
                                    <field name="approval_log_ids" string="Approval Logs" readonly='1'/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="hr_holidays.hhr_leave_action_new_request_view_form" model="ir.actions.act_window.view">
            <field name="sequence">3</field>
            <field name="view_mode">form</field>
            <field name="act_window_id" ref="hr_holidays.hr_leave_action_new_request"/>
            <field name="view_id" ref="kw_apply_leave_primary_form_view"/>
        </record>

        <record id="hr_holidays.hr_leave_action_my_view_form" model="ir.actions.act_window.view">
            <field name="sequence">2</field>
            <field name="view_mode">form</field>
            <field name="act_window_id" ref="hr_holidays.hr_leave_action_my"/>
            <field name="view_id" ref="kw_apply_leave_primary_form_view"/>
        </record>

        <record id="view_hr_leave__kanban_inherit" model="ir.ui.view">
            <field name="name">hr.leave.inherit kanban view</field>
            <field name="model">hr.leave</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_view_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='can_approve']" position="after">
                    <field name="is_approver" />
                    <field name="state" />
                </xpath>
                <xpath expr="//a[@name='action_approve']" position="replace">

                    <!--  <field name="is_approver" invisible="1"/>
                <field name="state" invisible="1"/> -->


                    <!-- <a t-if="record.can_approve.value and record.is_approver.value" name="leave_take_action" type="object" role="menuitem" attrs="{'invisible': [('state', 'not in', ['confirm','hold','forward'] )]}" context="{'default_leave_request_id': active_id,'default_action_type':'approve'}" class="dropdown-item">Approve</a> -->
                </xpath>


                <xpath expr="//a[@name='action_refuse']" position="replace">
                    <!-- <a t-if="record.can_approve.value  and record.is_approver.value" name="leave_take_action" type="object" role="menuitem" attrs="{'invisible': [('state', 'not in', ['confirm','hold','forward'] )]}" context="{'default_leave_request_id': active_id,'default_action_type':'reject'}" class="dropdown-item">Reject</a> -->
                </xpath>

                <xpath expr="//a[@type='delete']" position="replace">
                </xpath>

                <xpath expr="//div[hasclass('oe_kanban_global_click')]" position="inside">
                    <div>
                        <div class="float-right">
                            <button t-if="record.can_approve.value and record.is_approver.value" name="leave_take_action" type="object" class="btn btn-primary" attrs="{'invisible': [('is_approver','=',False),('state', 'not in', ['confirm','hold','forward'] )]}" context="{'default_leave_request_id': active_id}">Take Action</button>
                        </div>
                    </div>

                </xpath>
                <xpath expr="//div[@class='row no-gutters justify-content-end']" position="replace">
                    <field name="from_day_half" invisible='1'/>
                    <field name="to_day_half" invisible='1'/>
                    <div class="row no-gutters justify-content-end">
                        <div class="col-2">
                            <span class="text-muted">from</span>
                        </div>
                        <div class="col-8">
                            <t t-esc="record.from_day_half.value"/>
                        </div>
                        <div class="w-100"/>
                        <div class="col-2">
                            <span class="text-muted">to</span>
                        </div>
                        <div class="col-8">
                            <t t-esc="record.to_day_half.value"/>
                        </div>
                    </div>
                </xpath>

            </field>
        </record>



        <record model="ir.ui.view" id="view_kw_hr_leaves_cancel_comment_form">
            <field name="name">Reason of Cancellation</field>
            <field name="model">hr.leave</field>
            <field name="priority">100</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <separator string="Reason of Cancellation"/>
                        <field name="cancel_reason" required="1"/>
                    </sheet>
                    <footer>
                        <button string="Submit" name="cancel_leave" type="object" class="oe_highlight" />
                    </footer>
                </form>
            </field>
        </record>

        <record id="hr_holidays.hr_leave_action_action_approve_department" model="ir.actions.act_window">
            <field name="name">Leaves to Approve</field>
            <field name="domain">[('second_approver_id.user_id','=',uid),('state','in',['validate1','confirm','hold','forward'])]</field>
            <field name="context">{"create": False,"import": False,"delete": False }</field>
            <field name="view_mode">tree</field>
        </record>

        <record id="hr_holidays.hr_leave_action_all" model="ir.actions.act_window">
            <field name="context">{"create": False,"import": False,"delete": False ,'check_all':1,'search_default_current_financial_year':1}</field>
        </record>

        <record id="hr_holidays.action_hr_holidays_dashboard" model="ir.actions.act_window">
            <field name="context">{'search_default_year': 1,'search_default_my_leaves':1, 'search_default_validated': 1,'search_default_group_employee': 1,}</field>
            <field name="domain">['&amp;','&amp;',('state','in',['confirm','validate']),('holiday_type','=','employee'),'|',('employee_id.user_id','=',uid),('employee_id.parent_id.user_id','=',uid)]</field>

        </record>

        <record id="view_hr_leave_search_view_inherit" model="ir.ui.view">
            <field name="name">hr.leave.inherit search view</field>
            <field name="model">hr.leave</field>
            <field name="inherit_id" ref="hr_holidays.view_hr_holidays_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="create_date"/>
                    <field name="designation" />
                    <field name="department" />
                    <field name="division" />
                    <field name="section"/>
                    <filter string="Current Financial Year" name="current_financial_year" domain="[('current_financial_year','=',True)]"/>
                    <filter string="Previous Financial Year" name="previous_financial_year" domain="[('previous_financial_year','=',True)]"/>
                    <filter string="This Month" name="current_month" domain="['|','|',('date_from', 'like',context_today().strftime('%Y-%m')),
                                                                                             ('date_to', 'like',context_today().strftime('%Y-%m')),
                                                                                             '&amp;',('date_from','&lt;',(context_today().strftime('%Y-%m-01'))), ('date_to','&gt;=',(context_today()+relativedelta(months=1)).strftime('%Y-%m-01'))
                                                                                    ]"/>
                    <separator/>
                    <filter string="To Approve" domain="[('state', '=', 'confirm')]" name="confirmed"/>
                    <filter string="On Hold" domain="[('state', '=', 'hold')]" name="hold"/>
                    <filter string="Forwarded" domain="[('state', '=', 'forward')]" name="forward"/>
                    <filter string="Approved" domain="[('state', '=', 'validate')]" name="approved"/>
                    <filter string="Cancelled" domain="[('state', '=', 'cancel')]" name="cancelled"/>
                    <filter string="Rejected" domain="[('state', '=', 'refuse')]" name="rejected"/>
                    <separator/>
                    <filter string="Applied Date" name="date_of_apply" date="create_date"/>
                    <filter string="Leave Date" name="date_of_leave" date="request_date_from"/>
                    <separator/>
                </xpath>
                <!-- <xpath expr="//filter[@name='my_team_leaves']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath> -->
                <xpath expr="//filter[@name='my_leaves']" position="replace">
                    <filter string="My Leaves" name="my_leaves" domain="[('employee_id.user_id', '=', uid)]"/>
                </xpath>
                <xpath expr="//filter[@name='my_team_leaves']" position="replace">
                    <filter string="My Subordinate Leaves" name="my_team_leaves" domain="[('employee_id.parent_id.user_id', '=', uid)]" help="Leaves of Your Subordinate"/>
                </xpath>
                <xpath expr="//filter[@name='approve']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='validated']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='active_types']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='message_needaction']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='department']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='gray']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='todo']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='activities_overdue']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='activities_today']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='activities_upcoming_all']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='year']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_name']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_category']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_manager']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_second_approver_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_type']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_date_from']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='group_second_approver_id']" position="after">
                    <filter name="group_second_approver_id" string="Pending At" context="{'group_by':'second_approver_id'}"/>
                </xpath>
                <xpath expr="//filter[@name='group_type']" position="after">
                    <filter name="group_type" string="Leave Type" context="{'group_by':'holiday_status_id'}"/>
                </xpath>
            </field>
        </record>

        <record id="hr_leave_view_tree_restrict_actions" model="ir.ui.view">
            <field name="name">hr.leave.view.tree.restrict actions modification</field>
            <field name="model">hr.leave</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_view_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='leave_take_action']" position="attributes">
                    <attribute name="invisible">context.get('check_all',False)</attribute>
                </xpath>
                <xpath expr="//button[@name='action_validate']" position="attributes">
                    <attribute name="invisible">context.get('check_all',False)</attribute>
                </xpath>
                <xpath expr="//button[@name='cancel_approved_leave']" position="attributes">
                    <attribute name="invisible">context.get('check_all',False)</attribute>
                </xpath>
                <field name="payslip_status" position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                </field>
                <xpath expr="//field[@name='holiday_type']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='holiday_type']" position="after">
                    <field name="applied_by"/>
                </xpath>
            </field>
        </record>

        <record id="view_hr_leave_kanban_restrict_actions" model="ir.ui.view">
            <field name="name">hr.leave.restrict_actions kanban view</field>
            <field name="model">hr.leave</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_view_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='leave_take_action']" position="attributes">
                    <attribute name="invisible">context.get('check_all',False)</attribute>
                </xpath>
                <xpath expr="//a[@type='edit']" position="attributes">
                    <attribute name="invisible">context.get('check_all',False)</attribute>
                </xpath>
            </field>
        </record>

        <record id="hr_holidays.hr_leave_action_new_request" model="ir.actions.act_window">
            <field name="context">{"search_default_current_month": 1}</field>
        </record>
        <record id="hr_holidays.hr_leave_action_payroll" model="ir.actions.act_window">
            <field name="domain">['|',('employee_id.user_id','=',uid),('employee_id.parent_id.user_id','=',uid)]</field>
            <field name="groups_id" eval="[(6,0,[ref('hr_holidays.group_hr_holidays_manager')])]"/>
        </record>

    </data>
</odoo>