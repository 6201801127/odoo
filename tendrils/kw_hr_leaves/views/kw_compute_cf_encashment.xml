<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
      
        <record model="ir.ui.view" id="kw_approval_encashment_period_list">
            <field name="name">Carry Forward &amp; Encashment</field>
            <field name="model">kw_compute_cf_encashment</field>
            <field name="arch" type="xml">
                <tree decoration-danger="applied_eos == True">
                    <field name="employee_id" invisible="1"/>
                    <field name="emp_code" />  
                    <field name="emp_name" />  
                    <field name="emp_designation" />
                    <field name="department"/>                                  
                    <field name="grade" />
                    <field name="band" />  
                    <field name="date_of_joining" />
                    <field name="total_working_days" string="Total Days"/>

                    <field name="entitled" />
                    <field name="leave_taken" string="Taken" />
                    <field name="lapse_days" />
                    <field name="leave_balance" string="Balance"/>
                    <field name="encashment" string="Encashment"/>
                    <field name="encashment_eligible" invisible="1"/>
                    <field name="carry_forward" string="Carried Forward" />
                    
                    <field name="basic" groups="kw_employee.group_payroll_manager"/>
                    <field name="basic_encash" groups="kw_employee.group_payroll_manager" sum="basic_encash"/>  
                    <field name="gross" groups="kw_employee.group_payroll_manager"/>
                    <field name="gross_encash" groups="kw_employee.group_payroll_manager" sum="gross_encash"/>  
                    <field name="final_gross" groups="kw_employee.group_payroll_manager"/>
                    <field name="final_gross_encash" groups="kw_employee.group_payroll_manager" sum="final_gross_encash"/>  
                    <field name="ctc" groups="kw_employee.group_payroll_manager"/>
                    <field name="ctc_encash" groups="kw_employee.group_payroll_manager" sum="ctc_encash"/>  
                    <field name="applied_eos" invisible="0"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="kw_approval_encashment_period_form">
            <field name="name">Carry Forward &amp; Encashment</field>
            <field name="model">kw_compute_cf_encashment</field>
            <field name="arch" type="xml">
                <form create="false">
                   
                    <sheet>
                        <group>
                           
                            <field name="employee_id" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                            <field name="leave_type_id" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                            <field name="fisc_year_id" />
                            <field name="date_of_joining" />
                            <field name="entitled" />
                           <!--  <field name="lapse_days" /> -->
                            <field name="leave_taken" />
                            <field name="leave_balance" />
                            <field name="carry_forward" string="Carry Forward" />
                            <field name="encashment" string="Encashable"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="kw_compute_cf_encashment_search" model="ir.ui.view">
            <field name="name">Carry Forward &amp; Encashment Search</field>
            <field name="model">kw_compute_cf_encashment</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name="employee_id" string="Employee" />
                    <field name="branch" string="Location" />
                    <field name="department" />
                    <field name="division"  />
                    <field name="fisc_year_id"  />
                    <field name="applied_eos" string="Resignated" />
                    <filter string="Current Financial Year" name="current_financial_year" domain="[('current_financial_year','=',True)]"/>
                    <filter string="Previous Financial Year" name="previous_financial_year" domain="[('previous_financial_year','=',True)]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Resignated" name="group_resignated_employees" context="{'group_by':'applied_eos'}"/>
                        <filter name="group_fisc_year_id" string="Financial Year" domain="[]" context="{'group_by':'fisc_year_id'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="action_kw_compute_cf_encashment_window" model="ir.actions.act_window">
            <field name="name">Carry Forward &amp; Encashment</field>
            <field name="res_model">kw_compute_cf_encashment</field>            
            <field name="view_mode">tree,form</field>
            <field name="context">{"create": False,"edit": False,"import": False,"toolbar":False,'search_default_current_financial_year':1}</field>
            <field name="domain">[('encashment_eligible','=',True)]</field>
        </record>

    </data>
</odoo>
