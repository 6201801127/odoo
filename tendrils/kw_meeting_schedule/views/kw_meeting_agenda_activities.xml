<?xml version="1.0"?>
<odoo>
  <data>   
    
      <record model="ir.ui.view" id="kw_meeting_agenda_activities_view_tree">
        <field name="name">kw_meeting_agenda_activities Tree</field>
        <field name="model">kw_meeting_agenda_activities</field>
        <field name="arch" type="xml">
          <tree import="false">
              <!-- <field name="activity_type" /> -->
              
              <field name="meeting_id" />
              <field name="agenda_id" />             
              <field name="name" string="Task"/>                
              <field name="target_date" />
              <field name="state" />            
          </tree>
        </field>
      </record>

      <!--Start: Tree view for smart button action window  -->
      <record model="ir.ui.view" id="kw_meeting_agenda_activities_button_view_tree">
        <field name="name">kw_meeting_agenda_activities Tree</field>
        <field name="model">kw_meeting_agenda_activities</field>
        <field name="arch" type="xml">
          <tree create="false" edit="false" >              
              <field name="agenda_id" />      
              <field name="activity_type" string="Type"/>           
              <field name="name" string="Description"/>   
              <field name="assigned_to" />             
              <field name="target_date" />
              <field name="state" />  
              <field name="activity_remark" />           
          </tree>
        </field>
      </record>

      <record model="ir.ui.view" id="kw_meeting_agenda_activities_view_form">
        <field name="name">kw_meeting_agenda_activities Form</field>
        <field name="model">kw_meeting_agenda_activities</field>
        <field name="arch" type="xml">
          <form >
              <sheet>  
                  <group>   
                      <field name="meeting_id" />    
                      <field name="agenda_id" readonly="1" />       
                      <field name="name" string="Task" readonly="1"/>                
                      <field name="target_date"  readonly="1" />
                      <field name="state" 
                      widget="radio" options="{'horizontal': true}" 
                      />        
                      <field name="activity_document" />
                      <field name="activity_remark" widget="html" />
            
                  </group>   
              </sheet>  
              <div class="oe_chatter">
                  <field name="message_follower_ids" widget="mail_followers"/>
                  <field name="message_ids" widget="mail_thread" />
              </div>
          </form>
        </field>
      </record>

      <!-- Start :  Search view -->
        <record id="search_view_kw_meeting_agenda_activities" model="ir.ui.view">
            <field name="name">Agenda Activities Search View</field>
            <field name="model">kw_meeting_agenda_activities</field>
            <field name="arch" type="xml">
                <search string="Search Activities">
                    <field name="name" string="Activities" filter_domain="[('name','ilike',self)]"/>
                    <!--  <field name="partner_ids"/> -->
                    <field name="activity_type" />
                    <field name="state"/>
                    <field name="target_date"/>
                    <filter string="Informational" name="filter_activity_type_info" domain="[('activity_type', '=','info')]" />
                    <filter string="Activity" name="filter_activity_type_activity" domain="[('activity_type', '=','activity')]" />

                    <filter string="Not Started" name="filter_state_not_started" domain="[('state', '=','not_started')]" />
                    <filter string="Completed" name="filter_state_completed" domain="[('state', '=','completed')]" />                    

                   <filter string="Target Date" name="filter_target_date" date="target_date"/>
 
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Activity" name="activity" domain="[]" context="{'group_by':'activity_type'}"/>
                        <filter name="group_state" string="State" context="{'group_by':'state'}"/>                       
                        <filter name="group_target_date" string="Target Date" domain="[]" context="{'group_by':'target_date'}"/>
                    </group>
                </search>
            </field>
        </record>

      <!--Start : My Activity Action Window-->
        <record model="ir.actions.act_window" id="kw_agenda_my_task_action_window">
            <field name="name">My Activities</field>
            <field name="res_model">kw_meeting_agenda_activities</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="kw_meeting_agenda_activities_view_tree"/>
            <field name="domain">[("activity_type", "=",'activity')]</field>
            <field name="context">{"mymeetingtasks": 1,"create": False}</field>
             <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                   No Records available.
                </p>
            </field>
        </record>
      <!--ENd : My Activity Action Window-->


      <!--Start : My Activity Action Window for smart button window -->
        <record model="ir.actions.act_window" id="action_get_meeting_task">
            <field name="name">My Activities</field>
            <field name="res_model">kw_meeting_agenda_activities</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="kw_meeting_agenda_activities_button_view_tree"/>            
            <field name="search_view_id" ref="search_view_kw_meeting_agenda_activities"/>
            <field name="domain">[("agenda_id.meeting_id", "=",active_id),("activity_type", "=",'activity')]</field>
            <field name="context">{"create": False,"edit": False}</field>
        </record>
      <!--ENd : My Activity Action Window  for action window  -->
   
    </data>
</odoo>
