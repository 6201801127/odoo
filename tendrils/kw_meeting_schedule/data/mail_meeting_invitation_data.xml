<?xml version="1.0"?>
<odoo>
    <data noupdate="0">

        <record id="kw_meeting_calendar_template_meeting_invitation" model="mail.template">
            <field name="name">Calendar: Meeting Invitation</field>
            <field name="model_id" ref="kw_meeting_schedule.model_kw_meeting_attendee"/>
            <field name="subject">Meeting Scheduled for ${object.event_id.name} by ${object.event_id.user_id.name} | ${object.event_id.display_time}</field>
                <!-- ${object.event_id.user_id.email or ''} -->
            <field name="email_from">${object.create_uid.email}</field>
            <!-- <field name="email_to" >${(object.email|safe)}</field> -->
            <field name="email_to" >${('' if object.partner_id and object.partner_id.email and object.partner_id.email==object.email else object.email|safe)}</field>
            <field name="partner_to">${object.partner_id and object.partner_id.email and object.partner_id.email==object.email and object.partner_id.id or False }</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html" type="html">
                <div>
                    % set colors = {'needsAction': 'grey', 'accepted': 'green', 'tentative': '#FFFF00',  'declined': 'red'}
                    <p>Hello ${object.common_name},</p>

                    <p>
                        ${object.event_id.user_id.partner_id.name} invited you for the <strong>${object.event_id.name} meeting</strong>
                        of ${object.event_id.user_id.company_id.name}.
                    </p>
                    <div style="text-align: center; margin: 16px 0px 16px 0px;">
                        <a href="/meeting_schedule/meeting/accept?db=${'dbname' in ctx and ctx['dbname'] or ''}&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                            style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                            Accept</a>
                        <a href="/meeting_schedule/meeting/decline?db=${'dbname' in ctx and ctx['dbname'] or '' }&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                            style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                            Decline</a>
                        <a href="/meeting_schedule/meeting/view?db=${'dbname' in ctx and ctx['dbname'] or ''}&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                            style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                            View</a>
                    </div>
                    <table border="0" cellpadding="0" cellspacing="0" style="width:100%">
                        <tr style="width:100%;">
                            <td style="width:70%">
                                <p><strong>Meeting Details: </strong></p>
                                <table border="0" cellpadding="5" cellspacing="0">
                                      <tr t-if="object.event_id.meeting_room_id">
                                          <td>Meeting Room</td>
                                          <td>:</td>
                                          <td> <span style="margin-left:5px">${object.event_id.meeting_room_id.name}(${object.event_id.meeting_room_id.floor_name})</span></td>
                                      </tr>
                                    % if object.event_id.agenda_ids:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;">Agenda</td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
                                            % for agenda in object.event_id.agenda_ids:
                                                  <li>
                                                    <span style="margin-left:5px">${agenda.name}</span>
                                                </li>
                                            % endfor
                                          </td>
                                      </tr>
                                    % endif
                                    % if object.event_id.description:
                                      <tr>
                                          <td style="width: 30%">Required Information</td>
                                          <td style="width: 5%">:</td>
                                          <td style="width: 65%">
                                               % if object.event_id.description:
                                              <span style="margin-left:5px"> ${object.event_id.description}</span>
                                                % endif
                                          </td>
                                      </tr>
                                    % endif
                                     % if object.event_id.recurrency:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;">Meeting Date </td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
<!--                                                  ${object.event_id.rrule}-->
                                                  % for recurring_event in object.event_id.child_ids:
                                                        <div style="margin-left:5px;margin-bottom:5px;">${recurring_event.display_time}</div>
                                                % endfor
                                          </td>
                                      </tr>
                                    % endif
                                    % if not object.event_id.allday and object.event_id.duration:
                                      <tr>
                                          <td style="width: 30%">Duration</td>
                                          <td style="width: 5%">:</td>
                                          <td style="width: 65%">
                                              <span style="margin-left:5px"> ${('%dH:%dM' % (object.event_id.duration,(object.event_id.duration*60)%60))}</span>
                                          </td>
                                      </tr>
                                     % endif
                                     % if object.event_id.mom_required:
                                      <tr>
                                          <td style="width: 30%">MOM Controller</td>
                                          <td style="width: 5%">:
                                          </td>
                                          <td style="width: 65%">
                                              <span style="margin-left:5px">${object.event_id.mom_controller_id.name}</span>
                                          </td>
                                      </tr>
                                    % endif
                                      <tr t-if="object.event_id.attendee_ids">
                                          <td style="width: 30%;vertical-align:top;">Attendees</td>
                                          <td  style="width: 5%;vertical-align:top;">:</td>
                                          <td  style="width: 65%">
                                             % for attendee in object.event_id.attendee_ids:
                                              % if attendee.is_external == False:
                                                    <div style="margin-left:5px;margin-bottom:5px">${loop.index}. ${attendee.common_name}</div>
                                                % endif
                                            % endfor
                                          </td>
                                      </tr>
                                    % if object.event_id.external_attendee_ids:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;"> External Participants</td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
                                             % for ext_attendee in object.event_id.external_attendee_ids:
                                                    <div style="margin-left:5px;margin-bottom:5px;">${loop.index}. ${ext_attendee.partner_id.name} ${ext_attendee.partner_id.mobile_no}</div>
                                            % endfor
                                          </td>
                                      </tr>
                                     % endif
                                     % if object.event_id.mpin:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;"> Mpin</td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
                                            <div style="margin-left:5px;margin-bottom:5px;">${object.event_id.mpin}</div>
                                          </td>
                                      </tr>
                                     % endif
                                </table>
                            </td>
                             <td style="width:30%">
                                % if not object.event_id.recurrency:
                                        <div style="border-top-left-radius: 3px; border-top-right-radius: 3px; font-size: 12px; border-collapse: separate; text-align: center; font-weight: bold; color: #ffffff; min-height: 18px; background-color: #875A7B; border: 1px solid #875A7B;">
                                            ${object.event_id.get_interval('dayname', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                        </div>
                                        <div style="font-size: 48px; min-height: auto; font-weight: bold; text-align: center; color: #5F5F5F; background-color: #F8F8F8; border: 1px solid #875A7B;">
                                            ${object.event_id.get_interval('day', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                        </div>
                                        <div style='font-size: 12px; text-align: center; font-weight: bold; color: #ffffff; background-color: #875A7B;'>
                                            ${object.event_id.get_interval('month', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                        </div>
                                        <div style="border-collapse: separate; color: #5F5F5F; text-align: center; font-size: 12px; border-bottom-right-radius: 3px; font-weight: bold; border: 1px solid #875A7B; border-bottom-left-radius: 3px;">
                                            ${not object.event_id.allday and object.event_id.get_interval('time', tz=object.partner_id.tz) or ''}
                                        </div>
                                % endif
                             </td>
                        </tr>
                    </table>
                    <p>Thank You.</p>
                    <p>
                        % if object.event_id.user_id and object.event_id.user_id.signature:
                            ${object.event_id.user_id.signature | safe}
                        % endif
                    </p>
                </div>
            </field>
            <field name="auto_delete" eval="False"/>
            <field name="user_signature" eval="False"/>
        </record>

        <record id="kw_meeting_calendar_template_meeting_changedate" model="mail.template">
            <field name="name">Calendar: Data updated</field>
            <field name="model_id" ref="kw_meeting_schedule.model_kw_meeting_attendee"/>
            <field name="subject">${('Meeting Cancelled' if object.event_id.state == 'cancelled' else 'Meeting Information Modified')} for ${object.event_id.name} scheduled by ${object.event_id.user_id.name} </field>
            <!-- <field name="email_from">${object.event_id.user_id.email or ''}</field> -->

            <field name="email_from">${object.create_uid.email}</field>
            <field name="email_to" >${('' if object.partner_id and object.partner_id.email and object.partner_id.email==object.email else object.email|safe)}</field>
            <field name="partner_to">${object.partner_id and object.partner_id.email and object.partner_id.email==object.email and object.partner_id.id or False }</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html" type="html">
                    <div>
                        % set colors = {'needsAction': 'grey', 'accepted': 'green', 'tentative': '#FFFF00',  'declined': 'red'}
                        <p>Hello ${object.common_name},</p>
                        <p>
                            % if object.event_id.state == 'cancelled':
                                The meeting ${object.event_id.name} created by ${object.event_id.user_id.partner_id.name} scheduled
                                for ${object.event_id.get_display_time_tz(tz=object.partner_id.tz)} has been cancelled.
                                Please click on below view button to view meeting details.
                                <br/>
                                Reason of Cancellation: ${object.event_id.meeting_cancel_reason}
                            % else:
                                Few information of the meeting have been updated for ${object.event_id.name} created
                                by ${object.event_id.user_id.partner_id.name} scheduled for ${object.event_id.get_display_time_tz(tz=object.partner_id.tz)}.
                                Please click on below view button to view meeting details.
                            % endif   

                        </p>
                        <div style="text-align: center; margin: 16px 0px 16px 0px;">

                         % if object.event_id.state != 'cancelled':
                            <a href="/meeting_schedule/meeting/accept?db=${'dbname' in ctx and ctx['dbname'] or ''}&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                                style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                                Accept</a>
                            <a href="/meeting_schedule/meeting/decline?db=${'dbname' in ctx and ctx['dbname'] or '' }&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                                style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                                Decline</a>

                         % endif    
                            <a href="/meeting_schedule/meeting/view?db=${'dbname' in ctx and ctx['dbname'] or ''}&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                                style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                                View</a>
                        </div>
                     <table border="0" cellpadding="0" cellspacing="0" style="width:100%">
                        <tr style="width:100%;">
                            <td style="width:70%">
                                <p><strong>Meeting Details: </strong></p>
                                <table border="0" cellpadding="5" cellspacing="0">
                                      <tr t-if="object.event_id.meeting_room_id">
                                          <td>Meeting Room</td>
                                          <td>:</td>
                                          <td> <span style="margin-left:5px">${object.event_id.meeting_room_id.name}(${object.event_id.meeting_room_id.floor_name})</span></td>
                                      </tr>
                                    % if object.event_id.agenda_ids:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;">Agenda</td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
                                            % for agenda in object.event_id.agenda_ids:
                                                 <li>
                                                    <span style="margin-left:5px">${agenda.name}</span>
                                                </li>
                                            % endfor
                                          </td>
                                      </tr>
                                    % endif
                                    
                                    % if object.event_id.description:
                                      <tr>
                                          <td style="width: 30%">Required Information</td>
                                          <td style="width: 5%">:</td>
                                          <td style="width: 65%">
                                               % if object.event_id.description:
                                              <span style="margin-left:5px"> ${object.event_id.description}</span>
                                                % endif
                                          </td>
                                      </tr>
                                    % endif
                                    
                                    % if object.event_id.recurrency:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;">Meeting Date </td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
<!--                                                  ${object.event_id.rrule}-->
                                                  % for recurring_event in object.event_id.child_ids:
                                                        <div style="margin-left:5px;margin-bottom:5px;">${recurring_event.display_time}</div>
                                                % endfor
                                          </td>
                                      </tr>
                                    % endif
                                    
                                    % if not object.event_id.allday and object.event_id.duration:
                                      <tr>
                                          <td style="width: 30%">Duration</td>
                                          <td style="width: 5%">:</td>
                                          <td style="width: 65%">
                                              <span style="margin-left:5px"> ${('%dH:%dM' % (object.event_id.duration,(object.event_id.duration*60)%60))}</span>
                                          </td>
                                      </tr>
                                     % endif
                                    
                                     % if object.event_id.mom_required:
                                      <tr>
                                          <td style="width: 30%">MOM Controller</td>
                                          <td style="width: 5%">:
                                          </td>
                                          <td style="width: 65%">
                                              <span style="margin-left:5px">${object.event_id.mom_controller_id.name}</span>
                                          </td>
                                      </tr>
                                    % endif
                                      <tr t-if="object.event_id.attendee_ids">
                                          <td style="width: 30%;vertical-align:top;">Attendees</td>
                                          <td  style="width: 5%;vertical-align:top;">:</td>
                                          <td  style="width: 65%">
                                             % for attendee in object.event_id.attendee_ids:
                                    
                                                % if attendee.is_external == False:
                                                        <div style="margin-left:5px;margin-bottom:5px">${loop.index}. ${attendee.common_name}</div>
                                                % endif
                                    
                                            % endfor
                                          </td>
                                      </tr>
                                    % if object.event_id.external_attendee_ids:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;"> External Participants</td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
                                             % for ext_attendee in object.event_id.external_attendee_ids:
                                                    <div style="margin-left:5px;margin-bottom:5px;">${loop.index}. ${ext_attendee.partner_id.name} ${ext_attendee.partner_id.mobile_no}</div>
                                            % endfor
                                          </td>
                                      </tr>
                                     % endif
                                     % if object.event_id.mpin:
                                      <tr>
                                          <td style="width: 30%;vertical-align:top;"> Mpin</td>
                                          <td style="width: 5%;vertical-align:top;">:</td>
                                          <td style="width: 65%">
                                            <div style="margin-left:5px;margin-bottom:5px;">${object.event_id.mpin}</div>
                                          </td>
                                      </tr>
                                     % endif
                                </table>
                            </td>
                             <td style="width:30%">
                                % if not object.event_id.recurrency:
                                        <div style="border-top-left-radius: 3px; border-top-right-radius: 3px; font-size: 12px; border-collapse: separate; text-align: center; font-weight: bold; color: #ffffff; min-height: 18px; background-color: #875A7B; border: 1px solid #875A7B;">
                                            ${object.event_id.get_interval('dayname', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                        </div>
                                        <div style="font-size: 48px; min-height: auto; font-weight: bold; text-align: center; color: #5F5F5F; background-color: #F8F8F8; border: 1px solid #875A7B;">
                                            ${object.event_id.get_interval('day', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                        </div>
                                        <div style='font-size: 12px; text-align: center; font-weight: bold; color: #ffffff; background-color: #875A7B;'>
                                            ${object.event_id.get_interval('month', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                        </div>
                                        <div style="border-collapse: separate; color: #5F5F5F; text-align: center; font-size: 12px; border-bottom-right-radius: 3px; font-weight: bold; border: 1px solid #875A7B; border-bottom-left-radius: 3px;">
                                            ${not object.event_id.allday and object.event_id.get_interval('time', tz=object.partner_id.tz) or ''}
                                        </div>
                                % endif
                             </td>
                        </tr>
                    </table>
                        <p>Thank You.</p>
                        <p>
                            % if object.event_id.user_id and object.event_id.user_id.signature:
                                ${object.event_id.user_id.signature | safe}
                            % endif
                        </p>
                    </div>
            </field>
            <field name="auto_delete" eval="False"/>
            <field name="user_signature" eval="False"/>
        </record>


        <record id="kw_meeting_calendar_template_draft_mom" model="mail.template">
            <field name="name">Calendar: Meeting Draft MOM </field>
            <field name="model_id" ref="kw_meeting_schedule.model_kw_meeting_events"/>
            <field name="subject">${object.name}| ${object.display_time} | Draft MOM</field>
                <!-- ${object.event_id.user_id.email or ''} -->
            <field name="email_from">${object.create_uid.email}</field>
            <field name="email_to" >${object.get_attendee_emails_list()}</field>
           <!--  <field name="partner_to">${object.partner_id and object.partner_id.email and object.partner_id.email==object.email and object.partner_id.id or False }</field> -->
            <!-- <field name="lang">${object.partner_id.lang}</field> -->
            <field name="body_html" type="html">
                <div>
                    <p>Hello Participant,</p>
                    <p>${object.mom_controller_id.name} invited you for the MOM review of ${object.name} meeting.</p>
                    <p>
                        <a target="_new" href="/mail/view?model=kw_meeting_events&amp;res_id=${object.id}"
                           style="background-color:#875A7B; padding:8px 16px 8px 16px; text-decoration:none; color:#fff; border-radius:5px">Go to Meeting</a>
                    </p>
                    % if object.agenda_ids:

                    <table border="0" cellpadding="0" cellspacing="0" style="width:100%">
                       
                        <tr style="width:100%;">
                            <td style="width:70%">
                               <br/>
                                <p><strong>Minutes of Meeting </strong></p>
                                <table border="1" cellpadding="5" cellspacing="0">
                                    <tr >
                                        <th>Agenda</th>
                                        <th>Type</th>
                                        <th>Details</th>   
                                        <th>Responsibility</th>
                                        <th>Target Date</th>                                                 
                                    </tr>                                 
                                    % for agenda in object.agenda_ids:
                                        % for agenda_activity in agenda.activity_ids:
                                           
                                            <tr>
                                                <td style="width: 10%;vertical-align:top;">
                                                    ${agenda.name}
                                                </td>
                                                <td style="width: 5%">${agenda_activity.activity_type}</td>
                                                <td style="width: 20%" >                                                       
                                                    ${agenda_activity.name}                                                        
                                                </td>
                                                <td  style="width: 10%">
                                                    
                                                    ${agenda_activity.assigned_to.name if agenda_activity.activity_type == 'activity' else '--'}
                                                   
                                                </td>
                                                <td  style="width: 5%">
                                                    
                                                    ${agenda_activity.target_date.strftime('%d-%m-%Y') if agenda_activity.activity_type == 'activity' else '--'} 
                                                    
                                                </td>
                                            </tr>
                                        
                                        % endfor
                                    % endfor
                                
                                </table>
                            </td>
                        </tr>
                     
                    </table>
                     
                    % endif
                    <br/>
                    <p>Thank You.</p>                    
                </div>
            </field>
            <field name="auto_delete" eval="False"/>
            <field name="user_signature" eval="False"/>
        </record>

        <!-- mail to attendees || Final MOM -->
         <record id="kw_meeting_calendar_template_final_mom" model="mail.template">
            <field name="name">Calendar: Meeting Final MOM </field>
            <field name="model_id" ref="kw_meeting_schedule.model_kw_meeting_events"/>
            <field name="subject">${object.name}| ${object.display_time} | Final MOM</field>
                <!-- ${object.event_id.user_id.email or ''} -->
            <field name="email_from">${object.create_uid.email}</field>
            <field name="email_to" >${object.get_attendee_emails_list()}</field>          
            <field name="body_html" type="html">
                <div>                   
                    <p>Hello Participants,</p>
                    <p>The final MOM of ${object.name} has been generated. Please find the attached document for more details.</p>
                    <p>
                        <a target="_new" href="/mail/view?model=kw_meeting_events&amp;res_id=${object.id}"
                           style="background-color:#875A7B; padding:8px 16px 8px 16px; text-decoration:none; color:#fff; border-radius:5px">Go to Meeting</a>
                    </p>
                    <br/>
                    <p>Thank You.</p>
                </div>
            </field>
            <field name="auto_delete" eval="True"/>
            <field name="user_signature" eval="False"/>
        </record>



        <!-- Mail to attendees || Reminder mail -->

         <record id="kw_meeting_calendar_template_reminder" model="mail.template">
            <field name="name">Calendar: Reminder</field>
            <field name="model_id" ref="kw_meeting_schedule.model_kw_meeting_attendee"/>
            <field name="subject">Meeting Scheduled for ${object.event_id.name} by ${object.event_id.user_id.name} | ${object.event_id.display_time} - Reminder</field>               
            <field name="email_from">${object.create_uid.email}</field>
            <field name="email_to" >${('' if object.partner_id and object.partner_id.email and object.partner_id.email==object.email else object.email|safe)}</field>
            <field name="partner_to">${object.partner_id and object.partner_id.email and object.partner_id.email==object.email and object.partner_id.id or False }</field>

            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html" type="html">
                <div>
                    % set colors = {'needsAction': 'grey', 'accepted': 'green', 'tentative': '#FFFF00',  'declined': 'red'}
                    <p>Hello ${object.common_name},</p>

                    <p>This is a reminder for the below event:</p>

                   <div style="text-align: center; margin: 16px 0px 16px 0px;">
                        <a href="/meeting_schedule/meeting/accept?db=${'dbname' in ctx and ctx['dbname'] or ''}&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                            style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                            Accept</a>
                        <a href="/meeting_schedule/meeting/decline?db=${'dbname' in ctx and ctx['dbname'] or '' }&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                            style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                            Decline</a>
                        <a href="/meeting_schedule/meeting/view?db=${'dbname' in ctx and ctx['dbname'] or ''}&amp;token=${object.access_token}&amp;action=${'action_id' in ctx and ctx['action_id'] or ''}&amp;id=${object.event_id.id}" 
                            style="padding: 5px 10px; color: #FFFFFF; text-decoration: none; background-color: #875A7B; border: 1px solid #875A7B; border-radius: 3px">
                            View</a>
                    </div>
                    <table border="0" cellpadding="0" cellspacing="0"><tr>
                         <td style="padding-top: 5px;">
                            <p><strong>Details of the event</strong></p>
                            <ul>
                                % if object.event_id.meeting_room_id:
                                    <li>
                                        Venue: ${object.event_id.meeting_room_id.floor_name} ${object.event_id.meeting_room_id.name}
                                    </li>
                                % endif

                                % if object.event_id.agenda_ids:
                                    <li>
                                        Agenda:
                                        <ul>
                                            % for agenda in object.event_id.agenda_ids:
                                                <li>
                                                     <div style="display: inline-block; border-radius: 50%; width: 10px; height: 10px; background:#0B8EDA;"> </div>
                                                     <span style="margin-left:5px">${agenda.name}</span>
                                                </li>
                                            % endfor

                                        </ul>
                                    </li>
                                % endif

                                % if object.event_id.description :
                                    <li> Required Information: ${object.event_id.description}</li>
                                % endif

                               % if object.event_id.recurrency:
                                    <li>Meeting Type: Recurrent,  ${object.event_id.rrule}</li>
                                                              
                                    <ul>
                                        % for recurring_event in object.event_id.child_ids:
                                            <li>
                                                <div style="display: inline-block; border-radius: 50%; width: 10px; height: 10px; "> </div>                                           
                                                <span style="margin-left:5px">${recurring_event.display_time}</span>                                           
                                            </li>
                                        % endfor
                                    </ul>                                  

                                % endif 

                                % if not object.event_id.allday and object.event_id.duration:
                                    <li>Duration: ${('%dH%dM' % (object.event_id.duration,(object.event_id.duration*60)%60))}</li>
                                % endif

                                % if object.event_id.mom_required:
                                    <li>MOM Controller: ${object.event_id.mom_controller_id.name}</li>
                                % endif

                                <li>
                                    Attendees:
                                    <ul>
                                    % for attendee in object.event_id.attendee_ids:
                                        <li>
                                            <div style="display: inline-block; border-radius: 50%; width: 10px; height: 10px; background:${colors[attendee.state] or 'white'};"> </div>
                                            % if attendee.common_name != object.common_name:
                                                <span style="margin-left:5px">${attendee.common_name}</span>
                                            % else:
                                                <span style="margin-left:5px">You</span>
                                            % endif
                                        </li>
                                    % endfor
                                    </ul>
                                </li>

                                % if object.event_id.external_attendee_ids:
                                    <li>
                                        External Participants:
                                        <ul>
                                        % for ext_attendee in object.event_id.external_attendee_ids:
                                            <li>
                                                <div style="display: inline-block; border-radius: 50%; width: 10px; height: 10px; "> </div>
                                                <span style="margin-left:5px">${ext_attendee.partner_id.name} ${ext_attendee.partner_id..mobile_no}</span>

                                            </li>
                                        % endfor
                                        </ul>
                                    </li>
                                % endif

                                % if object.event_id.mpin:
                                <li>
                                    Mpin:
                                        <ul>
                                            <li>
                                                <div style="display: inline-block; border-radius: 50%; width: 10px; height: 10px; "> </div>
                                                <span style="margin-left:5px">${object.event_id.mpin}</span>

                                            </li>
                                        </ul>
                                </li>
                                      
                                % endif

                            </ul>
                        </td>

                         % if not object.event_id.recurrency:
                            <td width="20px;"/>
                            <td width="130px;" >                           
                                <div style="border-top-left-radius: 3px; border-top-right-radius: 3px; font-size: 12px; border-collapse: separate; text-align: center; font-weight: bold; color: #ffffff; min-height: 18px; background-color: #875A7B; border: 1px solid #875A7B;">
                                    ${object.event_id.get_interval('dayname', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                </div>
                                <div style="font-size: 48px; min-height: auto; font-weight: bold; text-align: center; color: #5F5F5F; background-color: #F8F8F8; border: 1px solid #875A7B;">
                                    ${object.event_id.get_interval('day', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                </div>
                                <div style='font-size: 12px; text-align: center; font-weight: bold; color: #ffffff; background-color: #875A7B;'>
                                    ${object.event_id.get_interval('month', tz=object.partner_id.tz if not object.event_id.allday else None)}
                                </div>
                                <div style="border-collapse: separate; color: #5F5F5F; text-align: center; font-size: 12px; border-bottom-right-radius: 3px; font-weight: bold; border: 1px solid #875A7B; border-bottom-left-radius: 3px;">
                                    ${not object.event_id.allday and object.event_id.get_interval('time', tz=object.partner_id.tz) or ''}
                                </div>                          
                            
                            </td>
                        % endif

                    </tr>
                    </table>

                    <p>Thank You.</p>
                    <p>
                        % if object.event_id.user_id and object.event_id.user_id.signature:
                            ${object.event_id.user_id.signature | safe}
                        % endif
                    </p>
                </div>
            </field>
            <field name="auto_delete" eval="False"/>
            <field name="user_signature" eval="False"/>
        </record>
         



        <!-- Mail to attendees || Reminder mail for meeting task -->
        <record id="kw_meeting_calendar_template_assigned_task" model="mail.template">
            <field name="name">Calendar: Meeting Task Completion Reminder </field>
            <field name="model_id" ref="kw_meeting_schedule.model_kw_meeting_agenda_activities"/>
            <field name="subject">${object.meeting_id.name} | ${object.meeting_id.display_time} | Pending Task Reminder </field>
                <!-- ${object.event_id.user_id.email or ''} -->
            <field name="email_from">${object.create_uid.email}</field>
            <field name="email_to" >${object.assigned_to.work_email}</field>

            <field name="email_cc" >${(object.assigned_to.parent_id.work_email if object.target_date == datetime.datetime.today().date() else False)}</field>
           <!--  <field name="partner_to">${object.partner_id and object.partner_id.email and object.partner_id.email==object.email and object.partner_id.id or False }</field> -->
            <!-- <field name="lang">${object.partner_id.lang}</field> -->
            <field name="body_html" type="html">
                <div>
                   
                    <p>Hello ${object.assigned_to.name},</p>
                    <p>This is a reminder for the below task assigned with target date ${object.target_date}  for the meeting ${object.meeting_id.name},
                        agenda: ${object.agenda_id.name}.</p>
                    <p>You are requested to complete the task within the target date.</p>

                    <p><b>${object.name|safe} </b></p>
                    <p>
                        <a target="_new" href="/mail/view?model=kw_meeting_agenda_activities&amp;res_id=${object.id}"
                           style="background-color:#875A7B; padding:8px 16px 8px 16px; text-decoration:none; color:#fff; border-radius:5px">View Task</a>
                    </p>
                    <p>Thank you,</p>

                </div>
            </field>
            <field name="auto_delete" eval="False"/>
            <field name="user_signature" eval="False"/>
        </record>

    </data>
</odoo>
