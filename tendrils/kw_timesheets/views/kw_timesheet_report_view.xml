<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="kw_project_timesheet_report_tree" model="ir.ui.view">
            <field name="name">kw_project_timesheet_report.tree</field>
            <field name="model">account.analytic.line</field>
            <field name="arch" type="xml">
                <tree create="false" >
                    <field name="date" />       
                    <field name="project_id"/>
                    <field name="prject_category_id" />
                    <field name="task_id" string='Task Name' />
                    <field name="employee_id" />
                    <field name="unit_amount" string='Duration(Hour(s))'/>
                    <!-- <field name="mapped_to" widget='many2many_tags' />
                    <field name="planned_hours" />
                    <field name="remaining_hours" />
                    <field name="effective_hours" /> -->
                </tree>
            </field>
        </record>

        <record id="view_kw_task_calendar" model="ir.ui.view">
            <field name="name">task.calendar</field>
            <field name="model">account.analytic.line</field>
            <field name="arch" type="xml">
                <calendar string="Task" color="employee_id" date_start="date" mode="month" quick_add="false" >
                    <field name="task_id"/>
                    <field name="employee_id"/>
                    <field name="unit_amount" string='Duration(Hour(s))'/>
                </calendar>
            </field>
        </record>

        <record id="view_timesheet_pivot" model="ir.ui.view">
            <field name="name">timesheet_pivot</field>
            <field name="model">account.analytic.line</field>
            <field name="arch" type="xml">
                <pivot string="Timesheet Report" disable_linking="True">
                   <field name="employee_id" type="row"/>
                   <field name="project_id" />
                   <field name="task_id" />
                   <!-- <field name="project_category_id" type="row"/> -->
                   <field name="unit_amount" string='Duration(Hour(s))' type="measure"/>
                   <field name="date" />
                </pivot>
            </field>
        </record>

        <record id="kw_project_timesheet_report_act_window" model="ir.actions.act_window">
            <field name="name">Timesheet Report</field>
            <field name="res_model">account.analytic.line</field>
            <field name="view_mode">tree,pivot</field>
            <field name="view_type">form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_project_timesheet_report_tree')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('view_timesheet_pivot')})]"/>

        </record>

        <!-- <menuitem name="Timesheet / Report" action="kw_project_timesheet_report_act_window" id="menu_timesheet_report" parent="hr_timesheet.menu_timesheets_reports"/> -->
        <!-- <record id="hr_timesheet.timesheet_action_all" model="ir.actions.act_window">
            <field name="name">Subordinates Timesheets</field>
            <field name="res_model">account.analytic.line</field>
            <field name="search_view_id" ref="hr_timesheet.hr_timesheet_line_search"/>
            <field name="domain">[('employee_id.parent_id.user_id','=',uid)]</field>
            <field name="context">{'search_default_filter_this_month':1,'search_default_filter_this_week':1,'search_default_filter_today':1,'search_default_nonvalidated':0}</field>
        </record> -->

        <record id="hr_timesheet.timesheet_menu_activity_all" model="ir.ui.menu">
            <field name="name">Subordinates Timesheets</field>
            <field name="active" eval="False"/>
            <field name="parent_id" ref="hr_timesheet.menu_hr_time_tracking"/>
            <field name="action" ref="hr_timesheet.timesheet_action_all"/>
            <field name="groups_id" eval="[[6,0,[ref('hr_timesheet.group_hr_timesheet_user'),ref('group_kw_timesheets_report_manager')]]]"/>
        </record>
        <record id="my_timesheet_user_menu" model="ir.ui.menu">
            <field name="name">My Timesheets</field>
            <field name="parent_id" ref="hr_timesheet.menu_hr_time_tracking"/>
            <!-- <field name="sequence" eval="11"/> -->
            <field name="groups_id" eval="[[6,0,[ref('hr_timesheet.group_hr_timesheet_user')]]]"/>
        </record>

        <!-- <record id="validated_timesheet_tree_view" model="ir.ui.view">
            <field name="name">account.analytic.line.view.validate.tree</field>
            <field name="model">account.analytic.line</field>
            <field name="priority" eval="99"/>
            <field name="arch" type="xml">
                <tree import="0" decoration-muted="validated">
                    <field name="date" readonly="1"/>
                    <field name="employee_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="prject_category_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="project_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="task_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="name" readonly="1"/>
                    <field name="approved_by" readonly="1"/>
                    <field name="unit_amount" string="Duration (Hours)" sum="Total" readonly="1" widget="timesheet_uom"/>
                    <field name="validated" invisible="1"/>
                </tree>
            </field>
        </record> -->

        <!-- <record id="action_validate_timesheet_user_act_window" model="ir.actions.act_window">
            <field name="name">Validated Timesheets</field>
            <field name="res_model">account.analytic.line</field>
            <field name="view_mode">tree</field>
            <field name="search_view_id" ref="hr_timesheet.hr_timesheet_line_search"/>
            <field name="domain">['&amp;',('employee_id.user_id','=',uid),'&amp;',('active','=', True),('validated','=', True)]</field>
            <field name="context">{'search_default_filter_this_month':1,'search_default_filter_this_week':1,'create':False,'edit':False,'delete':False,'import':False}</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('validated_timesheet_tree_view')})]"/>
        </record> -->

        <!-- <record id="validate_timesheet_user_menu" model="ir.ui.menu">
            <field name="name">Validated Timesheets</field>
            <field name="parent_id" ref="kw_timesheets.my_timesheet_user_menu"/>
        
            <field name="action" ref="action_validate_timesheet_user_act_window"/>
            <field name="groups_id" eval="[[6,0,[ref('hr_timesheet.group_hr_timesheet_user')]]]"/>
        </record> -->

        <!-- <record id="non_validated_timesheet_tree_view" model="ir.ui.view">
            <field name="name">account.analytic.line.view.non.validate.tree</field>
            <field name="model">account.analytic.line</field>
            <field name="priority" eval="99"/>
            <field name="arch" type="xml">
                <tree import="0" >
                    <field name="date" readonly="1"/>
                    <field name="employee_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="prject_category_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="project_id" readonly="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="task_id" required="1" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="name" required="1"/>
                    <field name="pending_at"/>
                    <field name="unit_amount" string="Duration (Hours)" sum="Total" required="1" widget="timesheet_uom"/>
                </tree>
            </field>
        </record> -->

        <!-- <record id="action_non_validate_timesheet_user_act_window" model="ir.actions.act_window">
            <field name="name">Non-Validate Timesheets</field>
            <field name="res_model">account.analytic.line</field>
            <field name="view_mode">tree</field>
            <field name="search_view_id" ref="hr_timesheet.hr_timesheet_line_search"/>
            <field name="domain">['&amp;',('employee_id.user_id','=',uid),'&amp;',('active','=', True),('validated','=', False)]</field>
            <field name="context">{'search_default_filter_this_month':1,'search_default_filter_this_week':1,'create': False,'edit':False,'delete':False,'import':False}</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_timesheets.non_validated_timesheet_tree_view')})]"/>
        </record> -->

        <!-- <record id="non_validate_timesheet_user_menu" model="ir.ui.menu">
            <field name="name">Non-Validate Timesheets</field>
            <field name="parent_id" ref="kw_timesheets.my_timesheet_user_menu"/>
           
            <field name="action" ref="action_non_validate_timesheet_user_act_window"/>
            <field name="groups_id" eval="[[6,0,[ref('hr_timesheet.group_hr_timesheet_user')]]]"/>
        </record> -->



        <!-- <record id="action_timesheet_project_manager_window" model="ir.actions.act_window">
            <field name="name">Project Timesheets</field>
            <field name="res_model">account.analytic.line</field>
            <field name="view_mode">tree,grid</field>
            <field name="search_view_id" ref="hr_timesheet.hr_timesheet_line_search"/>
            <field name="domain">[]</field>
            <field name="context">{'filter_project_timesheet':1,'search_default_filter_this_month':1,'search_default_filter_this_week':1,'search_default_filter_today':1,'search_default_nonvalidated':0}</field>
        </record> -->

        <!-- <record id="menu_timesheet_project_manager" model="ir.ui.menu">
            <field name="name">Project Timesheets</field>
            <field name="parent_id" ref="hr_timesheet.menu_hr_time_tracking"/>
            <field name="action" ref="action_timesheet_project_manager_window"/>
            <field name="groups" eval="[(6,0,[ref('kw_timesheets.group_kw_timesheets_report_manager')])]"/>
        </record> -->

        <record id="kw_timesheets.menu_timesheet_project_manager" model="ir.ui.menu">
            <field name="active" eval="False"/>
            <field name="groups_id"  eval="[(3,ref('hr_timesheet.group_hr_timesheet_user'))]"/>
        </record>
        
    </data>
</odoo>
