<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="0">
        <!-- Tree view for "model" -->
        <record id="view_kw_weekly_timesheet_report_tree" model="ir.ui.view">
            <field name="name">view.kw_weekly_timesheet_report.tree</field>
            <field name="model">kw_weekly_timesheet_report</field>
            <field name="type">tree</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <tree create='false' edit='false' import='false' string="kw_weekly_timesheet_report_tree">
                    <field name="employee_id" />
                    <field name="designation_id" />
                    <field name="department_id" />
                    <field name="division_id" />
                    <field name="week_start_date" />
                    <field name="week_end_date" />
                    <field name="working_days" />
                    <field name="absent_days" />
                    <field name="on_tour_days" />
                    <field name="on_leave_days" />
                    <field name="required_effort"/>
                    <field name='actual_effort'/>
                    <!-- <field name="timesheet_effort" /> -->
                    <field name="total_effort" />
                    <button name="weekly_timesheet_view_details" type="object" string="View Details" class="oe_highlight" groups="base.group_no_one" />
                    <button name="weekly_timesheet_view_details_grid" type="object" string="View Details" class="oe_highlight" />
                </tree>
            </field>
        </record>
        
        <!-- Search view for "model" -->
        <record id="view_kw_weekly_timesheet_report_search" model="ir.ui.view">
            <field name="name">view.kw_weekly_timesheet_report.search</field>
            <field name="model">kw_weekly_timesheet_report</field>
            <field name="type">search</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <search string="kw_weekly_timesheet_report_search">
                    <field name="employee_id" />
                    <group expand="1" string="Group By...">
                        <filter name="groupby_employee" string="Employee" domain="[]" context="{'group_by':'employee_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        
        <!-- Main window action for "model" -->
        <record id="action_kw_weekly_timesheet_report_act_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Validate Timesheet</field>
            <field name="res_model">kw_weekly_timesheet_report</field>
            <field name="view_mode">tree</field>
            <!-- <field name="view_type">form</field> -->
            <field name="target">current</field>
            <!-- <field name="domain">[('employee_id.parent_id.user_id','=',uid),('is_validate','=','0')]</field> -->
            <field name="domain">[]</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('view_kw_weekly_timesheet_report_tree')})]"/>
            <field name="context">{'search_default_groupby_employee': 1,'weekly_timesheet':1}</field>
            <field name="search_view_id" ref="view_kw_weekly_timesheet_report_search" />
        </record>

        <menuitem id="menu_weekly_timesheet"
            name="Validate Timesheet"
            parent="hr_timesheet.menu_hr_time_tracking"
            action="action_kw_weekly_timesheet_report_act_window" 
            active="False"/>
    </data>
</odoo>
