<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Tree view for "model" -->
        <record id="view_kw_resource_costs_report_tree" model="ir.ui.view">
            <field name="name">view.kw_resource_costs_report.tree</field>
            <field name="model">kw_resource_costs_report</field>
            <field name="type">tree</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <tree string="kw_resource_costs_report"  create="false" edit="false" delete="false" import="false">
                    <field name="sbu_id" />
                    <field name="project_code" />
                    <field name="project_id" />
                    <field name="pm_id" />
                    <field name ="reviewer_id"/>
                    <field name="timesheet_sbu_hour" sum="timesheet_sbu_hour" />
                    <field name="timesheet_sbu_cost" sum="timesheet_sbu_cost" />
                    <field name="timesheet_horizontal_hour" sum="timesheet_horizontal_hour" />
                    <field name="timesheet_horizontal_cost" sum="timesheet_horizontal_cost" />
                    <field name="project_sbu_id"  invisible = "1"/>
                </tree>
            </field>
        </record>

        <record id="view_kw_resource_costs_report_search" model="ir.ui.view">
            <field name="name">view.kw_resource_costs_report.search</field>
            <field name="model">kw_resource_costs_report</field>
            <field name="type">search</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <search string="kw_resource_costs_report">
                    <field name="project_id" />
                    <field name="project_code" />
                    <field name="project_id" />
                    <field name="sbu_id" />
                    <field name="pm_id" />
                    <field name ="reviewer_id"/>
                    <filter name="groupby_project" string="Project" context="{'group_by':'project_id'}"/>
                    <filter name="groupby_sbu" string="SBU" context="{'group_by':'sbu_id'}"/>
                </search>
            </field>
        </record>

        <!-- Main window action for "model" -->
        <record id="action_kw_resource_costs_report_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Resourse Cost Report</field>
            <field name="res_model">kw_resource_costs_report</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="target">current</field>
            <!-- <field name="domain">[('project_sbu_id.user_id', '=', uid)]</field> -->
            <!-- <field name="context">{'search_default_filter_current_month':1,'timesheet_report':1,'group_by': 'employee_id'}</field> -->
            <!-- <field name="search_view_id" ref="view_kw_timesheet_report_search"/> -->
        </record>

        <!-- Tree view for "Wizard" -->
        <record id="view_kw_resource_costs_report" model="ir.ui.view">
            <field name="name">view.kw_resource_costs_report.wizard</field>
            <field name="model">resource_cose_report_wizard</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="from_date" />
                            <field name="to_date" />
                        </group>
                    </sheet>
                    <footer>
                        <button string='View Report' name="get_resource_cost_filter" type="object"
                                style="background-color: #108fbb;"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Main window action for "wizard" -->
        <record id="view_kw_resource_costs_report_action" model="ir.actions.act_window">
            <field name="name">Resource Cost Report</field>
            <field name="res_model">resource_cose_report_wizard</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="target">new</field>
            <!-- <field name="domain">[('project_sbu_id.user_id', '=', uid)]</field> -->
        </record>


        <menuitem name="Resource Cost Report" action="view_kw_resource_costs_report_action" id="menu_resource_cost_report" parent="hr_timesheet.menu_timesheets_reports" groups="kw_timesheets.group_kw_timesheets_report_manager,disable_debug_mode.group_developer" active='false'/>
    </data>
</odoo>
