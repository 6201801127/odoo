<?xml version="1.0"?>
<odoo>
    <data>
    <record id="training_session_notification_mail" model="mail.template">
        <field name="name">Training Session: Notification For Participants</field>
        <field name="model_id" ref="kw_training.model_kw_training"/>
        <field name="subject">Training Notification : ${object.name}</field>
        <field name="email_from">tendrils@csm.tech</field>
        <field name="email_to" >${(ctx.get('participants') if ctx.get('participants') else ''|safe)}</field>
        <field name="email_cc">${(ctx.get('cc_emails') if ctx.get('cc_emails') else ''|safe)}</field>
        <field name="auto_delete" eval="False"/>
        <field name="body_html">
            <![CDATA[
                    <table border="0">
                        <tr>
                            <td>
                                <div style="margin-left: 1.2rem;margin-bottom:1em;">
                                    <h5 style="font-weight: 400;margin-bottom: 0;font-size: 16px;color:#676767;">
                                        <span style="color:rgb(22, 123, 158);font-size: 16px;margin-right: 2px;font-weight: 600;">
                                            Dear Participants
                                        </span>
                                    </h5>
                                    <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 16px;">
                                        This is a Training notification for ${object.name}.
                                    </p>
                                </div>
                                <table style="margin-left: 1.2rem;border-collapse: collapse;font-size: 16px;font-family:Segoe UI; color: #454748; width: 100%;" border="1">
                                    <tr align="left" style="background-color: #F1F1F1;">
                                        <th style="color:#676767;border-bottom: 1px solid #ebe5e5;">Session</th>
                                        <th style="color:#676767;border-bottom: 1px solid #ebe5e5;">Instructor</th>
                                        <th style="color:#676767;border-bottom: 1px solid #ebe5e5;">Date</th>
                                        <th style="color:#676767;border-bottom: 1px solid #ebe5e5;">Start Time</th>
                                        <th style="color:#676767;border-bottom: 1px solid #ebe5e5;">End Time</th>
                                    </tr>
                                    % if ctx.get('session_ids'):
                                        % for session in ctx.get('session_ids'):
                                        <tr align="left">
                                            <td width="27%" style="color:#167b9e;border-bottom: 1px solid #ebe5e5;height: 34px;">${session.subject}</td>
                                            <td width="25%" style="color:#167b9e;border-bottom: 1px solid #ebe5e5;height: 34px;">
                                                % if session.instructor:
                                                    ${session.instructor.name}
                                                % else:
                                                    External
                                                % endif
                                            </td>
                                            <td width="18%" style="color:#167b9e;border-bottom: 1px solid #ebe5e5;">${format_tz(session.date, format='%d-%b-%Y')}</td>
                                            <td width="15%" style="color:#167b9e;border-bottom: 1px solid #ebe5e5;">${datetime.datetime.strptime(session.from_time,"%H:%M:%S").strftime("%I:%M %p")}</td>
                                            <td width="15%" style="color:#167b9e;border-bottom: 1px solid #ebe5e5;">${datetime.datetime.strptime(session.to_time,"%H:%M:%S").strftime("%I:%M %p")}</td>
                                        </tr>
                                        % endfor
                                    % endif
                                </table>
                            </td>
                        </tr>
                    </table>
                ]]>
        </field>
        <field name="auto_delete" eval="False"/>
        <field name="user_signature" eval="False"/>
    </record>
    </data>
</odoo>