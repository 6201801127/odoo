<odoo>
    <data>
        <!-- explicit list view definition -->
        <record id="hr_cv_mapping_tree_view" model="ir.ui.view">
            <field name="name">CV Mapping Tree View</field>
            <field name="model">hr.cv.mapping</field>
            <field name="arch" type="xml">
                <tree import='0'>
                    <field name="sequence"/>
                    <field name="financial_year_id"/>
                    <field name="account_holder"/>
                    <field name="location"/>
                    <field name="qualification_details" invisible='1'/>
                    <field name="min_exp_year" invisible='1'/>
                    <field name="max_exp_year" invisible='1'/>
                    <field name="engagement" invisible='1'/>
                    <field name="no_of_engaged_month" invisible='1'/>
                    <field name="type_project"/>
                    <field name="project" invisible='1'/>
                    <field name="job_id"/>
                    <field name="professional_qualification" invisible='1'/>
                    <field name="no_of_resources"/>
                    <field name="effective_from_date"/>
                    <field name="effective_to_date"/>
                    <field name="project_excecution_location"/>
                    <field name="requested_by"/>
                    <field name="res_tagged" invisible='1'/>
                    <field name="state"/>
                </tree>
            </field>
        </record>


        
        <record id="hr_cv_mapping_form_view" model="ir.ui.view">
            <field name="name">CV Mapping Form View</field>
            <field name="model">hr.cv.mapping</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button string="Apply" name="action_apply" states="draft" type="object"
                                class="oe_highlight" groups="kw_generate_cv.generate_cv_user_group" confirm='Are you sure to apply ?'/>
                        <button string="Approve" name="action_approve" type="object"
                                class="oe_highlight" groups="kw_generate_cv.generate_cv_user_group" attrs="{'invisible': [('state','in', ['draft','applied','reject','approve','cancel'])]}"/>
                        <button string="Tag Done" name="action_tag" type="object"
                                class="btn-success" groups="kw_generate_cv.generate_cv_manager_group" attrs="{'invisible': [('state','in', ['tagged','reject','approve','cancel'])]}"/>
                        <button string="Reject" name="action_reject" type="object"
                                class="btn-danger" groups="kw_generate_cv.generate_cv_user_group" attrs="{'invisible': [('state','in', ['draft','applied','reject','approve','cancel'])]}"/>
                        <button string="Cancel" name="action_cancel" type="object"
                                class="btn-danger" groups="kw_generate_cv.generate_cv_manager_group" attrs="{'invisible': [('state','in', ['tagged','reject','approve','cancel'])]}"/>
                        <field name="state" widget="statusbar" />        
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="sequence" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="financial_year_id" string='Financial Year' options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="account_holder" options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="location" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="min_exp_year" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="max_exp_year" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="engagement" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="no_of_engaged_month" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="qualification_details" widget='many2many_tags'
                                       options="{'no_create':True,'no_edit':True}" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="professional_qualification" widget='many2many_tags'
                                       options="{'no_create':True,'no_edit':True}" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                            </group>

                            <group>
                                <field name="type_project" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="project" options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="job_id" options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="no_of_resources" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="effective_from_date" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="effective_to_date" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="project_excecution_location" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="requested_by" options="{'no_open': True,'no_create':True,'no_edit':True}" groups="kw_generate_cv.generate_cv_manager_group" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"/>
                                <field name="res_tagged" invisible='1'/>
                                <field name="tagged_employee_ids" attrs="{'readonly':['|',('res_tagged','=',True),('state','in', ['approve','cancel'])]}"> 
                                    <tree create="0">
                                        <field name="report_id"/>
                                        <field name="emp_code"/>
                                        <button name="release_emp" type="object" class="oe_highlight" string="Release" groups="kw_generate_cv.generate_cv_manager_group"/>
                                        <button name="cv_download" type="object" class="oe_highlight" string="Download CV"/>
                                    </tree>
                                </field>
                            </group>
                            <footer>
                                    <button name="check_data" string="Search Employee" type="object" class="oe_highlight" groups="kw_generate_cv.generate_cv_manager_group"/>
                            </footer>
            
                                <field name="employee_ids" attrs="{'invisible': [('employee_ids','=',[])]}" invisible="True">
                                <tree>
                                    <field name="emp_code"/>
                                    <field name="name"/>
                                    <field name="job_branch_id"/>
                                    <field name="department_id"/>
                                    <field name="division"/>
                                    <field name="section"/>
                                    <field name="practise" options="{'no_open': True,'no_create':True,'no_edit':True}"/>  
                                    <field name="job_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>      
                                </tree>
                                </field>
                                <!-- <field name="result_employee_ids" groups="kw_generate_cv.generate_cv_manager_group">
                                    <tree>
                                        <field name="emp_code"/>
                                        <field name="name"/>
                                        <field name="job_branch_id"/>
                                        <field name="department_id"/>
                                        <field name="division" />
                                        <field name="section" />
                                        <field name="practise" options="{'no_open': True,'no_create':True,'no_edit':True}"/>  
                                        <field name="job_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>      
                                        <field name="total_experience_in_year"/>      
                                        <field name="edu_qualification"/>      
                                        <field name="certification"/>
                                        <button name="tag_emp" class="oe_highlight" context="{'current_mapping_id':id}" type="object" string="Tag" confirm='Are you sure to tag this employee ?'/>
                                    </tree>
                                </field> -->
                                <field name="result_employee_ids" groups="kw_generate_cv.generate_cv_manager_group"> 
                                    <tree create="0">
                                        <field name="employee_code"/>
                                        <field name="mis_id"/>
                                        <field name="employee_branch"/>
                                        <field name="employee_dept"/>
                                        <field name="employee_div" />
                                        <field name="employee_sec" />
                                        <field name="employee_prac"/>  
                                        <field name="employee_desig"/>      
                                        <field name="employee_exp"/>      
                                        <field name="employee_qual"/>      
                                        <field name="employee_cert"/>
                                        <button name="tag_emp" class="oe_highlight" type="object" string="Tag"/>
                                    </tree>
                                </field>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

       
        <!-- actions opening views on models -->
        <record id="hr_cv_mapping_action_window" model="ir.actions.act_window">
            <field name="name">CV Mapping</field>
            <field name="res_model">hr.cv.mapping</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hr_cv_mapping_tree_view"/>
        </record>

        <record id="hr_cv_mapping_apply_action_window" model="ir.actions.act_window">
            <field name="name">Apply</field>
            <field name="res_model">hr.cv.mapping</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hr_cv_mapping_tree_view"/>
        </record>

        <record id="hr_cv_mapping_take_action_act_window" model="ir.actions.act_window">
            <field name="name">CV Mapping Take Action</field>
            <field name="res_model">hr.cv.mapping</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hr_cv_mapping_tree_view"/>
            <field name="search_view_id" ref="hr_cv_mapping_tree_view"/>
            <field name ="domain">[('state', '=', 'applied')]</field>
            <field name="context">{'create': 0}</field>
        </record>

       
        <!-- Top menu item -->
        <menuitem id="hr_cv_mapping_menu"
                  name="CV Mapping"
                  action="hr_cv_mapping_action_window"
                  parent="hr_employee_generate_cv2_menu_root"
                  groups="kw_generate_cv.generate_cv_manager_group"
                  sequence="999"
                  />

        <menuitem id="hr_cv_mapping_apply"
                name="Apply"
                action="kw_generate_cv.hr_cv_mapping_apply_action_window"
                parent="hr_employee_generate_cv2_menu_root"
                sequence="1000"
                groups="kw_generate_cv.generate_cv_user_group,kw_generate_cv.generate_cv_manager_group"
                />

        <menuitem id="hr_cv_mapping_take_action"
                  name="Take Action"
                  action="hr_cv_mapping_take_action_act_window"
                  parent="hr_employee_generate_cv2_menu_root"
                  groups="kw_generate_cv.generate_cv_manager_group"
                  sequence="1001"
                  />

    </data>
</odoo>
