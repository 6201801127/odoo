<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>
    <record id="project_performer_metrics_form" model="ir.ui.view">
      <field name="name">kw_project_performer_metrics.form</field>
      <field name="model">kw_project_performer_metrics</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <button name="btn_apply" string="Apply" type="object" class="btn-primary" states="draft"/>
            <button name="btn_grant" string="Publish" type="object" class="btn-primary btn-lg" states="apply" groups="kw_project_performer_metrics.group_quality_head" invisible="context.get('show_btn', False)==False"/>
            <button name="btn_reject" string="Reject" type="object" class="btn-danger btn-lg" states="apply" groups="kw_project_performer_metrics.group_quality_head" invisible="context.get('show_btn', False)==False"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,apply,publish,reject"/>
          </header>
          <sheet>
            <group>
              <group name="name" string="Employee Details">
                <field name="employee_id" invisible='1'/>
                <field name="emp_code"/>
                <field name="name"/>
                <field name="job_id"/>
              </group>

              <group string='Project Details'>
                <field name="enable_field_boolean" invisible='1'/>
                <field name="total_score" force_save='1' invisible='1'/>
                <field name="year" required='1'  attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
                <field name="month" required='1'  attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
                <field name="project_id" required='1' attrs = "{'readonly':[('enable_field_boolean','=',False)]}" options="{'no_create': True, 'no_edit':True, 'no_open': True}"/>
                <field name="project_manager_id" readonly="1" force_save="1" attrs="{'invisible': [('project_id','=',False)]}" options="{'no_create': True, 'no_edit':True, 'no_open': True}"/>

                <label for="audit_schedule" string="Audit Rate" required="1" attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
                <div>
                  <field name="audit_schedule" class="oe_inline" required='1' attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
%                
                </div>
                <label for="audit_compliance" string="Audit Compliance"/>
                <div>
                  <field name="audit_compliance" class="oe_inline" required='1' attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
%
                </div>
                <label for="product_review" string="Product Review"/>
                <div>
                  <field name="product_review" class="oe_inline" required='1' attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
%
                </div>
                <label for="audit_score" string="Quantitative Project Management"/>
                <div>
                  <field name="audit_score" class="oe_inline" required='1' attrs = "{'readonly':[('enable_field_boolean','=',False)]}"/>
%
                </div>

              </group>
              <group string='Action Log' attrs = "{'invisible':[('state','in',['apply','draft'])]}">
                <field name="remark" readonly='1'/>
                <field name="updated_on" readonly='1'/>
                <field name="updated_by" readonly='1' options="{'no_create': True, 'no_edit':True, 'no_open': True}" force_save="1" />
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="kw_project_performer_metrics_kanban">
      <field name="name">Project Performer Metrics</field>
      <field name="model">kw_project_performer_metrics</field>
      <field name="arch" type="xml">
        <kanban>
          <field name="id" />
          <field name="employee_id" />
          <field name="project_id" />
          <field name="project_manager_id" />
          <field name="audit_schedule" />
          <field name="audit_compliance" />
          <field name="product_review" />
          <field name="audit_score" />
          <templates>
            <t t-name="kanban-box">
              <div class="oe_kanban_global_click">
                <div class="o_project_kanban_main">
                  <div class="o_kanban_card_content">
                    <h3 class='text-info'>
                          Quality Performance Metrics
                    </h3>
                    <h3 class='text-warning'>
                      <field name="month"/>
-
                      <field name="year"/>
                    </h3>
                    <div class="oe_kanban_content ">
                      <div class="row">
                        <div class="col-sm-12">
                          <div>
                            Name :
                            <field name="name"/>
                          </div>
                          <div>
                              Project Name :
                            <field name="project_id"/>
                          </div>
                          <div>
                              Project Manager:
                            <field name="project_manager_id"/>
                          </div>
                          <div>
                            Audit Schedule:
                            <field name="audit_schedule" />
                          </div>
                          <div>
                            <span>Project Review: </span>
                            <field name="product_review" />
                          </div>
                          <div>
                            Audit Compliance:
                            <field name="audit_compliance" />
                          </div>
                          <div>
                            <span>Quantitative Project Management:
                            </span>
                            <field name="audit_score" />
                          </div>
                          <div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>

              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record id="project_performer_metrics_tree" model="ir.ui.view">
      <field name="name">kw_project_performer_metrics.tree</field>
      <field name="model">kw_project_performer_metrics</field>
      <field name="arch" type="xml">
        <tree>
          <field name="emp_code" />
          <field name="name" />
          <field name="job_id" />
          <field name="department_id" />
          <field name="project_id" />
          <field name="project_manager_id" />
          <field name="audit_schedule" />
          <field name="audit_compliance" />
          <field name="product_review" />
          <field name="audit_score" />
        </tree>
      </field>
    </record>

    <!-- kw_project_performer_metrics search view -->
    <record id="kw_project_performer_metrics_view_search" model="ir.ui.view">
      <field name="name">kw_project_performer_metrics.view.search</field>
      <field name="model">kw_project_performer_metrics</field>
      <field name="arch" type="xml">
        <search string="Search Description">
          <field name="employee_id"/>
          <field name="year"/>
          <field name="month"/>
          <filter string="This Year" domain="[('year', '=',context_today().strftime('%Y'))]" name="current_year"/>
          <filter string="Last Year" domain="[('year', '=',(context_today()-relativedelta(years=1)).strftime('%Y'))]" name="last_year"/>
          <separator/>

          <filter string="This Month" name="by_current_month_year" domain="[('current_month','=',True)]"/>
          <filter string="January" domain="[('month','=',1)]" name="january"/>
          <filter string="February" domain="[('month','=',2)]" name="february"/>
          <filter string="March" domain="[('month','=',3)]" name="march"/>
          <filter string="April" domain="[('month','=',4)]" name="april"/>
          <filter string="May" domain="[('month','=',5)]" name="may"/>
          <filter string="June" domain="[('month','=',6)]" name="june"/>
          <filter string="July" domain="[('month','=',7)]" name="july"/>
          <filter string="August" domain="[('month','=',8)]" name="august"/>
          <filter string="September" domain="[('month','=',9)]" name="september"/>
          <filter string="October" domain="[('month','=',10)]" name="october"/>
          <filter string="November" domain="[('month','=',11)]" name="november"/>
          <filter string="December" domain="[('month','=',12)]" name="december"/>
          <group expand="0" string="Group By">
            <filter string="Employee" name="employee" context="{'group_by':'employee_id'}"/>
          </group>
        </search>
      </field>
    </record>


    <record id="project_performer_metrics_action" model="ir.actions.act_window">
      <field name="name">Project Performer Metrics</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">kw_project_performer_metrics</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="view_type">form</field>
      <field name="context">{'delete':False}</field>
      <field name="domain">[('employee_id.user_id','=',uid)]</field>
    </record>


    <record id="project_performer_metrics_take_action" model="ir.actions.act_window">
      <field name="name">Project Performer Metrics</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">kw_project_performer_metrics</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="view_type">form</field>
      <field name="context">{'create': False,'delete':False,'show_btn':1}</field>
      <field name="domain">[('state','=','apply')]</field>
    </record>

    <record id="project_performer_metrics_report_action" model="ir.actions.act_window">
      <field name="name">Project Performer Metrics Reports</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">kw_project_performer_metrics</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="view_type">form</field>
      <field name="context">{'create': False,'edit':False,'delete':False}</field>
      <field name="domain">[('state','=','publish')]</field>
    </record>


  </data>
</odoo>