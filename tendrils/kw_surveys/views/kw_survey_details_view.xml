<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="kw_survey_details_view_kanban" model="ir.ui.view">
            <field name="name">Give Survey</field>
            <field name="model">kw_surveys_details</field>
            <field name="arch" type="xml">
                <kanban class="o_event_kanban_view" create="false" import='false' delete="false" edit="false">
                    <field name="employee_ids"/>
                    <field name="survey_name"/>
                    <field name="survey_id"/>
                    <field name="start_date"/>
                    <field name="end_date"/>
                    <field name="from_date" />
                    <field name="to_date"/>
                    <field name="date_time"/>
                    <field name="state"/>
                    <field name="log_in"/>
                    <field name="portal"/>
                    <field name="email"/>
                    <field name="duration"/>
                    <field name="user_input_id"/>
                    <field name="quizz_score"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_global_click" style="width:330px;">
                                <div class="o_kanban_record_top">
                                    <!-- <div class="o_kanban_record_headings">
                                        <h4>
                                            <img t-att-src="kanban_image('hr.employee', 'image_small', record.employee_ids.raw_value)" t-att-alt="record.employee_ids.value" width="40" height="40" class="rounded-circle"/>
                                            <b t-esc="record.employee_ids.value">
                                            </b>
                                        </h4>
                                    </div> -->
                                </div>
                                <!-- <div class="mb-2">
                                    <h2 class="text-uppercase badge text-wrap font-weight-bold p-2" style="background-color: #ade4ef; font-size: 1rem;">
                                        <span t-esc="record.survey_name.value"/>
                                    </h2>
                                </div> -->
                                <div class="mb-2 text-truncate">
                                    <h3 class="text-uppercase badge text-wrap font-weight-bold p-2" style="background-color: #ade4ef; font-size: 1rem;">
                                        <span>
                                            <field name="survey_name"/>
                                        </span>
                                    </h3>
                                </div>
                                <div class="row mt-3 mb-2">
                                    <div class="col-sm-8">
                                        <table class="table table-borderless">
                                            <tr>
                                                <td class="p-0" width="30%">
                                                    <i class="fa fa-calendar  mr-2" />
From</td>
                                                <td class="p-0">:&amp;nbsp;</td>
                                                <td class="p-0">
                                                    <span>
                                                        <t t-esc="record.start_date.value"/>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-0" width="30%">
                                                    <i class="fa fa-calendar  mr-2" />
                                                    To
                                                </td>
                                                <td class="p-0">:&amp;nbsp;</td>
                                                <td class="p-0">
                                                    <span>
                                                        <t t-esc="record.end_date.value"/>
                                                    </span>
                                                </td>
                                            </tr>
                                            <!-- <tr>
                                                <td class="p-0" width="30%">
                                                    <i class="fa fa-clock-o mr-2" />
                                                    Duration(sec)
                                                </td>
                                                <td class="p-0">:&amp;nbsp;</td>
                                                <td class="p-0">
                                                    <span>
                                                        <t t-esc="record.duration.value"/>
                                                    </span>
                                                </td>
                                            </tr> -->
                                            <!-- <tr>
                                                <td class="p-0" width="30%">
                                                    <i class="fa fa-clock-o mr-2" />
                                                   Total Score
                                                </td>
                                                <td class="p-0">:&amp;nbsp;</td>
                                                <td class="p-0">
                                                    <span>
                                                        <t t-esc="record.quizz_score.value"/>
                                                    </span>
                                                </td>
                                            </tr> -->
                                        </table>
                                    </div>
                                    <div class="col-sm-4 text-center">
                                        <h3>
                                            <field name="state" widget="label_selection"/>
                                        </h3>
                                    </div>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <button attrs="{'invisible': ['|','|','|',('portal','=',False),('state','in',['3','4']),('from_date','=',True),('to_date','=',True)]}" class="btn btn-primary" type="object" name="give_survey_portal">Give Survey <i class="fa fa-plus fa-inverse" role="img"></i>
                                    </button>
                                    <button attrs="{'invisible': [('state','in',['1','2'])]}" class="btn btn-primary float-right" type="object" name="view_survey_portal">View Survey <i class="fa fa-eye fa-inverse" role="img"></i>
                                    </button>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="kw_survey_details_tree" model="ir.ui.view">
            <field name="name">Survey Configuration</field>
            <field name="model">kw_surveys_details</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="employee_ids"/>
                    <field name="survey_name"/>
                    <field name="survey_id"/>
                    <field name="start_date"/>
                    <field name="end_date"/>
                    <field name="state"/>
                    <field name="from_date" invisible="1"/>
                    <field name="to_date" invisible="1"/>
                    <field name="log_in" invisible='1'/>
                    <field name="email" invisible='1'/>
                    <field name="portal" invisible='1'/>
                    <button attrs="{'invisible': ['|','|','|',('portal','=',False),('state','in',['2','3','4']),('from_date','=',True),('to_date','=',True)]}" class="btn btn-sm btn-primary" type="object" name="give_survey_portal" string='Give Survey '>
                    </button>
                    <button attrs="{'invisible': [('state','in',['1','2'])]}" string='View Survey' class="btn btn-sm btn-success" type="object" name="view_survey_portal">
                    </button>
                </tree>
            </field>
        </record>

        <record id="kw_survey_details_search" model="ir.ui.view">
            <field name="name">Survey Search</field>
            <field name="model">kw_surveys_details</field>
            <field name="arch" type="xml">
                <search string="Search Description">
                    <field name="survey_id" string='Survey Name'/>
                </search>
            </field>
        </record>

        <record id="kw_survey_details_action" model="ir.actions.act_window">
            <field name="name">My Survey</field>
            <field name="res_model">kw_surveys_details</field>
            <field name="view_mode">kanban,tree</field>
            <field name="view_type">form</field>
            <field name="domain">[('employee_ids.user_id','=',uid),('portal','=',True),('state','not in',['4'])]</field>
        </record>

        <record id="kw_survey_details_action_kanban" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="kw_survey_details_view_kanban"/>
            <field name="act_window_id" ref="kw_survey_details_action"/>
        </record>

        <record id="kw_survey_details_action_tree" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="kw_survey_details_tree"/>
            <field name="act_window_id" ref="kw_survey_details_action"/>
        </record>

    </data>
</odoo>