<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <record id="canteen_meal_exclusion_mail_template" model="mail.template">
            <field name="name">Canteen: Meal Exclusion Mail </field>
            <field name="email_from">${object.env.user.email}</field>
            <field name="subject"> Meal Exclusion Request | ${ctx['employee']} (${ctx['employee_code']})</field>
            <field name="email_to">${ctx['emails']}</field>
            <field name="model_id" ref="kw_canteen.model_kw_canteen_meal_exclusion_wizard"/>
            <field name="auto_delete" eval="False"/>
            <field name="body_html">
                <![CDATA[
                    <table border="0">
                        <tr>
                            <td>
                                <div style="margin-left: 1.2rem;margin-bottom:1em;">
                                    <h5 style="font-weight: 400;margin-bottom: 0;font-size: 16px;color:#676767;">
                                        <span style="color:rgb(22, 123, 158);font-size: 16px;margin-right: 2px;font-weight: 600;">Dear All,</span>
                                    </h5>

                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 16px;">
                                           <b>${ctx['employee']} </b> has applied for meal exclusion.
                                        </p>
                                        <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 24px;">
                                            Exclusion Details:
                                        </p>
                                        % for rec in object:
                                        <table border="1" cellpadding="5" cellspacing="0" style="width:100%;border-collapse: collapse;font-size: 16px; margin-top:1rem;">
                                            <tr>
                                                <th style="height: 30px;width:25%;padding-left:5px; font-weight:700;color:#676767;text-align:left;">Exclusion Type</th>
                                                <th style="height: 30px;width:25%;padding-left:5px; font-weight:700;color:#676767;text-align:left;">Start date </th>
                                                <th style="height: 30px;width:25%;padding-left:5px; font-weight:700;color:#676767;text-align:left;">End Date</th>
                                                <th style="height: 30px;width:25%;padding-left:5px; font-weight:700;color:#676767;text-align:left;">Reason</th>
                                            </tr>

                                                <tr>
                                                    <td style="padding-left:5px;color:#676767;height: 34px;width:25%;">
                                                    % if rec.exclusion_type == 'temporary':
                                                        Temporary
                                                    </td>
                                                    % else
                                                        Permanent
                                                    %endif
                                                    <td style="padding-left:5px;color:#676767;height: 34px;width:25%;">
                                                        % if rec.exclusion_type == 'temporary':
                                                            ${format_tz(rec.start_date, format="%d-%b-%Y")}
                                                        % else
                                                            ${format_tz(ctx['permanent_start_date'], format="%d-%b-%Y")}
                                                        %endif
                                                    </td>

                                                    <td style="padding-left:5px;color:#676767;height: 34px;width:25%;">
                                                        ${format_tz(rec.end_date, format="%d-%b-%Y")}
                                                    </td>
                                                    <td style="padding-left:5px;color:#676767;height: 34px;width:25%;">
                                                        % if rec.reason != False:
                                                            ${rec.reason}
                                                        % else
                                                            --
                                                        %endif
                                                    </td>
                                                </tr>

                                        </table>
                                        % endfor

                                </div>

                                <div style="margin-left: 1.2rem;margin-bottom:1em;">
                                    <p style="color: #676767;line-height: 145%;margin: 10px 0 0 0;font-size: 16px;">
                                    <br/>
                                    <br/>

                                    This is an automatically  generated email.

                                    </p>
                                </div>
                            </td>
                        </tr>
                    </table>
                ]]>

            </field>
        </record>
    </data>
</odoo>