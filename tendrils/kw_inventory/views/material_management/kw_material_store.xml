<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_stock_quant_tree" model="ir.ui.view">
        <field name="name">stock.quant.tree</field>
        <field name="model">stock.quant</field>
        <field name="arch" type="xml">
            <tree string="Lots/Serial Numbers" decoration-info="status=='Issued'" decoration-success="status == 'Released'" create='0' edit='0' delete='0'>
                <field name="serial_key" invisible='1'/>
                <!-- <field name="serial_type" invisible='1'/> -->
                <field name="lot_id"/>
                <!-- <button string="" name="update_serial_no" icon="fa-pencil" type="object"/> -->
                <!-- <field name="fa_code"/> -->
                <!-- <button string="" name="update_fa_code" icon="fa-pencil" type="object"/> -->
                <field name="material_type"/>
                <field name="product_name"  string='Name' invisible='1'/>
                <field name="product_id" required='1' readonly='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <!-- <field name="narration"/> -->
                <field name="quantity"  required='0' invisible='1'/>
                <field name="reserved_quantity"  required='0' invisible='1'/>
                <field name="dept_id" string='Store' readonly='1' required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="user_company_id" required='0' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                <field name="branch_id" options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}" readonly='1'/>
                <!-- <field name="department_id" domain="[('dept_type.code', '=', 'department')]" required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
                <!-- <field name="employee_id" force_save='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
                <field name="is_grn" invisible='1'/>
                <field name="is_gift" invisible='1'/>
                <!-- <field name="is_issued"/> -->
                <field name="is_asset" invisible='1'/>
                <field name="repair_damage" string='Repair Status' required='0'/>
                <!-- <field name="gatepass_type" string='Gatepass Type'/> -->
                <field name="requirement_type"/>
                <field name="price" sum='price'/>
                <field name="status" invisible='1'/>
                <!-- <field name="active" widget="boolean_toggle"/> -->
                <field name="sequence" invisible='1'/>
                <field name="location_id" invisible='1' required='0'/>
                <field name="asset_id" invisible='1'/>
                <field name="age" invisible='1'/>
                <!-- <button type="object" name="create_asset_entry" attrs="{'invisible': ['|',('is_asset', '=',False),('asset_id', '!=',False)]}" string="Asset Entry" class="btn-info" /> -->
                <!-- <button type="object" name="view_asset_entry" attrs="{'invisible': [('asset_id', '=',False)]}" string="View Asset" class="btn-info"/> -->

            </tree>
        </field>
    </record>

    <record id="view_stock_issue_tree" model="ir.ui.view">
        <field name="name">stock.issue.tree</field>
        <field name="model">stock.quant</field>
        <field name="arch" type="xml">
            <tree string="Lots/Serial Numbers" decoration-info="status=='Issued'" editable="bottom" decoration-success="status == 'Released'" create='0' delete='0'>
                <field name="serial_key" invisible='1'/>
                <!-- <field name="serial_type" invisible='1'/> -->
                <field name="lot_id" readonly='0'/>
                <field name="fa_code" readonly='1'/>
                <field name="material_type" readonly='1'/>
                <field name="product_name"  string='Name' invisible='1'/>
                <field name="product_id" required='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="quantity"  required='0' invisible='1'/>
                <field name="reserved_quantity"  required='0' invisible='1'/>
                <!-- <field name="dept_id" string='Store' readonly='1' required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
                <!-- <field name="user_company_id" required='0' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/> -->
                <!-- <field name="branch_id" options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}" readonly='1'/> -->
                 <field name="department_id"  invisible='1' domain="[('dept_type.code', '=', 'department')]" required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="employee_id" force_save='1'  invisible='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <!-- <field name="is_gift" invisible='1'/> -->
                <!-- <field name="is_grn" invisible='1'/> -->
                <field name="is_issued" invisible='1'/>
                <!-- <field name="is_asset" invisible='1'/> -->
                <field name="repair_damage" readonly='1' string='Repair Status'/>
                <!-- <field name="gatepass_type" string='Gatepass Type'/> -->
                <!-- <field name="price" sum='price'/> -->
                <field name="requirement_type"  invisible='1'/>
                <field name="project_code"  invisible='1'/>
                <field name="status" invisible='1'/>
                <!-- <button type="object" name="redirect_release_items" attrs="{'invisible': [('status', '!=', 'Issued')]}" string="Release" class="btn-success"/> -->
                <button type="object" name="redirect_issue_repair_damage_view" attrs="{'invisible': [('status', 'not in', ['Released','Draft'])]}" string="Issue" class="btn-success"/>
                <!-- <field name="sequence" invisible='1'/> -->
                <!-- <field name="location_id" invisible='1' required='0'/> -->
                <!-- <field name="asset_id" invisible='1'/> -->
            </tree>
        </field>
    </record>

    <record id="view_stock_quant_approval_tree" model="ir.ui.view">
        <field name="name">stock.quant.approval.tree</field>
        <field name="model">stock.quant</field>
        <field name="arch" type="xml">

            <tree string="Lots/Serial Numbers" create='0' editable='bottom' delete='0'>
                <field name="serial_key" invisible='1' />
                <!-- <field name="serial_type" readonly='1' invisible='0'/> -->
                <field name="lot_id"/>
                <button string="" name="update_serial_no" icon="fa-pencil" type="object"/>
                <field name="fa_code" readonly='1'/>
                <!-- <button string="" name="update_fa_code" icon="fa-pencil" type="object"/> -->
                <field name="product_id" required='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="product_name" required='1' string='Name' readonly='1'/>
                <field name="material_type" readonly='1'/>
                <!-- <field name="narration"/> -->
                <field name="quantity"  required='0' readonly='1' invisible='1'/>
                <field name="reserved_quantity"  required='0' readonly='1' invisible='1'/>
                <field name="dept_id" string='Store' invisible='0' required='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="user_company_id" readonly='1' required='0' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                <field name="branch_id" readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="department_id" domain="[('dept_type.code', '=', 'department')]" required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="employee_id" force_save='1' attrs="{'readonly': [('status', 'in', ['Issued'])]}" options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
                <field name="is_gift" />
                <field name="is_grn" invisible='1'/>
                <field name="is_issued" readonly='1'/>
                <field name="is_asset" invisible='0' readonly='1'/>
                <field name="repair_damage"  required='0'/>
                <field name="active" widget="boolean_toggle" readonly='1'/>
                <field name="sequence" invisible='1'/>
                <field name="location_id" invisible='1' required='0'/>
                <field name="price" sum='price'/>
                <field name="status"/>
                <button string="Verifiy" name="verify_serial_no" icon="fa-pencil" type="object"/>
            </tree>
        </field>
    </record>

    <record id="view_stock_quant_gift_tree" model="ir.ui.view">
      <field name="name">stock.quant.gift.tree</field>
      <field name="model">stock.quant</field>
      <field name="arch" type="xml">
          <tree string="Lots/Serial Numbers" create='0' decoration-info="status=='Issued'" decoration-success="status == 'Released'" delete='0'>
              <field name="serial_key" invisible='1' />
              <!-- <field name="serial_type" readonly='1' invisible='0'/> -->
              <field name="material_ref_no"/>
              <field name="lot_id"/>
              <!-- <button string="" name="update_serial_no" icon="fa-pencil" type="object"/> -->
              <field name="fa_code" readonly='1' invisible='1'/>
              <!-- <button string="" name="update_fa_code" icon="fa-pencil" type="object"/> -->
              <field name="product_id" required='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <field name="product_name"  string='Name' readonly='1' invisible='1'/>
              <field name="material_type" readonly='1'/>
              <!-- <field name="narration"/> -->
              <!-- <field name="quantity"  required='0' readonly='1' invisible='1'/> -->
              <!-- <field name="reserved_quantity"  required='0' readonly='1' invisible='1'/> -->
              <field name="dept_id" string='Store' invisible='0' required='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <field name="branch_id" readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <!-- <field name="user_company_id" readonly='1' required='0' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/> -->
              <!-- <field name="dept_id" invisible='0' required='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
              <!-- <field name="branch_id" readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
              <field name="requirement_type" readonly='1'/>
              <field name="project_code" readonly='1'/>
              <field name="department_id" domain="[('dept_type.code', '=', 'department')]" required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <!-- <field name="is_gift" readonly='1'/> -->
              <!-- <field name="gatepass_type" readonly='1' string='Gatepass Type'/> -->
              <field name="employee_id" force_save='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <!-- <field name="is_grn" invisible='1'/> -->
              <field name="is_issued" invisible='1' readonly='1'/>
              <!-- <field name="is_asset" invisible='0' readonly='1'/> -->
              <!-- <field name="repair_damage"  required='0'/> -->
              <!-- <field name="active" widget="boolean_toggle" readonly='1'/> -->
              <!-- <field name="sequence" invisible='1'/> -->
              <!-- <field name="location_id" invisible='1' required='0'/> -->
              <!-- <field name="price" sum='price'/> -->
              <field name="status" readonly='1'/>
              <button type="object" name="redirect_release_items" attrs="{'invisible': [('status', '!=', 'Issued')]}" string="Return To Store" class="btn-success"/>
          </tree>
      </field>
  </record>

  <record id="view_stock_quant_store_return_tree" model="ir.ui.view">
      <field name="name">stock.quant.return.tree</field>
      <field name="model">stock.quant</field>
      <field name="arch" type="xml">
          <tree string="Lots/Serial Numbers" create='0' decoration-info="status=='Issued'" decoration-success="status == 'Released'" delete='0'>
              <field name="serial_key" invisible='1' />
              <!-- <field name="serial_type" readonly='1' invisible='0'/> -->
              <field name="lot_id"/>
              <field name="fa_code" readonly='1' invisible='1'/>
              <field name="product_id" required='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <field name="product_name" string='Name' readonly='1' invisible='1'/>
              <field name="material_type" readonly='1'/>
              <field name="department_id" domain="[('dept_type.code', '=', 'department')]" required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <field name="gatepass_type" readonly='1' string='Gatepass Type'/>
              <!-- <field name="employee_id" force_save='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
              <!-- <field name="branch_id" readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
              <!-- <field name="is_issued" readonly='1'/> -->
              <field name="repair_damage" readonly='1'/>
              <field name="status" invisible='1'/>
              <button type="object" name="return_to_store"  string="Return To Store" attrs="{'invisible': [('repair_damage', '!=', 'repair')]}" class="btn-success"/>
              <button type="object" name="return_details"  string="Repair Details" attrs="{'invisible': [('repair_damage', '!=', 'repair')]}" class="btn-info"/>
            </tree>
      </field>
  </record>

  <record id="view_stock_quant_damaged_stock_tree" model="ir.ui.view">
      <field name="name">stock.quant.damaged.tree</field>
      <field name="model">stock.quant</field>
      <field name="arch" type="xml">
          <tree string="Lots/Serial Numbers" create='0' decoration-info="status=='Issued'" decoration-success="status == 'Released'" delete='0'>
              <field name="serial_key" invisible='1' />
              <!-- <field name="serial_type" readonly='1' invisible='0'/> -->
              <field name="lot_id"/>
              <field name="fa_code" readonly='1' invisible='1'/>
              <field name="product_id" required='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <field name="product_name" required='1' string='Name' readonly='1'/>
              <field name="material_type" readonly='1'/>
              <field name="department_id" domain="[('dept_type.code', '=', 'department')]" required='0' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/>
              <field name="gatepass_type" readonly='1' string='Gatepass Type'/>
              <!-- <field name="employee_id" force_save='1' readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
              <!-- <field name="branch_id" readonly='1' options="{'no_quick_create':True,'no_create':True,'no_edit':True,'no_open': True,}"/> -->
              <!-- <field name="is_issued" readonly='1'/> -->
              <field name="repair_damage" readonly='1'/>
              <field name="status" invisible='1'/>
          </tree>
      </field>
  </record>

  <record id="kw_stock_quant_search_view" model="ir.ui.view">
    <field name="name">Store Search</field>
    <field name="model">stock.quant</field>
    <field name="arch" type="xml">
        <search string="">
          <field name="requirement_type"/>
          <field name="gatepass_type" string='Gatepass Type'/>
          <field name="employee_id" />
          <field name="branch_id" />
          <field name="is_grn" />
          <field name="is_asset" />
          <field name="sequence" />
          <field name="status"/>
          <field name="dept_id"/>
          <!-- <field name="serial_type"/> -->
          <field name="lot_id" />
          <field name="product_id" />
          <field name="product_name" />
          <field name="material_type" />
          <field name="quantity" />
          <!-- <filter string="Returnable" name="filter_retunable" domain="[('gatepass_type', '=','returnable')]"/>
          <filter string="Non-returnable" name="filter_nonreturnable" domain="[('gatepass_type', '=','nonreturnable')]"/> -->
          <separator/>
          <filter string="Treasury" name="filter_treasury" domain="[('requirement_type', '=','treasury')]"/>
          <filter string="Project" name="filter_project" domain="[('requirement_type', '=','project')]"/>
          <filter string="Sent to Repair" name="filter_repair" domain="[('repair_damage', '=','repair')]"/>
          <filter string="Repaired" name="filter_repaired" domain="[('repair_damage', '=','repaired')]"/>
          <separator/>
          <!-- <filter string="Draft" name="filter_draft" domain="[('status', '=','Draft')]"/> -->
          <!-- <filter string="Issued" name="filter_issued" domain="[('status', '=','Issued')]"/>-->
          <filter string="Non-Issued" name="filter_non_issued" domain="[('status', 'in',['Released','Draft'])]"/>
          <separator/>


          <group expand="0" string="Group By">
              <filter string="Return Status" name="grp_by_gatepass_type" domain="" context="{'group_by':'gatepass_type'}"/>
              <filter string="Requirement Type" name="grp_by_requirement_type" domain="" context="{'group_by':'requirement_type'}"/>
              <filter string="Status" name="grp_by_status" domain="" context="{'group_by':'status'}"/>
          </group>
        </search>
    </field>
</record>

  <record id="kw_stock_quant_returnable_search_view" model="ir.ui.view">
    <field name="name">Returnable/Non-returnable</field>
    <field name="model">stock.quant</field>
    <field name="arch" type="xml">
        <search string="">
            <field string="Product move type" name="gatepass_type"/>
            <filter string="Returnable" name="filter_retunable" domain="[('gatepass_type', '=','returnable')]"/>
            <filter string="Non-returnable" name="filter_nonreturnable" domain="[('gatepass_type', '=','nonreturnable')]"/>
            <group expand="0" string="Group By">
                <filter string="Returnable/Non-returnable" name="grp_by_gatepass_type" domain="" context="{'group_by':'gatepass_type'}"/>
                <filter string="Product" name="grp_by_product_id" domain="" context="{'group_by':'product_id'}"/>
            </group>
        </search>
    </field>
</record>

  <record id="action_stock_quant_issued" model="ir.actions.act_window">
    <field name="name">Issued</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree</field>
    <field name="res_model">stock.quant</field>
    <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_quant_gift_tree')})]"/>
    <field name="domain">[('status','=','Issued'),('process_location','=','store'),('quantity','&gt;',0),('active','=', True)]</field> 
    <field name="search_view_id" ref="kw_stock_quant_returnable_search_view"/>
    <!-- <field name="context">{'search_default_filter_retunable': 1}</field> -->
</record>

  <!-- <record id="action_stock_quant_sent_to_repair" model="ir.actions.act_window">
    <field name="name">Sent to Repair</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree</field>
    <field name="res_model">stock.quant</field>
    <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_quant_store_return_tree')})]"/>
    <field name="domain">[('repair_damage','=','repair'),('process_location','=','store'),('quantity','&gt;',0),('active','=', True)]</field> 
    <field name="search_view_id" ref="kw_stock_quant_returnable_search_view"/>
</record> -->

  <record id="action_nonreturnable_stock" model="ir.actions.act_window">
    <field name="name">Nonreturnable/Returnable Gatepass</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree</field>
    <field name="res_model">stock.quant</field>
    <field name="view_ids" eval="[(5, 0, 0),
    (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_quant_store_return_tree')})]"/>
    <field name="domain">[('gatepass_type','in',['nonreturnable','returnable']),('process_location','=','store')]</field> 
    <field name="search_view_id" ref="kw_stock_quant_returnable_search_view"/>
</record>

    <record id="quant_search_view" model="ir.ui.view">
      <field name="name">stock.quant.search</field>
      <field name="model">stock.quant</field>
      <field name="inherit_id" ref="stock.quant_search_view"/>
      <field name="arch" type="xml">
        <xpath expr="//search" position="inside">
          <field name="process_location"/>
        </xpath>
      </field>
  </record>


    <record id="action_stock_quant_store" model="ir.actions.act_window">
        <field name="name">Store</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">stock.quant</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_quant_tree')})]"/>
        <field name="domain">[('active','=', True),('process_location','=','store'),('quantity','&gt;',0),('repair_damage','in',['repaired',False]),('status', 'in',['Released','Draft'])]</field> 
        <field name="search_view_id" ref="kw_stock_quant_search_view"/>
        <field name="context">{'search_default_filter_non_issued': 1}</field>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Add a lot/serial number
          </p><p>
            This is the list of all the production lots you recorded. When
            you select a lot, you can get the traceability of the products contained in lot.
          </p>
        </field>
    </record>

    <record id="action_stock_quant_approval" model="ir.actions.act_window">
        <field name="name">Stock verification</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">stock.quant</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_quant_approval_tree')})]"/>
        <field name="domain">[('active','=', True),('process_location','=','store'),('quantity','&gt;',0)]</field> 
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Add a lot/serial number
          </p><p>
            This is the list of all the Items in store.
          </p>
        </field>
    </record>

    <record id="reserve_unreserved_stock_action" model="ir.actions.act_window">
      <field name="name">Reserved/Underprocess Stock</field>
      <field name="type">ir.actions.act_window</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree</field>
      <field name="res_model">stock.quant</field>
      <field name="view_ids" eval="[(5, 0, 0),
      (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_quant_gift_tree')})]"/>
      <field name="domain">[('quantity','&gt;',0),('active','=', True),('process_location','!=','store')]</field>
      <field name="context">{'create':False,'edit':False,'delete':False,'import':False}</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
        </p>
      </field>
  </record>

    <!-- <menuitem action="action_stock_quant_store" id="menu_action_store_master"
        groups="purchase.group_purchase_manager,group_store_manager,stock.group_stock_manager"
        parent="kw_purchase_master" 
        sequence="4"/> -->

      <record id="action_window_store_issue" model="ir.actions.act_window">
        <field name="name">Issue Items</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree</field>
        <field name="res_model">stock.quant</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_inventory.view_stock_issue_tree')})]"/>
        <field name="domain">[('active','=', True),('repair_damage','in',[False,'repaired']),('process_location','=','store'),('quantity','&gt;',0),('status','in',['Draft','Released'])]</field> 
        <field name="search_view_id" ref="kw_stock_quant_search_view"/>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            Add a lot/serial number
          </p><p>
            This is the list of all the Items in store.
          </p>
        </field>
    </record>
</odoo>
