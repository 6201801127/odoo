<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_purchaseorder_inherit" inherit_id="purchase.report_purchaseorder_document">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-call="web.external_layout">
                <table>
                    <head>
                        <title>CSM Technologies | IT Services, Consulting, Technology</title>
                    </head>
                    <body style="margin: 0; padding: 0;font-family: arial,sans-serif;color:#676767; font-size: .9rem;margin-bottom:1rem;">
                        <table width="100%" border="1" cellspacing="0" cellpadding="2" style="max-width:800px;overflow-y: hidden;margin:auto;border-collapse: collapse;color: #000;border: 1px solid #000;">
                            <tr>
                                <td colspan="2" style="border-right: 1px solid transparent;height:60px;border-bottom: 1px solid transparent;">
                                    <img t-if="o.company_id.logo" class="mt-1 o_portal_contact_img" width="150px" t-att-src="image_data_uri(o.company_id.logo)"/>
                                 </td>
                                <td colspan="4" style=" color: #fff;background-color:#9699A7; text-align: center; border: 1px solid #000;height:60px;">
                                    <strong>PURCHASE ORDER </strong>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="border-right: 1px solid transparent;">
                                    <p t-if="o.company_id.street or o.company_id.street2" style="color: #000;font-size: .75rem;margin-bottom: -5px;margin-top: 3px;">
                                        <i><span t-field="o.company_id.street" />,<span t-field="o.company_id.street2" /></i>
                                    </p>
                                    <p t-if="o.company_id.country_id or o.company_id.state_id or o.company_id.city or o.company_id.zip" style="color: #000;font-size: .75rem;margin-bottom: -5px;">
                                        <i><span t-field="o.company_id.country_id" />,<span t-field="o.company_id.state_id" />,<span t-field="o.company_id.city" />,<span t-field="o.company_id.zip" /></i>
                                    </p>
                                    <p t-if="o.company_id.website or o.company_id.phone or o.company_id.email" style="color: #000;font-size: .75rem;margin-bottom: 0px;">
                                        <span t-field="o.company_id.website" /> | <span t-field="o.company_id.phone" /> | <span t-field="o.company_id.email" />
                                    </p>
                                </td>
                                <td colspan="4">
                                    <span style="font-size: .9rem;color: #000;">
                                        PO. NO.:<![CDATA[&nbsp;]]>
                                        <strong><span>CSMPL/<span t-field="o.branch_id.inventory_ref"/>/<span t-esc="o.name"/>/<span t-esc="o.get_year()"/></span></strong>
                                    </span>
                                    <br/>
                                    <span style="font-size: .9rem;color: #000;">DATE :<![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]]>
                                        <strong style="text-align: right;">  <span t-field="o.date_order" t-options='{"format": "dd-MMM-yyyy"}'></span></strong>
                                    </span>
                                    <br/>
                                    <!-- <span style="font-size: .9rem;color: #000;">GSTIN :<![CDATA[&nbsp;]]>
                                        <strong style="text-align: right;">  <span t-field="o.company_id.vat" ></span></strong>
                                    </span> -->

                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="background-color:#9699A7; color: #fff;border-top: 1px solid transparent;border-right: 1px solid transparent;">VENDOR/SUPPLIER</td>
                                <td colspan="4" style="background-color:#9699A7; color: #fff;border-top: 1px solid transparent;">SHIP TO</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="border: 1px solid  #000;">
                                    <div style="padding: 5px;">
                                       <t t-if="o.child_ids.name" >
                                            <span t-field="o.partner_id.name" />,
                                            <span t-field="o.child_ids.name" />,
                                        </t>
                                        <t t-else='' >
                                            <span t-field="o.partner_id.name" />
                                        </t><br/> 
                                        <t t-if="o.child_ids.street" >
                                            <span t-field="o.child_ids.street" />
                                        </t>
                                        <t t-else='' >
                                            <span t-field="o.partner_id.street" />
                                        </t>,
                                        
                                        <t t-if="o.child_ids.street2" >
                                            <span t-field="o.child_ids.street2" />
                                        </t>
                                        <t t-else='' >
                                            <span t-field="o.partner_id.street2" />
                                        </t>,<br/>
                                         <t t-if="o.child_ids.city" >
                                            <span t-field="o.child_ids.city" />
                                        </t>
                                        <t t-else='' >
                                            <span t-field="o.partner_id.city" />
                                        </t>,
                                         <t t-if="o.child_ids.zip" >
                                            <span t-field="o.child_ids.zip" />
                                        </t>
                                        <t t-else='' >
                                            <span t-field="o.partner_id.zip" />
                                        </t>,<br/>
                                        <t t-if="o.child_ids.state_id" >
                                            <span t-field="o.child_ids.state_id" />
                                        </t>
                                        <t t-else='' >
                                            <span t-field="o.partner_id.state_id" />
                                        </t>,
                                        <t t-if="o.child_ids.phone" >
                                           Ph: <span t-field="o.child_ids.phone" />,<![CDATA[&nbsp;]]>
                                        </t>
                                        <t t-else='' >
                                            Ph:<span t-field="o.partner_id.phone" />,<![CDATA[&nbsp;]]>
                                        </t>
                                        <t t-if="o.child_ids.vat" >
                                            GSTIN:<span t-field="o.child_ids.vat" /><![CDATA[&nbsp;]]>
                                        </t>
                                        <t t-else='' >
                                           GSTIN:<span t-field="o.partner_id.vat" /><![CDATA[&nbsp;]]>
                                        </t>
                                    </div>
                                </td>
                                <td colspan="4" style="border: 1px solid  #000;">
                                    <div style="padding: 5px;">
                                        <span t-field="o.branch_id.name" /><br/>
                                        <t t-if="o.branch_id.address"><span t-field="o.branch_id.address" />,</t>
                                        <t t-if="o.branch_id.city"><span t-field="o.branch_id.city" />-</t><t t-if="o.branch_id.zipcode"><span t-field="o.branch_id.zipcode" />,</t>
                                        <span t-field="o.branch_id.state_id" />
                                        <p t-if="o.branch_id.gst_no">
                                            GSTIN: <span t-field="o.branch_id.gst_no"/>
                                        </p>
                                        <!-- <p t-if="o.company_id.vat">
                                            GSTIN: <span t-field="o.company_id.vat"/>
                                        </p> -->
                                    </div>
                                </td>
                            </tr>
                            <tr >
                                <td width="15%" style="color: #FFF;background-color:#9699A7;border: 1px solid  #000;text-align: center;">ITEM CODE </td>
                                <td width="46%" style="color: #fff;background-color:#9699A7;border: 1px solid  #000;text-align: center;"> DESCRIPTION</td>
                                <td width="6%" style="text-align: center; color: #fff;background-color:#9699A7;border: 1px solid #000;">UNIT</td>
                                <td width="8%" style="text-align: center;color: #fff;background-color:#9699A7;border: 1px solid  #000;">QTY</td>
                                <td width="12%" style="text-align: center;color: #fff;background-color:#9699A7;border: 1px solid  #000;">UNIT PRICE </td>
                                <td width="25%" style="text-align: center;color: #fff;background-color:#9699A7;border: 1px solid  #000;">TOTAL</td>
                            </tr>
                            <tr t-foreach="o.order_line" t-as="order_line">
                                <td style="border: 1px solid  #000;"><span t-esc="order_line.product_id.default_code" style="margin-left:5px;"/> </td>
                                <td style="border: 1px solid  #000;"><span t-field="order_line.name" style="margin-left:5px;"/></td>
                                <!-- <td style="border: 1px solid  #000;"><span t-field="order_line.product_id.name" style="margin-left:5px;"/></td> -->
                                <td style="text-align: center;border: 1px solid  #000;"><span t-field="order_line.product_id.uom_id.name"/></td>
                                <td style="text-align: center;border: 1px solid  #000;"><span t-field="order_line.product_qty"/></td>
                                <td style="text-align: right;border: 1px solid  #000;"><span t-field="order_line.price_unit" /></td>
                                <td style="text-align: right;border: 1px solid  #000;"><span t-field="order_line.price_subtotal" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></td>
                                
                            </tr>
                            <tr>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                            </tr> 
                            <tr>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                            </tr> 
                            <tr>
                                <td colspan="2" style="border: 1px solid  #000;">
                                	<t t-esc="o.amount_to_word(o.amount_total,o.company_id.currency_id)"/>
                                </td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;"><![CDATA[&nbsp;]]></td>
                                <td style="border: 1px solid  #000;">
                                    <strong>SUBTOTAL</strong>
                                </td>
                                <td style="text-align: right;border: 1px solid  #000;">
                                    <strong><span t-field="o.amount_untaxed"/></strong>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="4" style="background-color:#9699A7;">
                                    <strong>Comments or Special Instruction</strong>
                                </td>
                                <td style="border: 1px solid  #000;">TAX</td>
                                <td style="text-align: right;border: 1px solid  #000;"><span t-field="o.amount_tax"/></td>
                            </tr>
                            <tr style="border: 1px solid  #000;">
                                <td colspan="4">
                                    <p><span t-field="o.notes"/></p>
                                </td>
                                <td style="border: 1px solid  #000;">
                                    <strong>TOTAL</strong>
                                </td>
                                <td style="background-color:#9699A7;border: 1px solid  #000;text-align:right;">
                                    <strong><span t-field="o.amount_total"/></strong>
                                </td>
                            </tr>
                            <tr style="border: 1px solid  #000;">
                                <td colspan="6" style="text-align: center;font-size: 1rem;color: #000;">
                                     <strong>All Communication related to this Purchase Order shall be made to purchase@csm.tech</strong>
                                </td>
                            </tr>
                            <tr style="border-bottom: 1px solid  #000;">
                                <td colspan="6" style="text-align: center;font-size: 1rem;color: #000;">
                                     <div style="width:100%;">
                                        <div style="width: 60%;float: left;text-align: left;margin-top: 80px;">
                                            <span style="font-size: .65rem;color: #000;margin-top:50px;">System Generated PO Number: <span t-field="o.name" style="font-size: .65arem;color: #000;"/>,
                                                    <span style='margin-left:5px;'>
                                                        Dated on:<![CDATA[&nbsp;]]>
                                                        <strong style="text-align: right;">  
                                                            <span t-field="o.date_order" t-options='{"format": "MM/dd/yyyy"}' style="font-size: .65rem;color: #000;"></span>
                                                        </strong>
                                                    </span>
                                            </span><br/>
                                            <span style="font-size: .65rem;color: #000;">
                                            </span>
                                        </div>
                                        <div style="text-align: left;float: right;width: 40%;margin-top: 45px;">
                                            <p style="margin-bottom: -8px;">Signature</p>
                                            <p style="margin-bottom: -8px;">Name: <span t-field="o.sign_autority.name"/></p>
                                            <p style=""> Designation: <span t-field="o.sign_autority.job_id.name"/></p>
                                        </div>    
                                    </div> 
                                </td>
                            </tr>
                        </table>
                    </body>
                </table>
            </t>
        </xpath>
    </template>

    <template id="report_purchasequotation_custom">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="kw_inventory.report_purchaseorder_inherit" t-lang="o.partner_id.lang"/>
            </t>
        </t>
    </template>

    <template id="remove_footer" inherit_id="web.external_layout_standard">
        <xpath expr="//div[@class='footer o_standard_footer']" position="replace" />
    </template>
    <template id="remove_header" inherit_id="web.external_layout_standard">
        <xpath expr="//div[@class='col-6']" position="replace" />
        <xpath expr="//div[@class='col-12']" position="replace" />
        <xpath expr="//div[@class='col-3 mb4']" position="replace" />
    </template>

    <report string="Purchase Order"
            id="purchase_order_rfq"
            model="purchase.order"
            report_type="qweb-pdf"
            name="kw_inventory.report_purchasequotation_custom"
            file="kw_inventory.report_purchasequotation_custom"
            print_report_name="'Purchase Order - %s' % (object.name)"
    />

</odoo>
