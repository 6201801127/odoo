<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        
        <record id="kw_approved_quotation_view_tree" model="ir.ui.view">
            <field name="name">kw_approved_quotation_view_tree</field>
            <field name="model">kw_quotation_consolidation_items</field>
            <field name="arch" type="xml">
                <tree editable="bottom" create="false" delete="false">
                    <field name="state" invisible="1"/>
                    <field name="invisible_boolean" invisible="1"/>
                    <field name="approve_boolean" invisible="1"/>
                    <field name="product_id" string="Item Code" />
                    <field name="name" string="Item Name" invisible='1'/>
                    <field name="product_qty" string="Quantity" />
                    <field name="product_uom" string="UoM"  />
                    <field name="partner_id"/>
                    <field name="date_planned" string="Date Planned" />
                    <field name="price_unit"  string="Unit Price" />
                    <!-- <field name="last_pp"  string="Last Procurement Price" /> -->
                    <!-- <field name="taxes_id"  string="Taxes" /> -->
                    <field name="state"/>
                    <button string="Approve" name="negotiation_approve" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state', 'not in', ['pending']),('approve_boolean', '=', True)]}"/>
                    <button string="Reject" name="negotiation_reject" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state', 'not in', ['pending']),('approve_boolean', '=', True)]}"/>
                    <field name="remark" invisible='1'/>
                    <field name="po_create" string="PO Created" invisible='1' attrs="{'invisible': [('po_create','=',False)]}"/>
                    <button string="View Details" name="open_form_view" type="object" class="oe_highlight"/>
                </tree>
            </field>
        </record>

        <record id="kw_approve_reason_form_view" model="ir.ui.view">
            <field name="model">kw_quotation_consolidation_items</field>
            <field name="arch" type="xml">
                <form>
                    <script>
                        $(document).ready(function(){
                            $(".modal-footer").hide();
                            $(".modal-title").show();
                            $(".o_form_statusbar").hide();
                        });
                    </script>
                    <div class="row">
                        <div class="text-center col-sm-12 mx-auto">
                            <p class="h6 font-weight-light text-left text-justify">
                                <field name="remark" required="1"/>
                            </p>
                            <button type="object" name="give_approve_remark" class="btn-success mr-2" style="float:left;">Submit</button>
                            <button string="Cancel" class="btn-danger" special="cancel" style="float:left;"/>
                        </div>
                    </div>
                </form>
            </field>
        </record>

        <record id="kw_reject_reason_form_view" model="ir.ui.view">
            <field name="model">kw_quotation_consolidation_items</field>
            <field name="arch" type="xml">
                <form>
                    <script>
                        $(document).ready(function(){
                            $(".modal-footer").hide();
                            $(".modal-title").show();
                            $(".o_form_statusbar").hide();
                        });
                    </script>
                    <div class="row">
                        <div class="text-center col-sm-12 mx-auto">
                            <p class="h6 font-weight-light text-left text-justify">
                                <field name="remark" required="1"/>
                            </p>
                            <button type="object" name="give_reject_remark" class="btn-success mr-2" style="float:left;">Submit</button>
                            <button string="Cancel" class="btn-danger" special="cancel" style="float:left;"/>
                        </div>
                    </div>
                </form>
            </field>
        </record>

        <record id="kw_quotation_consolidation_items_view_search" model="ir.ui.view">
            <field name="name">kw_quotation_consolidation_items.search</field>
            <field name="model">kw_quotation_consolidation_items</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <group expand="0" string="Group By">                                                                                 
                        <!-- <filter name="group_state" string="Status" context="{'group_by':'state'}"/> -->
                    </group>
                </search>
            </field>
        </record>
        
        <record id="kw_approved_quotation_action_window" model="ir.actions.act_window">
			<field name="name">Approve QC</field>
			<field name="res_model">kw_quotation_consolidation_items</field>
			<field name="view_mode">tree</field>
			<field name="view_type">form</field>
			<field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_approved_quotation_view_tree')})]"/>
            <field name="search_view_id" ref="kw_quotation_consolidation_items_view_search"></field>
            <!-- <field name="context">{'search_default_group_state': 1}</field> -->
			<field name="domain">[('state','=','pending')]</field>
		</record>
    </data>
</odoo>
