<?xml version="1.0" encoding="UTF-8"?>
<template>
    <t t-extend="AppsMenu">
        <!-- App icons must be clickable -->
        <t t-jquery=".o_app" t-operation="attributes">
            <attribute name="t-attf-href">#menu_id=#{app.menuID}&amp;action_id=#{app.actionID}</attribute>
        </t>

        <!-- App icons should be more than a text -->
        
        

        <!-- Same hotkey as in EE -->
        <t t-jquery=".full" t-operation="attributes">
            <attribute name="accesskey">a</attribute>
        </t>
        <t t-jquery=".dropdown-menu.show" t-operation="attributes">
            <attribute name="accesskey">a</attribute>
        </t>
        
        <t t-jquery="[t-as=app]" t-operation="replace">
            <div class="main-container">
                <div class="text-center my-5 logo">
                    <a href="#!">
                        <img t-attf-src="/kwantify_theme/static/src/img/logo.png" alt="csm-logo" title="CSM Technologies" />
                    </a>
                </div>
                <div class="apps-container">
                    <div class="most-used-apps">
                        <h4 style="margin-block-start: 1.33em; margin-block-start: 1.33em;">Most Used Apps</h4>
                        <div class="most-used-app-items">
                        </div>
                    </div>
                    <div class="other-apps">
                        <h4 style="margin-block-start: 1.33em;margin-block-end: 1.33em;">All Apps</h4>
                        <div class="search-container">
                            <div class="app-search search-input">
                                <input type="text" name="" placeholder="Search All Apps" />
                                <svg x="0" y="0" viewBox="0 0 29 29" xml:space="preserve"><path d="M11.854 21.854c-5.514 0-10-4.486-10-10s4.486-10 10-10 10 4.486 10 10-4.486 10-10 10zm0-18c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.588-8-8-8z"/><path d="M26.146 27.146a.997.997 0 0 1-.707-.293l-7.694-7.694a.999.999 0 1 1 1.414-1.414l7.694 7.694a.999.999 0 0 1-.707 1.707z"/></svg>
                            </div>
                            <div class="search-results"/>
                        </div>
                        <div class="other-app-items">
                            <t t-foreach="widget.getApps()" t-as="app">
                                <a role="menuitem" t-attf-href="#menu_id=#{app.menuID}"
                                    class="o_app apps"
                                    t-att-data-menu-id="app.menuID"
                                    t-att-data-menu-xmlid="app.xmlID"
                                    t-att-data-action-id="app.actionID">
                                    <div class="apps-icon">
                                        <img t-attf-src="data:image/png;base64,#{app.web_icon_data}"/>
                                    </div>
                                        <span class="o-app-name">
                                            <t t-esc="app.name"/>
                                        </span>
                                </a>
                            </t>
                        </div>
                    </div>
                </div>
                <!-- <div class="apps-container">
                    <div class="most_used_apps">
                        <h4 class="text-white">Most Used Apps</h4>
                        <div class="most-used-app-items">
                            
                        </div>
                    </div>
                    <div class="other-apps">
                        <h4 class="text-white">All Apps</h4>
                        <div class="search-container form-row align-items-center mb-4 col-12">
                            <div class="search-input col-offset-7 col-md-5 ml-auto mb-2">
                                <div class="input-group">
                                    <input type="search"
                                        autocomplete="off"
                                        placeholder="Search menus..."
                                        class="form-control py-4 menu_search"/>
                                        <div class="input-group-append">
                                            <div class="input-group-text menu_search_icon">
                                                <i class="fa fa-search"/>
                                            </div>
                                        </div>
                                </div>
                                
                            </div>
                            <div class="search-results col-md-10 ml-auto mr-auto"/>
                        </div>
                        <div class="other-apps-items">
                            <t t-foreach="widget.getApps()" t-as="app">
                                <a role="menuitem" t-attf-href="#menu_id=#{app.menuID}"
                                    class="dropdown-item o_app"
                                    t-att-data-menu-id="app.menuID"
                                    t-att-data-menu-xmlid="app.xmlID"
                                    t-att-data-action-id="app.actionID">
                                    <img class="o-app-icon" style="border: 2px solid #108fbb; padding: 15px; border-radius: 5px; background: radial-gradient(#328da9, #328da9);"
                                            t-attf-src="data:image/png;base64,#{app.web_icon_data}"/>
                                        <span class="o-app-name">
                                            <t t-esc="app.name"/>
                                        </span>
                                </a>
                            </t>
                        </div>
                    </div>
                </div> -->
            </div>
        </t>
    </t>

    <!-- <t t-jquery=".o_app &gt; t" t-operation="replace">
        <t t-call="kwantify_theme.AppIcon"/>
    </t> -->
    <!-- Separate app icon template, for easier inheritance -->
    <!-- <t t-name="kwantify_theme.AppIcon">
        

    </t> -->

    <t t-name="kwantify_theme.MostUsedApps">
        <t t-esc="result"/>
    </t>

    <!-- A search result -->
    <t t-name="kwantify_theme.MenuSearchResults">
        <t t-foreach="results" t-as="result">
            <t t-set="menu" t-value="widget._menuInfo(result.original)"/>
            <a t-attf-class="o-menu-search-result dropdown-item search-item col-12 #{result_first ? 'active' : ''}"
                t-attf-style="background-image:url('data:image/png;base64,#{menu.web_icon_data}'); background-size: 20px; background-position: 5px"
                t-attf-href="#menu_id=#{menu.id}&amp;action_id=#{menu.action_id}"
                t-att-data-menu-id="menu.id"
                t-att-data-action-id="menu.action_id"
                t-att-data-parent-id="menu.parent_id[0]"
                t-raw="result.string"/>
        </t>
    </t>

    
</template>
