<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
    

        <record id="reward_andrecognition_view_tree" model="ir.ui.view">
            <field name="name">reward_andrecognition.view.tree</field>
            <field name="model">reward_and_recognition</field>
            <field name="arch" type="xml">
                <tree  import='0' duplicate='0'>
                    <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="nominated_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="pending_at" invisible='1' string='Pending at' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="pending_at_status" string='Pending at' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="reviewed_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="create_date" string='Nominated on' widget="date"/>
                    <field name="job_id"/>
                    <field name="location"/>
                    <field name="department_id"/>
                    <field name="division"/>
                    <field name="section"/>
                    <field name="practise"/>
                    <field name="state"/>
                    <field name="get_offboarding_data" invisible='1'/>
                    <field name="active" invisible='1'/>
                    <button name="archive_starlight_record" string="Archive" type="object" context="{'archive_record':True}" groups="kw_reward_and_recognition.rnr_sbu,kw_reward_and_recognition.rnr_manager" confirm='Are you sure want to Archive?' icon="fa-archive fa-lg" attrs="{'invisible': [('active','=',False)]}" />
                    <button name="archive_starlight_record" string="Unrchive" type="object" context="{'unarchive_record':True}" groups="kw_reward_and_recognition.rnr_manager" confirm='Are you sure want to Unarchive?' icon="fa-archive fa-lg" attrs="{'invisible': [('active','=',True)]}" />
                </tree>
            </field>
        </record>

                    <!-- Take action tree view -->

        <record id="reward_andrecognition_take_action_view_tree" model="ir.ui.view">
            <field name="name">reward_andrecognition.view.tree</field>
            <field name="model">reward_and_recognition</field>
            <field name="arch" type="xml">
                <tree create='0' edit='1' delete='0' import='0' duplicate='0'>
                    
                    <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}" />
                    <field name="nominated_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="pending_at" invisible='1' string='Pending at' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="pending_at_status" string='Pending at' options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="reviewed_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="create_date" widget="date"/>
                    <field name="job_id"/>
                    <field name="location"/>
                    <field name="department_id"/>
                    <field name="division"/>
                    <field name="section"/>
                    <field name="practise"/>
                    <field name="state" />
                    <button name="starlight_takeaction" string="Take Action" type="object" class="oe_highlight"
                                attrs="{'invisible': [('state','not in',['nominate'])]}" groups="kw_reward_and_recognition.rnr_reviewer"/>
                    <button name="starlight_takeaction" string="Take Action" type="object" class="oe_highlight"
                                attrs="{'invisible': [('state','not in',['award'])]}" groups="kw_reward_and_recognition.rnr_final_reviewer"/>
                </tree>
            </field>
        </record>

        <record id="reward_andrecognition_view_form" model="ir.ui.view">
            <field name="name">reward_andrecognition.view.form</field>
            <field name="model">reward_and_recognition</field>
            <field name="arch" type="xml">
                <form string="Reward And Recognition" import='0' duplicate='0'>
                    
                    <header>
                        <field name="show_btn_nominate" invisible='1'/>
                        <field name="show_btn_scrutinize" invisible='1'/>
                        <field name="show_btn_final_review" invisible='1'/>
                        <field name="show_btn_finalise" invisible='1'/>
                        <field name="show_btn_award" invisible='1'/>
                        <field name="show_btn_reject" invisible='1'/>
                        <field name="get_offboarding_data" invisible='1'/>

                        <button name="send_to_reviewer"
                                groups="kw_reward_and_recognition.rnr_sbu"  
                                context="{'remark_id':id,'sbu':True}" string="Nominate" class="btn-primary" type="object" 
                                attrs="{'invisible': [('state','!=','sbu')]}"/> 

                        <!-- <button name="%(kw_reward_and_recognition.action_rnr_remark_wizard)d"  
                                context="{'remark_id':id,'scrutinize':True}" string="Review" class="btn-primary" type="action" 
                                attrs="{'invisible': ['|',('show_btn_scrutinize','=',False),('state','!=','nominate')]}"/> -->

                        <button name="send_to_final_reviewer"  
                                context="{'remark_id':id,'award':True}" string="Reward" class="btn-success" type="object" 
                                attrs="{'invisible': [('show_btn_award','=',False)]}"/>

                        <!-- <button name="%(kw_reward_and_recognition.action_rnr_remark_wizard)d"  
                                context="{'remark_id':id,'reject':True}" string="Reject" class="btn-danger" type="action" 
                                attrs="{'invisible': [('show_btn_reject','=',False)]}"/>                   -->

                        <button name="%(kw_reward_and_recognition.action_rnr_remark_wizard)d"  
                                context="{'remark_id':id,'finalise':True}" string="Publish" class="btn-success"
                                groups="kw_reward_and_recognition.rnr_final_reviewer" type="action" 
                                attrs="{'invisible': [('show_btn_finalise','=',False)]}"/>
                                
                                <field name="state" widget="statusbar" statusbar_visible="sbu,nominate,award,finalise,reject"/>
                            </header>
                            <sheet>
                                <field name="active" invisible='1'/>
                                <group>
                                <field name="employee_image" force_save='1' widget="image" class="oe_avatar" options='{"preview_image": "employee_image"}'/>
                                <group string="Nominee Details">
                                    <field name="hide_rnr_div" invisible='1'/>
                                    <field name="rnr_division_id" options="{'no_open': True,'no_create':True,'no_edit':True}" required="1" attrs="{'readonly':['|',('state','not in',['sbu']),('hide_rnr_div','=',True)]}"/>
                                    <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'readonly':[('state','not in',['sbu'])]}"  required="1"/>
                                    <!-- <field name="reason" required="1" attrs="{'readonly':[('state','in',['award','reject'])]}"/> -->
                                    <field name="compute_login" invisible='1'/>
                                    <field name="reason_justification" required="0"  attrs="{'readonly':[('compute_login','=',True)]}">
                                        <tree string="reason justification Tree" editable='bottom' edit='1'>
                                            <field name="reason_type_id" string="Reasons" readonly='0' required="0" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                            <field name="reason" string="Justifications" required="0"/>
                                        </tree>
                                    </field>
                                    <field name="nominated_by" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly='1'/>
                                    <field name="pending_at" invisible='1' readonly='1' string='Pending at' options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'invisible':[('pending_at','=',False)]}" />
                                    <field name="pending_at_status" readonly='1' string='Pending at' options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'invisible':[('pending_at','=',False)]}" />
                                    <field name="reviewed_by" readonly='1' options="{'no_open': True,'no_create':True,'no_edit':True}" attrs="{'invisible':[('reviewed_by','=',False)]}"/>
                                    <field name="create_date" string="Nominated On" readonly='1' attrs="{'invisible':[('create_date','=',False)]}" />
                                    <field name="publish_on" readonly='1' attrs="{'invisible':[('publish_on','=',False)]}"/>
                                    <field name='month' invisible='1'/>
                                    <field name='year' invisible='1'/>
                                    <field name='compute_month' invisible='0'/>
                                    <field name='compute_year' invisible='0'/>
                                </group>
                                <group string='Department Details'>
                                    
                                    <field name="department_id" domain="[('dept_type.code', '=', 'department')]" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="division" domain="[('dept_type.code', '=', 'division')]" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="section" domain="[('dept_type.code', '=', 'section')]" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="practise" domain="[('dept_type.code', '=', 'practise')]" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="job_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="location" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="total_awards" invisible="1"/>
                                    <div group="rnr_reviewer" attrs="{'invisible':[('total_awards','=',0)]}" width="100%" style="display: flex;flex-flow: row nowrap;justify-content: space-between;">
                                        <strong><p style="color:#7C7BAD;font-size: 20px;">(Award Details.)</p></strong>
                                    </div>
                                    <div group="rnr_reviewer" attrs="{'invisible':[('total_awards','=',0)]}">
                                    </div>
                                    <div group="rnr_reviewer" attrs="{'invisible':[('total_awards','=',0)]}">
                                        <div group="rnr_reviewer">
                                            <label style="color:#7C7BAD;font-size: 14px;font-weight: bold;" for='total_awards' >Total Awards | </label>
                                            <field name="total_awards" group="rnr_reviewer" readonly="1"/>
                                        </div>
                                        <div group="rnr_reviewer">
                                            <label style="color:green;font-size: 14px;font-weight: bold;" for='awarded' >Awarded | </label>
                                            <field name="awarded" group="rnr_reviewer" readonly="1"/>
                                        </div>
                                        <div group="rnr_reviewer">
                                            <label style="color:#fc0307;font-size: 14px;font-weight: bold;" for='awards_left' >Award Left | </label>
                                            <field name="awards_left" group="rnr_reviewer" readonly="1"/>
                                        </div>
                                    </div>
                                </group>
                                <!-- <group string="User Action Details" attrs="{'invisible':[('action_log_ids','=',[])]}">
                                    <field name="action_log_ids" attrs="{'invisible':[('action_log_ids','=',[])]}" readonly='1'/>  
                                </group> -->
                                <group string="Feedbacks" attrs="{'invisible':[('sbu_feedback','=',False)]}">
                                    <field name="sbu_feedback" string="SBU/HOD Remark" attrs="{'invisible':[('sbu_feedback','=',False)]}" group="rnr_sbu" readonly="1"/>
                                    <field name="reviewer_feedback" string="Reviewer Remark" attrs="{'invisible':[('reviewer_feedback','=',False)]}" group="rnr_reviewer" readonly="1"/>
                                    <field name="final_reviewer_feedback" string=" Final-Reviewer Remark" attrs="{'invisible':[('final_reviewer_feedback','=',False)]}" group="rnr_final_reviewer" readonly="1"/>
                                </group>
                            </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="reward_and_recognition_view_kanban" model="ir.ui.view">
			<field name="name">Starlight Kanban View</field>
			<field name="model">reward_and_recognition</field>
			<field name="arch" type="xml">
				<kanban class="oe_background_grey o_kanban_dashboard " delete='0' import='0' duplicate='0'>
					<field name="rnr_division_id"/>
					<field name="employee_id"/>
					<field name="nominated_by"/>
					<field name="state"/>
					<templates>
						<t t-name="kanban-box">
							<div class="o_kanban_card_content oe_kanban_global_click" style="height:200px;">
								<div class="row">
                                    <div class="col-12">
                                        <div class="o_kanban_record_top">
                                            <div class="o_kanban_record_headings">
                                                <h4>
                                                    <img t-att-src="kanban_image('hr.employee', 'image_small', record.employee_id.raw_value)" t-att-title="record.employee_id.value" t-att-alt="record.employee_id.value" width="40" height="40" class="rounded-circle"/>
                                                    <b t-esc="record.employee_id.value">
                                                    </b>
                                                </h4>
                                            </div>
                                            <div class="col-2" attrs="{'invisible':[('state','not in',['award','finalise'])]}">
                                                <img src="/kw_reward_and_recognition/static/description/med2.png" width="50" height="50" alt="Award Badge"/>
                                            </div>
                                        </div>
                                        <table class="table table-borderless">
                                            <tr style="font-size:9px;height:20px;">
                                                <td style="width:40%;"><i style="color:rgb(22, 123, 158);" class="fa fa-lg fa-check-square-o"/><b>&amp;nbsp;&amp;nbsp;Department :</b></td>
                                                
                                                <td>
                                                    <field name="rnr_division_id"/>
                                                </td>
                                            </tr>
                                            <tr style="font-size:9px;height:10px;">
                                                <td><i style="color:rgb(22, 123, 158);" class="fa fa-lg fa-edit"/><b>&amp;nbsp;&amp;nbsp;State :</b></td>
                                                <td>
                                                    <field name="state" />
                                                </td>
                                            </tr>
                                            <tr style="font-size:9px;height:10px;">
                                                <td><i style="color:rgb(22, 123, 158);" class="fa fa-lg fa-user-o"/><b>&amp;nbsp;&amp;nbsp;Nominated By :</b></td>
                                                <td>
                                                    <field name="nominated_by"/>
                                                </td>
                                            </tr>
                                            <tr style="font-size:9px;height:10px;">
                                                <td><i style="color:rgb(22, 123, 158);" class="fa fa-lg fa-calendar"/><b>&amp;nbsp;&amp;nbsp;Nominated On :</b></td>
                                                <td>
                                                    <field name="create_date" widget='date'/>
                                                </td>
                                            </tr>
                                            
                                        </table>
                                    </div>
                                   
                                </div>
                            </div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>


        <record id="reward_and_recognition_action" model="ir.actions.act_window">
            <field name="name">Nominate</field>
            <field name="res_model">reward_and_recognition</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="search_view_id" ref="kw_reward_and_recognition.reward_and_recognition_view_report_search_view" />
            <field name="context">{'rnr_action':True,'search_default_nominated_on_date':1,'search_default_nominated_on_month':1}</field>
            <field name="domain">[('create_uid','=',uid)]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('kw_reward_and_recognition.reward_and_recognition_view_kanban')}), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('kw_reward_and_recognition.reward_andrecognition_view_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('kw_reward_and_recognition.reward_andrecognition_view_form')})]"/>
        </record>
    </data>
</odoo>