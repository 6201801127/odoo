<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record model="ir.module.category" id="module_performance_improvement_plan">
            <field name="name">PIP</field>
            <field name="description">User access level for PIP</field>
            <field name="sequence">4</field>
        </record>

        <record id="group_pip_user" model="res.groups">
            <field name="name">User</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>

        <record id="group_pip_l_and_k" model="res.groups">
            <field name="name">PIP L&amp;K</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>

        <record id="group_pip_officer" model="res.groups">
            <field name="name">PIP Notify</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>
        <record id="group_pip_manager" model="res.groups">
            <field name="name">Manager</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>
        <record id="group_pip_mis_user" model="res.groups">
            <field name="name">Report User</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>
        <record id="group_pip_hr_user" model="res.groups">
            <field name="name">HR User (PMS)</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>
        <record id="group_pip_assessor_user" model="res.groups">
            <field name="name">Assessor User</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>
        <record id="group_pip_module_user" model="res.groups">
            <field name="name">PIP Assessee</field>
            <field name="category_id" ref="module_performance_improvement_plan"/>
        </record>

        <record model="ir.rule" id="pip_rule_user_create_read_edit_delete_all">
			<field name="name">CRED User</field>
			<field name="model_id" ref="model_performance_improvement_plan"/>
			<field name="domain_force">['|',('create_uid', '=', user.id),('pending_at.user_id','=',user.id)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_user'))]"/>
		</record>

        <record model="ir.rule" id="pip_rule_manager_create_read_edit_delete_all">
			<field name="name">CRED User PIP</field>
			<field name="model_id" ref="model_performance_improvement_plan"/>
            <field name="domain_force">[(1, '=', 1)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_manager'))]"/>
		</record>
        <!-- <record model="ir.rule" id="pip_rule_sbu_read_edit_delete_all">
			<field name="name">CRED RCM representative PIP</field>
			<field name="model_id" ref="model_performance_improvement_plan"/>
            <field name="domain_force">['|',('raised_by.user_id','=',user.id),('pending_at.user_id','=',user.id)]</field>
			<field name="groups" eval="[(4,ref('kw_resource_management.group_sbu_representative'))]"/>
		</record> -->
        <record model="ir.rule" id="pip_rule_all_read_edit_delete_all">
			<field name="name">CRED RCM PIP</field>
			<field name="model_id" ref="model_performance_improvement_plan"/>
			<field name="domain_force">[(1, '=', 1)]</field>
			<field name="groups" eval="[(4,ref('kw_resource_management.group_budget_manager','performance_improvement_plan.group_pip_manager'))]"/>
		</record>
        <record model="ir.rule" id="pip_rule_all_read_edit_delete_all_hr_officer">
			<field name="name">CRED RCM PIP HR OFFICER</field>
			<field name="model_id" ref="model_performance_improvement_plan"/>
			<field name="domain_force">[(1, '=', 1)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_hr_user'))]"/>
		</record>
        <record model="ir.rule" id="pip_rule_counselling_edit_delete_all">
			<field name="name">Report</field>
			<field name="model_id" ref="model_pip_hr_employee_counselling"/>
			<field name="domain_force">[(1, '=', 1)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_manager','performance_improvement_plan.group_pip_hr_user'))]"/>
		</record>
        <!-- <record model="ir.rule" id="pip_user_edit_delete_all">
			<field name="name">Report</field>
			<field name="model_id" ref="model_pip_hr_employee_counselling"/>
			<field name="domain_force">[('emp_id', '=', user.employee_ids.id)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_module_user'))]"/>
		</record> -->
        <!-- <record model="ir.rule" id="pip_ra_read_edit_delete_all">
			<field name="name">Report</field>
			<field name="model_id" ref="model_pip_hr_employee_counselling"/>
			<field name="domain_force">[('emp_id.parent_id', '=', user.employee_ids.id)]</field>
			<field name="groups" eval="[(4,ref('kw_employee.group_hr_ra'))]"/>
		</record>
        <record model="ir.rule" id="pip_rule_rcm_read_edit_delete_all">
			<field name="name">Report</field>
			<field name="model_id" ref="model_pip_hr_employee_counselling"/>
			<field name="domain_force">[('emp_id.sbu_master_id', '=', user.employee_ids.id)]</field>
			<field name="groups" eval="[(4,ref('kw_resource_management.group_sbu_representative'))]"/>
		</record> -->
        <record id="pip_assessors_rule" model="ir.rule">
            <field name="name">Assessor CRED Rule</field>
            <field ref="model_kw_pip_counselling_details" name="model_id"/>
            <field name="domain_force">['&amp;',('assign_assessors_ids', 'in', user.employee_ids.id),('feedback_status','not in',['0'])]</field>
            <field name="groups" eval="[(4, ref('performance_improvement_plan.group_pip_assessor_user'))]"/>
        </record> 
        <record id="pip_details_user_rule" model="ir.rule">
            <field name="name">User CRED Rule</field>
            <field ref="model_kw_pip_counselling_details" name="model_id"/>
            <field name="domain_force">['&amp;',('assessee_id', '=', user.employee_ids.id),('feedback_status','not in',['0','1','2'])]</field>
            <field name="groups" eval="[(4, ref('group_pip_module_user'))]"/>
        </record>
        <!-- <record model="ir.rule" id="pip_rule_assessor_read_edit_delete_all">
			<field name="name">CRED Assessor PIP</field>
			<field name="model_id" ref="model_kw_pip_counselling_details"/>
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_assessor_user'))]"/>
		</record> -->
        <record model="ir.rule" id="pip_rule_all_user_read_edit_delete_all">
			<field name="name">CRED All PIP</field>
			<field name="model_id" ref="model_kw_pip_counselling_details"/>
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4,ref('performance_improvement_plan.group_pip_manager','performance_improvement_plan.group_pip_hr_user'))]"/>
		</record>
    </data>
</odoo>
