<odoo>
    <data>
        <record model="ir.ui.view" id="performance_improvement_plan_report_list">
            <field name="name">PIP_HR_list_report</field>
            <field name="model">pip_hr_employee_counselling</field>
            <field name="arch" type="xml">
                <tree create="false" import="false" class="customer_tree" decoration-success="pip_status=='PIP Closed'">
                    <field name="reference" invisible="0"/>
                    <field name="emp_id" class="font-weight-bold" invisible="1"/>
                    <field name="emp_name" class="font-weight-bold" />
                    <field name="emp_code" />
                    <field name="emp_desg" />
                    <field name="department_id" />
                    <field name="project_id" />
                    <field name="project_code"  invisible="1"/>
                    <field name="reason" />
                    <!-- <field name="remark_pm_rev" string="Description"/> -->
                    <field name="raise_by_emp" />
                    <!-- <field name="suggestion" string="Suggestion(PM/Div. head)"/> -->
                    <!-- <field name="remark"/> -->
                    <field name="applied_date" />
                    <field name="suggestion_head" invisible="1"/>
                    <field name="sbu_suggest" invisible="1"/>
                    <field name="hod_suggest" invisible="1"/>
                    <field name="take_action_date" />
                    <field name="action_taken_by" /> 
                    <field name="pip_status" class="font-weight-bold" />
                    <field name="pp_id" invisible="1"/>
                    <button name="get_view_report" string="View Details" type="object" class="btn-dark"
                            groups="performance_improvement_plan.group_pip_hr_user" context="{'current_emp':pp_id}"/>
                    <button name="take_action_of_hr" string="Take Action" type="object" class="btn-success"
                            groups="performance_improvement_plan.group_pip_hr_user"
                            context="{'current_emp':emp_id,'ref_no':reference,'pip_refid':id}"
                            attrs="{'invisible':[('pip_status','not in',['Not Schedule','Counselling Recommended'])]}"/>
                </tree>
            </field>
        </record>




        <record id="performance_improvement_plan_report_form" model="ir.ui.view">
            <field name="name">PIP_Report_Form</field>
            <field name="model">pip_hr_employee_counselling</field>
            <field name="arch" type="xml">
                <form string="Report" create='false' duplicate='false' delete='false'>
                    <header>
                        <field name="status" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="raise_by_emp"
                                       options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                                <field name="applied_date"/>
                                <field name="emp_id" options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                                <field name="emp_desg" options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                                <field name="department_id"
                                       options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                                <field name="project_id"
                                       options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                                <field name="project_code"
                                       options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                                <field name="reason" invisible="0"/>
                            </group>
                            <group>
                                <field name="suggestion_pm"/>
                                <field name="suggestion_head"/>
                                <field name="sbu_suggest"/>
                                <field name="hod_suggest"/>
                                <field name="take_action_date"/>
                                <field name="action_taken_by"
                                       options="{'no_create': True, 'no_open': True, 'no_edit': True}"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        
        <record model="ir.ui.view" id="performance_improvement_plan_report_user_list">
            <field name="name">PIP_HR_list_user_report</field>
            <field name="model">pip_hr_employee_counselling</field>
            <field name="arch" type="xml">
                <tree create='false' import="false" class="customer_tree" >
                    <field name="emp_id" class="font-weight-bold" invisible="1"/>
                    <field name="emp_name" class="font-weight-bold"/>
                    <field name="emp_code"/>
                    <field name="emp_desg"/>
                    <field name="department_id"/>
                    <field name="project_id"/>
                    <field name="project_code" invisible="1"/>
                    <field name="reason"/>
                    <field name="remark_pm_rev" string="Description"/>
                    <field name="suggestion" string="Suggestion(PM/Div. head)"/>
                    <field name="remark"/>
                    <field name="raise_by_emp"/>
                    <field name="applied_date"/>
                    <field name="suggestion_head" invisible="1"/>
                    <field name="sbu_suggest" invisible="1"/>
                    <field name="hod_suggest" invisible="1"/>
                    <field name="take_action_date"/>
                    <field name="action_taken_by"/>
                    <field name="pip_status" class="font-weight-bold"/>
                    <!-- <field name="hide_view_details_check" invisible="1"/> -->
                    <button name="get_view_details_user" string="View Details" type="object" class="btn-primary"/>

                </tree>
            </field>
        </record>


        <record id="performance_improvement_plan_hr_take_action" model="ir.actions.act_window">
            <field name="name">PIP Raise Details</field>
            <field name="res_model">pip_hr_employee_counselling</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="performance_improvement_plan.performance_improvement_plan_report_list"/>
            <field name="domain">[('remark','in',['RP'])]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Reports found.
                </p>
            </field>
        </record>
        <record id="performance_improvement_plan_user_action" model="ir.actions.act_window">
            <field name="name">My PIP</field>
            <field name="res_model">pip_hr_employee_counselling</field>
            <field name="view_mode">tree</field>
            <field name="view_type">form</field>
            <field name="domain">[('emp_id.user_id','=',uid)]</field>
            <field name="view_id" ref="performance_improvement_plan.performance_improvement_plan_report_user_list"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Reports found.
                </p>
            </field>
        </record>

        <menuitem name="My PIP"
                  id="user_pip_menu"
                  parent='pip_root_menu'
                  sequence="10"
                  groups="performance_improvement_plan.group_pip_module_user"/>
        <menuitem name="My PIP"
                  id="user_pip1_menu"
                  parent='user_pip_menu'
                  sequence="1"
                  action="performance_improvement_plan_user_action"
                  groups="performance_improvement_plan.group_pip_module_user"/>
        <menuitem name="PIP Raise Details"
                  id="pip_hr_menu_1"
                  parent='performance_improvement_plan_hr_menu'
                  groups="performance_improvement_plan.group_pip_hr_user,performance_improvement_plan.group_pip_manager"
                  action='performance_improvement_plan_hr_take_action'
                  sequence="1"/>

    </data>
</odoo>
