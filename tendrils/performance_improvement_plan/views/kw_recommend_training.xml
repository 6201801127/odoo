
<odoo>
    <data>
        <record id="view_kw_recommend_training_tree" model="ir.ui.view">
            <field name="name">kw.recommend.training.tree</field>
            <field name="model">kw_recommend_training</field>
            <field name="arch" type="xml">
                <tree create='false' import='false' delete='false' string="PIP Process">
                    <field name="reference"/>
                    <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="designation_id"/>
                    <field name="performance_reason_training" widget="many2many_tags"/>
                    <field name="raised_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <field name="applied_date"/>
                    <!-- <field name="recommendation_reason"/> -->
                    <field name="status"/>
                    <field name="pending_at_txt"/>
                    <field name="approved_by" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                    <!-- <field name="lnk_feedback_ids"/> -->
                    <!-- <field name="final_feedback_ids"/> -->
                    <field name="is_sent_to_hr" invisible="1"/>
                    <field name="has_training_created" invisible="1"/>
                    <button name="take_action_for_lnk" string="Take Action" type="object" class="oe_highlight" attrs="{'invisible': [('has_training_created', '=', True)]}"/>
                    <button name="view_training_pip" string="View Details" type="object" class="btn-warning" attrs="{'invisible': [('has_training_created', '=', False)]}"/>
                    
                </tree>
            </field>
        </record>
        <record id="view_kw_recommend_training_form" model="ir.ui.view">
            <field name="name">kw.recommend.training.form</field>
            <field name="model">kw_recommend_training</field>
            <field name="arch" type="xml">
                <form create='false' import='false' delete='false' string="PIP Process">
                    <header>
                        <button name="action_send_to_hr" type="object" string="Send to PMS" attrs="{'invisible': [('is_sent_to_hr', '=', True)]}" class="oe_highlight"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="reference" readonly="1"/>
                                <field name="pip_id" invisible="1"/>
                                <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>
                                <field name="designation_id" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>
                                <field name="performance_reason_training" widget="many2many_tags" readonly="1"/>
                                <field name="raised_by" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>
                            </group>
                            <group>
                                <field name="applied_date" readonly="1"/>
                                <field name="is_sent_to_hr" invisible="1"/>
                                <field name="status" readonly="1"/>
                                <field name="pending_at_txt" readonly="1"/>
                                <field name="approved_by" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>
                                <field name="target_date" readonly="1"/>
                                <field name="skill" options="{'no_open': True,'no_create':True,'no_edit':True}" readonly="1"/>
                                <field name="assessment_score"/>
                            </group>
                        </group>
                        <group string="L&amp;K Feedback" >
                            <field name="lnk_feedback_ids" attrs="{'readonly': [('is_sent_to_hr', '=', True)]}" string="" >
                                <tree editable="bottom" string="L&amp;K Feedback">
                                    <field name="employee_id" options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                                    <field name="assessment_date" autocomplete="off"/>
                                    <field name="status"/>
                                    <field name="remarks" autocomplete="off"/>
                                </tree>
                            </field>
                        </group>
                            <group string="Final Feedback">
                                <group>
                                    <field name="final_feedback_status" widget="radio" options="{'horizontal': true}" attrs="{'readonly': [('is_sent_to_hr', '=', True)]}"/>
                                    <field name="final_feedback_remarks" autocomplete="off" attrs="{'readonly': [('is_sent_to_hr', '=', True)]}"/>
                                    <field name="training_completion_date" attrs="{'readonly': [('is_sent_to_hr', '=', True)]}"/>
                                </group>
                            </group>                        
                    </sheet>
                </form>
            </field>
        </record>

        <record id="action_kw_recommend_training" model="ir.actions.act_window">
            <field name="name">PIP Process L&amp;K</field>
            <field name="res_model">kw_recommend_training</field>
            <field name="view_mode">tree,form</field>
            <!-- <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new recommended training record.
                </p>
            </field> -->
        </record>
        <record id="view_kw_recommend_l_and_k_form" model="ir.ui.view">
            <field name="name">kw_lnk_feedback.form</field>
            <field name="model">kw_lnk_feedback</field>
            <field name="arch" type="xml">
                <form create='false' import='false' delete='false' string="Recommended Training">
                    <sheet>
                        <group>       
                            <field name="recommend_training_id"  invisible="1"/>
                            <field name="employee_id"   options="{'no_open': True,'no_create':True,'no_edit':True}"/>
                            <field name="assessment_date" autocomplete='false'/>
                            <field name="status" widget="radio" options="{'horizontal': true}"/>
                            <field name="remarks" autocomplete='off'/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <menuitem name="PIP Recommended Training"
                  id="performance_improvement_plan_l_and_k_menu"
                  parent='kw_training.menu_kw_training_root'
                  action='action_kw_recommend_training'
                  sequence="20"
                  groups="performance_improvement_plan.group_pip_l_and_k"/>
        
        
    </data>
    
</odoo>