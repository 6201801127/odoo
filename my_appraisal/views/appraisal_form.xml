<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>
        <record id="appraisal_action_id" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('employee_id.user_id', '=', uid)]</field>
        </record>

        <record id="appraisal_menu_new_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','draft'),('employee_id.user_id', '=', uid)]</field>
        </record>
        

        <record id="appraisal_menu_self_review_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','self_review')]</field>
        </record>

        <record id="appraisal_menu_reporting_authority_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','reporting_authority_review')]</field>
        </record>
        <record id="appraisal_menu_reviewing_authority_approved_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','reviewing_authority_review')]</field>
        </record>

        <record id="appraisal_menu_reject_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','rejected')]</field>
        </record>

        <record id="appraisal_menu_completed_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','completed')]</field>
        </record>

        <record id="menu_appraisal_employee_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'group_by': 'employee_id'}</field>
        </record>
        <record id="menu_appraisal_branch_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'group_by': 'branch_id'}</field>
        </record>
        <record id="menu_appraisal_status_action" model="ir.actions.act_window">
            <field name="name">Appraisal</field>
            <field name="res_model">employee.appraisal</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'group_by': 'state'}</field>
        </record>

        <record id="appraisal_view_tree" model="ir.ui.view">
            <field name="name">Appraisal View Tree</field>
            <field name="model">employee.appraisal</field>
            <field name="arch" type="xml">
                <tree string="" create="0">
                    <field name="employee_id" />
                    <field name="apar_period_id"/>
                    <field name="branch_id"/>
                    <field name="template_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="appraisal_view_form" model="ir.ui.view">
            <field name="name">Appraisal View Form</field>
            <field name="model">employee.appraisal</field>
            <field name="arch" type="xml">
                <form string="" create="0">
                    <header>
                        <button name="button_self_reviewed" string="Submit" class="oe_highlight" type="object"         confirm="Are you sure you want to confirm the request?." attrs="{'invisible':[('state','!=','draft')]}"/>
                        <button name="button_reporting_authority_reviewed" string="Submit" class="oe_highlight" type="object" states="self_review" groups="my_appraisal.appraisal_reporting_authority_group_id" confirm="Are you sure you want to confirm the request?."/>
                        <button name="button_completed" string="Publish" class="oe_highlight" type="object" states="reporting_authority_review" groups="my_appraisal.appraisal_manager_group_id" confirm="Are you sure you want to publish the request?"/>
                        <button name="button_reject" string="Reject" groups="my_appraisal.appraisal_reviewing_authority_group_id,my_appraisal.appraisal_reporting_authority_group_id,my_appraisal.appraisal_manager_group_id" type="object" attrs="{'invisible':[('state','in',('draft','completed','rejected'))]}" class="btn-primary"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="employee_id" readonly="1" options="{'no_create':True,'no_open':True,'no_create_edit': True}"/>
                                <field name="apar_period_id" readonly="1" options="{'no_create':True,'no_open':True,'no_create_edit': True}"/>
                                
                            </group>
                            <group>
                                <field name="branch_id" readonly="1" options="{'no_create':True,'no_open':True,'no_create_edit': True}"/>
                                <field name="template_id" string="Template" readonly="1" options="{'no_create':True,'no_open':True,'no_create_edit': True}"/>
                                <field name="ra_group_bool_check" invisible="1"/>
                                <field name="review_group_bool_check" invisible="1"/>
                                <field name="manager_group_bool_check" invisible="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page string = "Part-2: Self-assessment by the officer requested upon">
                               <group>
                                    <separator string="Brief Description Of Duties"/>
                                    <newline/>
                                    <field name="duties_description" nolabel="1" attrs="{'readonly':[('state','!=','draft')],'required':[('state','=','draft')]}"/>
                                    <newline/>
                                    <br />
                                    <br />
                                    <br />
                                    <separator style="width:100%" string="Please  specify  targets/objectives/goals  (in  quantitative  or  other  terms)  of  work  you  set  for  yourself or that were set for you, eight to ten items of work in the order of priority and your achievement against each target (Example: Annual Action Plan for your Division)."/>
                                    <newline/>
                                    <field name="app_ids" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}">
                                        <tree editable="bottom">
                                            <field name="app_id" invisible="1"/>
                                            <field name="targets" required="1"/>
                                            <field name="achievements" required="1"/>
                                        </tree>
                                    </field>
                                    <newline/>
                                    <br />
                                    <br />
                                    <br />
                                    <separator style="width:100%" string="Please  state  briefly,  the  shortfalls  with  reference  to  the  targets/objective/goals  referred  to  in  item  2.  Please  specify  constraints,  if  any, in achieving the targets."/>
                                <newline/>
                                <field name="sortfalls" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}" required="1"/>
                                    <newline/>
                                    <br />
                                    <br />
                                    <br />
                                    <separator style="width:100%" string="Please  state  whether  the  annual  return  on  immovable  property  for  the  preceding  calendar  year  was  filed  within  the  prescribed  date  i.e  31st  January  of  the  year  following  the  calendar  year. If not, the date of filling the return should be given.
                                    "/>
                                <newline/>
                                <group>
                                    <field name="immovatable_property" nolabel="1" attrs="{'readonly':[('state','!=','draft')]}"/>
                                </group>
                               </group>
                            </page>
                            
                            <page string = "Part-3: Assessment by the Reporting">
                                <separator string="Assessment of Work Output"/>
                                <field name="kpia_ids" options="{'no_open':True}">
                                    <tree editable="bottom" create="0" delete="0">
                                        <field name="ra_group_bool_check" invisible="1"/>
                                        <field name="review_group_bool_check" invisible="1"/>
                                        <field name="kpia_id" invisible="1"/>
                                        <field name="state" string='Status' invisible="1"/>
                                        <field name="kra" readonly="1" invisible="1"/>
                                        <field name="kpi" readonly="1"/>
                                        <field name="weightage_comp" string="Weightage Comp" invisible="1"/>
                                        <field name="weightage_int" string="Weightage"/>
                                        <field name="reporting_auth" string="Rating By Reporting Auth" attrs="{'readonly':['|',('ra_group_bool_check','=',False),('state','not in',('self_review'))]}"/>
                                        <field name="reporting_auth_remarks" attrs="{'readonly':['|',('ra_group_bool_check','=',False),('state','not in',('self_review'))]}"/>
                                      
                                        <field name="average" invisible="1"/>
                                        <field name="reviewing_auth_user" attrs="{'invisible':[('state','not in',('completed'))],'readonly':[('state','in',('completed'))]}" invisible="1"/>
                                    </tree>
                                </field>
                                <group class="oe_subtotal_footer oe_right">
                                    <field name="average1" string="Overall Grading On ‘Work Output’"/>
                                </group>
                                <separator string="Assessment of Personal Attributes"/>
                                <field name="kpia_ids1" options="{'no_open':True}">
                                    <tree editable="bottom" create="0" delete="0">
                                        <field name="ra_group_bool_check" invisible="1"/>
                                        <field name="review_group_bool_check" invisible="1"/>
                                        <field name="kpia_id" invisible="1"/>
                                        <field name="state" string='Status' invisible="1"/>
                                        <field name="kra" readonly="1" invisible="1"/>
                                        <field name="kpi" readonly="1"/>
                                        <field name="weightage_comp" string="Weightage Comp" invisible="1"/>
                                        <field name="weightage_int" string="Weightage"/>
                                        <field name="reporting_auth" string="Rating By Reporting Auth" attrs="{'readonly':['|',('ra_group_bool_check','=',False),('state','not in',('self_review'))]}"/>
                                        <field name="reporting_auth_remarks" attrs="{'readonly':['|',('ra_group_bool_check','=',False),('state','not in',('self_review'))]}"/>

                                        <field name="average" invisible="1"/>
                                        <field name="reviewing_auth_user" attrs="{'invisible':[('state','not in',('completed'))],'readonly':[('state','in',('completed'))]}" invisible="1"/>
                                    </tree>
                                </field>
                               <group class="oe_subtotal_footer oe_right"> <field name="average2" string="Overall Grading On ‘Personal Attributes’"/></group>
                                <separator string="Assessment of functional competency"/>
                                <field name="kpia_ids2" options="{'no_open':True}">
                                    <tree editable="bottom" create="0" delete="0">
                                        <field name="ra_group_bool_check" invisible="1"/>
                                        <field name="review_group_bool_check" invisible="1"/>
                                        <field name="kpia_id" invisible="1"/>
                                        <field name="state" string='Status' invisible="1"/>
                                        <field name="kra" readonly="1" invisible="1"/>
                                        <field name="kpi" readonly="1"/>
                                        <field name="weightage_comp" string="Weightage Comp" invisible="1"/>
                                        <field name="weightage_int" string="Weightage"/>
                                        <field name="reporting_auth" string="Rating By Reporting Auth" attrs="{'readonly':['|',('ra_group_bool_check','=',False),('state','not in',('self_review'))]}"/>
                                        <field name="reporting_auth_remarks" attrs="{'readonly':['|',('ra_group_bool_check','=',False),('state','not in',('self_review'))]}"/>
                                        <field name="average" invisible="1"/>
                                        <field name="reviewing_auth_user" attrs="{'invisible':[('state','not in',('completed'))],'readonly':[('state','in',('completed'))]}" invisible="1"/>
                                    </tree>
                                </field>
                               <group class="oe_subtotal_footer oe_right"> <field name="average3" string="Overall Grading On ‘Functional Competency"/></group>
                               <group></group>
                                <group class="oe_subtotal_footer oe_right" colspan="2" attrs="{'invisible':[('state','not in',('reviewing_authority_review', 'completed'))]}">
                                    <field name="overall_rate_num" class="oe_subtotal_footer_separator"/>
                                </group>
                            </page>
                            <page string="Part-4: General" attrs="{'invisible':[('state','in',('draft'))]}">
                                <separator string="Please comment on the officer’s accessibility to the public and responsiveness to their needs."/>
                                <newline/>
                                <field name="comment_oa" nolabel="1" attrs="{'readonly':[('state','!=','self_review')],'required':[('state','=','self_review')]}"/>
                                <newline/>
                                <br />
                                <br />
                                <br />
                                <separator style="width:100%" string="Please  give  recommendations  for  training  with  a  view  to  further  improving  the  effectiveness and capabilities of the officers."/>
                                <newline/>
                                <field name="train_gen" nolabel="1" attrs="{'readonly':[('state','!=','self_review')]}"/>
                                <newline/>
                                <br />
                                <br />
                                <br />
                                <separator string="State Of Health"/>
                                <newline/>
                                <field name="soh" nolabel="1" attrs="{'readonly':[('state','!=','self_review')]}"/>
                                <newline/>
                                <br />
                                <br />
                                <br />
                                <separator string="Integrity"/>
                                <newline/>
                                <separator string="Please comment on the integrity of the officer."/>
                                <newline/>
                                <field name="inte_general" nolabel="1" attrs="{'readonly':[('state','!=','self_review')]}"/>
                                <newline/>
                                <br />
                                <br />
                                <br />
                                <separator style="width:100%" string="Pen picture by Reporting Officer (in about 100 words) on the  overall  qualities  of  the  officer  including  area  of  strengths  and  lesser  strength,  extraordinary  achievement, significant failures (ref: A and B  of Part –3) and attitude towards weaker sections."/>
                                <newline/>
                                <field name="pen_picture" nolabel="1" attrs="{'readonly':[('state','!=','self_review')]}"/>
                                <newline/>
                                <br />
                                <br />
                                <br />
                            </page>
                            
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
    
    </data>
    

</odoo>
