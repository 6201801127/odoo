<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>


        <record model="ir.ui.view" id="view_hr_holidays_filter_report_inherited">
           <field name="name">view_hr_leave_search_inherited</field>
           <field name="model">hr.leave</field>
           <field name="inherit_id" ref="hr_holidays.view_hr_holidays_filter_report"/>
           <field name="arch" type="xml">                            
<!--                <xpath expr="//filter[@name='group_category']" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath> -->
                <xpath expr="//filter[@name='group_date_from']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='department']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
<!--                <xpath expr="//filter[@name='gray']" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath>-->
<!--                <xpath expr="//filter[@name='todo']" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath>-->
                <xpath expr="//filter[@name='year']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//filter[@name='my_leaves']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
<!--                <xpath expr="//filter[@name='group_category']" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath>-->
            </field>
        </record>

<!--        <record id="hr_holidays.open_company_allocation" model="ir.actions.act_window">-->
<!--            <field name="name">Leaves Summary</field>-->
<!--            <field name="res_model">hr.leave.report</field>-->
<!--            <field name="src_model">hr.employee</field>-->
<!--            <field name="binding_view_types">form</field>-->
<!--            <field name="view_mode">tree,kanban,form</field>-->
<!--            &lt;!&ndash; <field name="view_id" eval="hr_holidays.hr_leave_report_tree"/> &ndash;&gt;-->
<!--            <field name="context">{'branch_check':1,'search_default_group_type': 1}</field>-->
<!--            <field name="help" type="html">-->
<!--                <p class="o_view_nocontent_smiling_face">-->
<!--                Create a new leave request-->
<!--                </p>-->
<!--            </field>-->
<!--            <field name="domain">[('employee_id.user_id', '=', uid),('state', '=', 'validate')]</field>-->
<!--            <field name="search_view_id" ref="leaves_stpi.view_hr_holidays_filter_report_inherited"/>-->
<!--        </record>-->
        
        <record id="open_company_allocation_summary" model="ir.actions.act_window">
            <field name="name">Leaves Summary</field>
            <field name="res_model">hr.leave.report</field>
<!--            <field name="src_model">hr.employee</field>-->
            <field name="binding_view_types">form</field>
            <field name="view_mode">tree,kanban</field>
            <!-- <field name="view_id" eval="hr_holidays.hr_leave_report_tree"/> -->
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                Create a new leave request
                </p>
            </field>
            <field name="context">{'group_by': 'holiday_status_id'}</field>
            <field name="domain">['|', ('employee_id.user_id', '=', uid), ('employee_id.parent_id.user_id','=',uid)]</field>
            <field name="search_view_id" ref="leaves_stpi.view_hr_holidays_filter_report_inherited"/>
        </record>

        <record model="ir.ui.view" id="hr_leave_report_tree_inherited">
            <field name="name">report.hr.holidays.report.leave_all.tree</field>
            <field name="model">hr.leave.report</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_report_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name = 'employee_id']" position="after">
                    <field name="holiday_status_id" string="Leave Type"/>
                </xpath>
                <xpath expr="//field[@name='date_from']" position="attributes">
                    <attribute name="widget">date</attribute>
                </xpath>
                <xpath expr="//field[@name='date_to']" position="attributes">
                    <attribute name="widget">date</attribute>
                </xpath>
                <xpath expr="//field[@name='employee_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>
        <record id="open_company_my_allocation_summary" model="ir.actions.act_window">
			<field name="name">Summary</field>
			<field name="res_model">hr.leave.report</field>
			<!-- <field name="src_model">hr.employee</field> -->
			<!-- <field name="view_type">form</field> -->
			<field name="view_mode">tree,kanban</field>
			<field name="view_id" ref="hr_leave_report_tree_inherited"/>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Create a new leave request
				</p>
			</field>
            <field name="context">{'group_by': 'holiday_status_id'}</field>
			<field name="domain">[('employee_id.user_id', '=', uid)]
			</field>
			<field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter_report"/>
		</record>

		<menuitem
        id="menu_my_allocation_summary"
        name="Summary"
        parent="hr_holidays.menu_hr_holidays_my_leaves"
        action="leaves_stpi.open_company_my_allocation_summary"
        sequence="3"/>
        
        <menuitem
        name="Leaves Summary"
        id="leave_summary_with_subordinate"
        action="open_company_allocation_summary"
        parent="hr_holidays.menu_hr_holidays_report" sequence="5"/>
        
        <record id="hr_holidays.action_hr_holidays_summary_employee" model="ir.actions.act_window">
           <field name="binding_model_id" eval="False" /> 
        </record>
    </data>
</odoo>