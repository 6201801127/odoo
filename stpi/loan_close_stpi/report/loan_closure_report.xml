<odoo>

    <template id="loan_closure_report">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <t t-foreach="docs" t-as="o">
                    <div class="page">

                        <h4 class="py-3">Employee Loan Details</h4>
                        <table class="table table-sm table-bordered py-5">
                            <thead>
                                <tr>
                                    <strong><td>Employee Name</td></strong>
                                    <strong><td><t t-esc="o.employee_id.name"/></td></strong>
                                    <strong><td>Requested Date</td></strong>
                                    <strong><td><t t-esc="o.date.strftime('%d-%b-%Y')"/></td></strong>
                                </tr>
                                <tr>
                                    <strong><td>Identification No.</td></strong>
                                    <strong><td><t t-esc="o.employee_id.identify_id"/></td></strong>
                                    <strong><td>Disbursement Date</td></strong>
                                    <strong><td><t t-esc="o.loan_id.dis_date_related.strftime('%d-%b-%Y')"/></td></strong>
                                </tr>
                                <tr>
                                    <strong><td>Interest Rate</td></strong>
                                    <strong><td><t t-esc="o.loan_id.interest"/></td></strong>
                                    <strong><td>No. of Installments</td></strong>
                                    <strong><td><t t-esc="o.loan_id.installment"/></td></strong>
                                </tr>
                            </thead>
                        </table>

                        <h4>Loan Ledger Details</h4>
                        <table class="table table-sm table-bordered py-2">
                            <thead>
                                <tr>
                                    <th>SI No.</th>
                                    <th>Installment Date</th>
                                    <th>Principal Recovery Amount</th>
                                    <th>Closing Balance Principle</th>
                                    <th>Yearly Interest Amount</th>
                                    <th>Monthly Interest Amount</th>
                                    <th>C/B Interest</th>
                                    <th>EMI</th>
                                    <th>Paid Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="o.loan_id.loan_lines.filtered(lambda x: x.paid)" t-as="l">
                                    <td><span t-esc="l_index+1"/></td> 
                                    <td><span t-esc="l.date.strftime('%d-%b-%Y')"/></td>
                                    <td><span t-esc="l.principle_recovery_installment"/></td>
                                    <td><span t-esc="l.closing_blance_principle"/></td>
                                    <td><span t-esc="l.yearly_interest_amount"/></td>
                                    <td><span t-esc="l.monthly_interest_amount"/></td>
                                    <td><span t-esc="l.cb_interest"/></td>
                                    <td><span t-esc="l.amount"/></td>
                                    <td><span t-esc="l.actual_paid"/></td>
                                </tr>
                            </tbody>
                        </table>

                        <p style="text-align:right">Total Loan Taken: <t t-esc="o.total_loan_taken"/></p>
                        <p style="text-align:right">Total Amount Paid: <t t-esc="o.total_amount_paid"/></p>
                        <p style="text-align:right">Total Interest as Today: <t t-esc="o.total_interest_as_today"/></p>
                        <p style="text-align:right">Foreclosure Amount: <t t-esc="o.foreclosure_amount"/></p>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>