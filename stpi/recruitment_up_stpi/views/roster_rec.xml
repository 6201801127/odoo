<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="recruitment_roster_tree_view" model="ir.ui.view">
        <field name="name">recruitment.roster.tree</field>
        <field name="model">recruitment.roster</field>
        <field name="arch" type="xml">
            <!-- <tree string="Roster" editable="bottom"> -->
            <tree string="Roster">
                <field name="name" required="1"/>
                <!-- <field name="roster_point_number" required="1"/> -->
                <field name="roster_point_id" required="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                <field name="category_id" required="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                <field name="state" required="1" domain="[('country_id.name', '=', 'India')]" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                <field name="branch_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                <field name="emp_code" readonly="1"/>
                <field name="employee_id" invisible="1"/>
                <field name="Name_of_person" readonly="1"/>
                <field name="Hired_category" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                <field name="date_of_apointment" readonly="1"/>
                <field name="current_status" readonly="1"/>
                <field name="current_status_date" readonly="1"/>
                <field name="recruitment_status"/>
                <field name="job_id" required="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                <field name="group_id" required="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                <field name="remarks" placeholder="Remarks..."/>
                <field name="active" widget="boolean_toggle" groups="hr_recruitment.group_hr_recruitment_manager"/>
            </tree>
        </field>
    </record>

    <record id="recruitment_roster_form_view" model="ir.ui.view">
        <field name="name">recruitment.roster.form</field>
        <field name="model">recruitment.roster</field>
        <field name="arch" type="xml">
            <form string="Roster" edit="0">
                <sheet>
                    <group>
                        <group>
                            <field name="is_group_A" invisible="1"/>
                            <!-- <field name="roster_point_number" required="0" invisible="1"/> -->
                            <field name="name" invisible="1"/>
                            <field name="job_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                            <field name="roster_point_id" domain="[('id','=',0)]" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                            <field name="category_id" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                            <field name="state" readonly="1" force_save="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                            <!-- attrs="{'required':[('is_group_A','=',False)],'readonly':[('is_group_A','=',True)]}"  -->
                            <field name="branch_id" readonly="1" force_save="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                            <field name="group_id" readonly="1" force_save="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                        </group>
                        <group>
                            <field name="Name_of_person" readonly="1"/>
                            <field name="employee_id" invisible="1"/>
                            <field name="emp_code" readonly="1"/>
                            <field name="Hired_category" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}"/>
                            <field name="date_of_apointment" readonly="1"/>
                            <field name="current_status" readonly="1"/>
                            <field name="current_status_date" readonly="1"/>
                            <!-- <field name="remarks" placeholder="Remarks..."/> -->
                        </group>
                        <field name="remarks" placeholder="Remarks..."/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="view_roster_rec_search_form" model="ir.ui.view">
        <field name="name">recruitment.roster.search.form</field>
        <field name="model">recruitment.roster</field>
        <field name="arch" type="xml">
            <search string="Roster">
                <field name="employee_id"/>
                <field name="job_id"/>
                <field name="roster_point_id"/>
                <field name="state"/>
                <field name="branch_id"/>
                <filter name="filter_active" string="Active" domain="[('active','=',True)]"/>
                <filter name="filter_inactive" string="Inactive" domain="[('active','=',False)]"/>
                <filter string="Employee" name="group_employee" context="{'group_by':'employee_id'}"/>
                <filter string="Job Position" name="group_job" context="{'group_by':'job_id'}"/>
                <!-- <filter string="Roster Point Master" name="group_roster_point" context="{'group_by':'roster_point_id'}"/> -->
                <filter string="State" name="group_state" context="{'group_by':'state'}"/>
                <filter string="Center" name="group_center" context="{'group_by':'branch_id'}"/>
            </search>
        </field>
    </record>

    <record id="recruitment_roster_menu_action" model="ir.actions.act_window">
        <field name="name">Roster</field>
        <field name="res_model">recruitment.roster</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_group_job': 1}</field>
        <!-- <field name="context">{}</field> -->
    </record>
    <menuitem id="menu_recruitment_roster_parent" name="Roster" parent="hr_recruitment.menu_hr_recruitment_root" sequence="6" />

    <menuitem id="menu_recruitment_roster" name="Roster" parent="menu_recruitment_roster_parent" action="recruitment_roster_menu_action" sequence="2" />

    <record model="ir.ui.view" id="hr_employee_recruitment_roster">
        <field name="name">hr.employee.roster.recruitment</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='job_id']" position="after">
                <field name="employee_type" invisible='1'/>
                <field name="roster_line_item" attrs="{'invisible':[('employee_type','in',['contractual_with_agency','contractual_with_stpi'])]}" domain="[('job_id', '=', job_id),('employee_id', '=', False)]" options="{'no_create_edit': True, 'no_create':True, 'no_open':True}"/>
            </xpath>
        </field>
    </record>

</odoo>