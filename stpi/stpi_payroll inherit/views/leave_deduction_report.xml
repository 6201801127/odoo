<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_leave_deduction_tree" model="ir.ui.view">
        <field name="name">leave.deduction.report.tree</field>
        <field name="model">leave.deduction.report</field>
        <field name="arch" type="xml">
            <tree create="false" delete="false" string="Leave Deduction Report">
                <field name="payslip_id" string='Payslip'/>
                <field name="employee_id"/>
                <field name="leave_type_id" string='Leave Type'/>
                <field name="from_date"/>
                <field name="to_date"/>
                <field name="total_days"/>
                <field name="month"/>
                <field name="deduction_days"/>
                <!-- <field name="pending_deduction_days"/> -->
            </tree>
        </field>
    </record>

    <record id="action_leave_deduction_report" model="ir.actions.act_window">
        <field name="name">Leave Deduction Report</field>
        <field name="res_model">leave.deduction.report</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_leave_deduction_tree"/>
        <field name="help">This report performs analysis on leave deduction</field>
    </record>

    <menuitem action="action_leave_deduction_report" 
                id="menu_reporting_leave_deduction" parent="l10n_in_hr_payroll.menu_l10n_in_hr_payroll_report"
                groups="hr_payroll.group_hr_payroll_manager"/>
    
    <record model="ir.ui.view" id="payroll_hr_employee_view_form">
        <field name="name">hr.employee.payroll.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr_payroll.payroll_hr_employee_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/div/button[@name='%(hr_payroll.act_hr_employee_payslip_list)d']" position="attributes">
                <attribute name="groups"></attribute>
            </xpath>
            <xpath expr="//button[@name='%(hr_payroll.act_hr_employee_payslip_list)d']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <button name="toggle_active" position="before">
                <button name="show_payslips"
                        class="oe_stat_button"
                        icon="fa-money"
                        type="object">
                        <field name="payslip_count" widget="statinfo" string="Payslips"/>
                    </button>
            </button>
        </field>
    </record>

    <record id="hr_payroll.act_hr_employee_payslip_list" model="ir.actions.act_window">
        <field name="res_model">hr.payslip</field>
        <field name="name">Payslips</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_employee_id': [active_id], 'default_employee_id': active_id}</field>
        <field name="domain">[('employee_id.id', '=', active_id)]</field>
    </record>


    <menuitem id="hr_payroll.menu_hr_payroll_root" name="Payroll" sequence="45" 
                web_icon="hr_payroll,static/description/icon.png" groups="hr_payroll.group_hr_payroll_manager,hr_payroll.group_hr_payroll_user"/>




</odoo>